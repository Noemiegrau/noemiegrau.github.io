(window.LearnosityAmd=window.LearnosityAmd||[]).push([[65],{455:function(e,t,n){"use strict";var i=n(0),a=n.n(i),o=n(34),r=n(10);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=["exactMatch","partialMatch","partialMatchV2"],l=function isEmptyValidResponse(e){var t=a.a.getNested(e,"valid_response.value");return a.a.isEmpty(t)},c=function(e){function McqScorer(){return _classCallCheck(this,McqScorer),_possibleConstructorReturn(this,_getPrototypeOf(McqScorer).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(McqScorer,e),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(McqScorer,[{key:"getScoringData",value:function getScoringData(){return JSON.parse(JSON.stringify(this.scoringData))}},{key:"reset",value:function reset(e){var t=JSON.stringify(e);if(this.serializedData!==t){try{this.scoringData=function getScoringData(e){var t=e.question.validation,n=[];if(!function canValidateResponse(e){return!1!==a.a.getNested(e,"validation.automarkable")&&(e.valid_responses||e.validation&&(!l(e.validation)||!a.a.isEmpty(e.validation.alt_responses)))}(e.question))return{automarkable:!1};if(e.response=e.response||{},t&&t.scoring_type){if(!a.a.contains(s,t.scoring_type))throw new r.a.InvalidScoringTypeException(e.question.type,t.scoring_type);return t.valid_response&&n.push(t.valid_response),t.alt_responses&&(n=n.concat(t.alt_responses)),function processResponsesCurrentScoringFormat(e,t){var n={score:1,penaltyScore:0};return r.a.scoreArray(e,t,n,{ignoreOrder:!0})}(e,n)}return function processLegacyResponsesPre2140(e){var t,n=e.question.valid_responses,i=e.response&&e.response.value,o=(Math.abs(a.a.isNumber(e.question.penalty_score)?e.question.penalty_score:0),!0===e.question.multiple_responses),r=!0,s=[];i?(a.a.isArray(i)||(i=[i]),a.a.each(i,(function(e){var t,i=!1;for(t=0;t<n.length&&(n[t].value!=e||(i=!0,o));t++);i?s.push(!0):(s.push(!1),r=!1)})),o?(t=s.length===n.length&&a.a.all(s)?1:0,r=1===t):t=a.a.all(s)?1:0):r=null;return{score:t,responsesValid:s,maxScore:1,isValid:r}}(e=r.a.normalizeParameters(e))}(JSON.parse(JSON.stringify(e))),r.a.normalizeScores(this.scoringData,e)}catch(e){this.scoringData={error:e}}this.serializedData=t}return this}}]),McqScorer}(o.a);t.a=c},86:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(51),r=n(17),s=n.n(r),l=n(455),c=n(158),u=o.a.extend({initialize:function initialize(){o.a.prototype.initialize.apply(this,arguments),this.shuffleService=new c.a(this,{key:"options"})},getOrderedOptions:function getOrderedOptions(){return this.shuffleService.get("options")},validateStartup:function validateStartup(){o.a.prototype.validateStartup.call(this),this.get("question").options&&a.a.each(this.get("question").options,(function(e){e.value=s.a.sanitizeHTML(e.value),e.label=s.a.sanitizeHTML(e.label)})),this.get("question").valid_responses&&a.a.each(this.get("question").valid_responses,(function(e){e.value&&(e.value=s.a.sanitizeHTML(e.value))}))},processResponseValue:function processResponseValue(e){this.hasResponse()||this.set({response:{value:[],type:this.RESPONSE_TYPE.ARRAY}},{silent:!0}),this.get("response").type===this.RESPONSE_TYPE.STRING&&(this.get("response").type=this.RESPONSE_TYPE.ARRAY),this.get("response").value=e},mapValidationMetadataToResponseState:function mapValidationMetadataToResponseState(e){var t,n,i,o,r,s="unattempted"===e.targetState,l=this.shuffleService.mapValueBasedOnOptionOrder(e.metadata);return s?i=this.getUnattemptedValues():(t="correct"===e.targetState,n=this.getResponseValidDetailed().partial,o=this.getMappableResponses(),i=a.a.filter(o,(function(e,i){return n[i]===t}))),r=this.getIndexesForResponseValues(i),a.a.map(r,(function(e,t){return{metadata:l[e],value:s?null:i[t],index:e}}))},getUnattemptedValues:function getUnattemptedValues(){return a.a.chain(this.get("question").options).pluck("value").difference(this.getMappableResponses()).value()},getIndexesForResponseValues:function getIndexesForResponseValues(e){var t=a.a.pluck(this.getOrderedOptions(),"value");return a.a.map(e,(function(e){return a.a.indexOf(t,e)}))},getScorerClass:function getScorerClass(){return l.a},validateResponse:function validateResponse(){return this.getScorer().validateIndividualResponses()},allowsMultipleResponses:function allowsMultipleResponses(){var e=this.get("question");return e.hasOwnProperty("multiple_responses")&&e.multiple_responses}}),p=n(179),f=n(125),d=n.n(f),y=n(129),h=n(127),b=n(126),m=n.n(b),v=n(183),g=n(180),_=n(21),S=n(23),O={MCQ_SELECT_OPTION:"mcq:selectOption",MCQ_UPDATE_SELECTED_OPTIONS:"mcq:updateSelectedOptions"};var P={actionTypes:O,selectOption:function selectOption(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,i){n(S.a.clearValidationUI()),n({type:O.MCQ_SELECT_OPTION,payload:{option:e,allowsMultipleResponses:t}});var o=a.a.map(i().mcq.selectedOptions,(function(e){return e.value}));n(_.a.updateResponseValue(o))}},updateSelectedOptions:function updateSelectedOptions(e){return{type:O.MCQ_UPDATE_SELECTED_OPTIONS,payload:{options:e}}}},R=n(142);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function OptionInput(){return _classCallCheck(this,OptionInput),_possibleConstructorReturn(this,_getPrototypeOf(OptionInput).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(OptionInput,e),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(OptionInput,[{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.shouldFocus?this.input.focus():this.input.blur()}},{key:"isAriaHidden",value:function isAriaHidden(){var e=this.props.inMaskingState,t=this.input&&-1===this.input.tabIndex;return e||t}},{key:"render",value:function render(){var e=this,t=this.props,n=t.responseId,i=t.isSelected,a=t.allowsMultipleResponses,o=t.value,r=t.index,s=t.readOnly,l=t.onChange,c=t.onKeyDown,u=t.onInputFocus,p=a?"checkbox":"radio",f="".concat(n,"_").concat(r);return d.a.createElement("input",{id:f,className:"lrn-input",type:p,name:n,value:o,disabled:s,onChange:l,checked:i,onKeyDown:c,onFocus:function onFocus(){return u(r)},ref:function ref(t){return e.input=t},"aria-hidden":this.isAriaHidden()})}}]),OptionInput}(d.a.Component),T=n(137);function optionLabel_typeof(e){return(optionLabel_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function optionLabel_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function optionLabel_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function optionLabel_possibleConstructorReturn(e,t){return!t||"object"!==optionLabel_typeof(t)&&"function"!=typeof t?optionLabel_assertThisInitialized(e):t}function optionLabel_getPrototypeOf(e){return(optionLabel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function optionLabel_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function optionLabel_setPrototypeOf(e,t){return(optionLabel_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function OptionLabel(){var e,t;optionLabel_classCallCheck(this,OptionLabel);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return _defineProperty(optionLabel_assertThisInitialized(t=optionLabel_possibleConstructorReturn(this,(e=optionLabel_getPrototypeOf(OptionLabel)).call.apply(e,[this].concat(i)))),"state",{screenReaderElement:null}),t}return function optionLabel_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&optionLabel_setPrototypeOf(e,t)}(OptionLabel,e),function optionLabel_createClass(e,t,n){return t&&optionLabel_defineProperties(e.prototype,t),n&&optionLabel_defineProperties(e,n),e}(OptionLabel,[{key:"componentDidMount",value:function componentDidMount(){var e=this.getScreenReaderElement();this.setState({screenReaderElement:e})}},{key:"getScreenReaderElement",value:function getScreenReaderElement(){var e=T.a.getAriaLabelFromAllElements(this.props.label);return T.a.getText(e,!0)}},{key:"render",value:function render(){var e=this,t=this.props,n=t.ariaHidden,i=t.choiceLabel,a=t.displayType,o=t.index,r=t.label,s=t.disabled,l=!!i&&"block"===a,c=!(r.indexOf("learnosity-feature")>-1);return d.a.createElement("div",{className:"lrn-possible-answer","aria-hidden":n},function buildLabel(){return l?d.a.createElement("span",{className:"lrn_choiceLabel"},Object(R.a)(i,o)):null}(),function buildContent(){var e=m()({lrn_singleRow:l,"lrn-label-disabled":s},"lrn_contentWrapper");return d.a.createElement("div",{className:e,"aria-hidden":c,dangerouslySetInnerHTML:{__html:r}})}(),c&&function buildSROnly(){var t=e.state.screenReaderElement;return d.a.createElement("div",{className:"sr-only"},t)}())}}]),OptionLabel}(d.a.Component),M=n(210),w=n(14),q=n(187),L=n(131),k=n(328),I=n.n(k);function mcq_typeof(e){return(mcq_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mcq_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mcq_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mcq_possibleConstructorReturn(e,t){return!t||"object"!==mcq_typeof(t)&&"function"!=typeof t?mcq_assertThisInitialized(e):t}function mcq_getPrototypeOf(e){return(mcq_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mcq_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mcq_setPrototypeOf(e,t){return(mcq_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function mcq_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function getOptionValidationClassName(e,t,n,i){var o=t.CORRECT,r=t.INCORRECT,s=t.VALID,l=e.validatedResponses,c=e.suggestedResponses,u=c&&c.value,p=!a.a.isEmpty(l)&&null!==l[i],f=u&&c.value.indexOf(n)>=0;return p?l[i]?o:r:e.isShowingCorrectAnswers&&f?s:""}function getResponseAccessibilityState(e,t){var n=t.CORRECT,i=t.INCORRECT,a=t.VALID,o=T.a.STATES;return e===n?o.CORRECT:e===i?o.INCORRECT:e===a?o.VALID:void 0}function getWrapperStyle(e){var t=e.columns,n=100;return t>0&&(n=100/t),{width:"".concat(n,"%")}}var x={indexToFocus:null,isMinSelectionWarningVisible:!1,isMaxSelectionWarningVisible:!1},V=function(e){function MCQ(){var e,t,n,i;mcq_classCallCheck(this,MCQ);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return mcq_defineProperty(mcq_assertThisInitialized(t=mcq_possibleConstructorReturn(this,(e=mcq_getPrototypeOf(MCQ)).call.apply(e,[this].concat(r)))),"CLASSNAMES",{SELECTED:"lrn_selected",CORRECT:"lrn_correct",INCORRECT:"lrn_incorrect",VALID:"lrn_valid"}),mcq_defineProperty(mcq_assertThisInitialized(t),"state",x),mcq_defineProperty(mcq_assertThisInitialized(t),"maskedOptions",(n={},i=t.props.mcq.options,a.a.each(i,(function(e,t){return n[t]=!1})),n)),mcq_defineProperty(mcq_assertThisInitialized(t),"shouldUpdateOptionOnKeyEvent",!t.props.mcq.allowsMultipleResponses),mcq_defineProperty(mcq_assertThisInitialized(t),"focusedIndex",null),mcq_defineProperty(mcq_assertThisInitialized(t),"buildOption",(function(e,n){var i,o=t.props,r=t.CLASSNAMES,s=o.mcq,l=o.validatable,c=o.base,u=s.uiStyle,p=s.minSelection,f=s.maxSelection,y=u.inputBelowLabel,h=r.SELECTED,b=a.a.contains(s.selectedOptions,e),v=t.state,g=v.isMaxSelectionWarningVisible,_=v.isMinSelectionWarningVisible,S=getOptionValidationClassName(l,r,e,n),O=c.i18n.labels.ariaLiveText,P=T.a.getResponseAccessibility({validationState:l.ariaGlobal.label,isMath:c.isMath,value:e.label,state:getResponseAccessibilityState(S,r),ariaLiveLabels:O,isMaxSelectionWarningVisible:g,isMinSelectionWarningVisible:_,minSelection:p,maxSelection:f}),R=t.makeValidationStemNumerationLabel(e),C=t.makeInput(e,b),E=t.makeLabel(e,P,b),M=m()("lrn-mcq-option",S,(mcq_defineProperty(i={},h,!0===b),mcq_defineProperty(i,"has_stem_numeration",!a.a.isNull(R)),i));return y?d.a.createElement("li",{key:n,style:getWrapperStyle(u),className:M},R,E,C):d.a.createElement("li",{key:n,style:getWrapperStyle(u),className:M},R,C,E)})),mcq_defineProperty(mcq_assertThisInitialized(t),"onKeyDown",(function(e){var n=mcq_assertThisInitialized(t).focusedIndex,i=t.props.mcq.options,a=e.keyCode;40===a||39===a?(e.preventDefault(),n=n<i.length-1?n+1:0,t.applyFocus(n,!0)):38!==a&&37!==a||(e.preventDefault(),n=n<1?i.length-1:n-1,t.applyFocus(n,!1))})),mcq_defineProperty(mcq_assertThisInitialized(t),"onInputFocus",(function(e){t.focusedIndex=e})),t}return function mcq_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mcq_setPrototypeOf(e,t)}(MCQ,e),function mcq_createClass(e,t,n){return t&&mcq_defineProperties(e.prototype,t),n&&mcq_defineProperties(e,n),e}(MCQ,[{key:"reset",value:function reset(){this.setState(x)}},{key:"makeValidationStemNumerationLabel",value:function makeValidationStemNumerationLabel(e){var t=this.props.mcq.uiStyle,n=t.choiceLabel,i=t.type,a=this.props.validatable,o=a.responseLevelDistractorRationale,r=a.showDistractorRationale,s=a.validationState,l=a.validationStemNumeration,c=Object(w.h)(o,r.perResponse);if(n&&"block"===i||!s||0===c.length)return null;var u=Object(R.a)(l,e.defaultIndex);return d.a.createElement("span",{className:"lrn-validation-stem-numeration"},u)}},{key:"makeInput",value:function makeInput(e,t){var n=this,i=e.defaultIndex,a=this.props,o=a.base,r=a.mcq,s=this.state.indexToFocus,l=o.inMaskingState,c=o.responseId,u=o.readOnly,p=o.disabled,f=r.uiStyle,y=r.allowsMultipleResponses,h=l||u||p||!0===this.maskedOptions[i],b=s===i;return d.a.createElement(C,{index:i,allowsMultipleResponses:y,responseId:c,readOnly:h,displayType:f.type,value:e.value,isSelected:t,onChange:function onChange(){return n.toggleOptionSelection(e,i)},shouldFocus:b,onInputFocus:this.onInputFocus,onKeyDown:this.onKeyDown,inMaskingState:l})}},{key:"makeLabel",value:function makeLabel(e,t,n){var i=this,o=e.defaultIndex,r=this.props,s=r.base,l=r.mcq,c=s.responseId,u=s.inMaskingState,p=l.uiStyle,f=l.selectedOptions,y=l.maxSelection,h="".concat(c,"_").concat(o),b=this.makeAriaText(t),m=u||t.visible,v=a.a.findWhere(f,e),g=y===f.length&&!v;return d.a.createElement(d.a.Fragment,null,d.a.createElement("label",{className:"lrn-label",htmlFor:h},b,d.a.createElement(E,{index:o,label:e.label,displayType:p.type,choiceLabel:p.choiceLabel,ariaHidden:m,disabled:g})),d.a.createElement(M.a,{hidden:n,onChange:function onChange(e){return i.maskedOptions[o]=e},ariaLabel:e.maskableAriaLabel}))}},{key:"makeAriaText",value:function makeAriaText(e){return d.a.createElement(g.a.ScreenReaderAriaText,{data:e})}},{key:"toggleOptionSelection",value:function toggleOptionSelection(e,t){var n=this.props,i=n.mcqActions,o=n.mcq,r=o.allowsMultipleResponses,s=o.minSelection,l=o.maxSelection,c=o.selectedOptions,u=a.a.findWhere(c,e);l!==c.length||u?(i.selectOption(e,r),r&&s&&this.setState({isMinSelectionWarningVisible:s>c.length}),this.setState({indexToFocus:t,isMaxSelectionWarningVisible:!1})):this.setState({indexToFocus:t,isMaxSelectionWarningVisible:!0})}},{key:"applyFocus",value:function applyFocus(e,t){var n=function getNextFocusableIndex(e,t,n){if(e[t]){var i=[];if(a.a.each(e,(function(e,a){e||(n&&a>t||!n&&a<t)&&i.push(parseInt(a,10))})),n||i.reverse(),!i.length)return!1;t=i[0]}return t}(this.maskedOptions,e,t);if(!1!==n)if(this.focusedIndex=n,this.shouldUpdateOptionOnKeyEvent){var i=this.props.mcq.options[n];this.toggleOptionSelection(i,i.defaultIndex)}else this.setState({indexToFocus:n})}},{key:"componentDidMount",value:function componentDidMount(){var e=this.props,t=e.mcq,n=e.base,i=t.options,o=n.isMath;a.a.each(i,(function(e){e.maskableAriaLabel=T.a.getText(e.label,o)}))}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){var t=e.base,n=e.validatable,i=e.mcq,a=t.isResumeState,o=t.isReviewState,r=t.isAttempted,s=i.minSelection,l=i.selectedOptions;n.validatedResponses&&null!==this.focusedIndex&&(this.focusedIndex=null,this.setState({indexToFocus:null})),(a||o)&&this.setState({isMinSelectionWarningVisible:r&&s>l.length})}},{key:"messageTypeHelper",value:function messageTypeHelper(){var e=this.state,t=e.isMaxSelectionWarningVisible,n=e.isMinSelectionWarningVisible;return t?this.messageType="warning":n&&(this.messageType="info"),this.messageType}},{key:"getWarningMessage",value:function getWarningMessage(){var e=this.state,t=e.isMaxSelectionWarningVisible,n=e.isMinSelectionWarningVisible,i=this.props.mcq,a=i.maxSelection,o=i.minSelection,r=this.props.base.i18n.labels,s=r.minResponseMessage,l=r.minResponsesMessage,c=r.maxResponseMessage,u=r.maxResponsesMessage;return t?a>1?Object(L.a)(u,{maxSelection:a}):c:n?o>1?Object(L.a)(l,{minSelection:o}):s:null}},{key:"render",value:function render(){var e=this.props,t=e.base,n=e.mcq,i=t.responseId,o=t.i18n,r=n.uiStyle,s=n.options,l=this.getValidatableStateClassName(),c=m()({"lrn-ds-message--horizontal-centered":"horizontal-input-bottom"===r.type,"lds-message--horizontal-centered":"horizontal-input-bottom"===r.type},"lrn-ds-message"),u=this.getWarningMessage();return d.a.createElement(v.a.ValidatableQuestion,null,d.a.createElement("div",{role:"group","aria-label":o.labels.ariaLabel.mcq.responses},d.a.createElement("ul",{className:"lrn-response-validate-wrapper lrn_mcqgroup lrn_mcqgroup-".concat(r.type," ").concat(l),"aria-labelledby":"stimulus-".concat(i)},a.a.map(s,this.buildOption))),d.a.createElement("span",{className:"sr-only","aria-live":"assertive"},u),d.a.createElement(I.a,{className:c,type:this.messageTypeHelper(),iconClassMapping:{info:"lrn-icon-info",warning:"lrn-icon-warning"},animation:{enter:q.a,leave:q.b},visibility:null!==u,ariaHidden:!0},u))}},{key:"getValidatableStateClassName",value:function getValidatableStateClassName(){var e=this.props,t=e.base,n=e.validatable;if(!t.isAttempted||!n.canShowGlobalValidationUI)return"";var i=n.validationState;return"correct"===i?"lrn_correct":"incorrect"===i?"lrn_incorrect":""}}]),MCQ}(d.a.Component),N=V=h.b((function(e){return{base:e.base,validatable:e.validatable,mcq:e.mcq}}),(function(e){return{mcqActions:y.b(P,e)}}),null,{forwardRef:!0})(V);function dataService_typeof(e){return(dataService_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dataService_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dataService_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dataService_possibleConstructorReturn(e,t){return!t||"object"!==dataService_typeof(t)&&"function"!=typeof t?function dataService_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dataService_getPrototypeOf(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function dataService_getPrototypeOf(e){return(dataService_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dataService_setPrototypeOf(e,t){return(dataService_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var D,A=function(e){function MCQDataService(){return dataService_classCallCheck(this,MCQDataService),dataService_possibleConstructorReturn(this,dataService_getPrototypeOf(MCQDataService).apply(this,arguments))}return function dataService_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dataService_setPrototypeOf(e,t)}(MCQDataService,e),function dataService_createClass(e,t,n){return t&&dataService_defineProperties(e.prototype,t),n&&dataService_defineProperties(e,n),e}(MCQDataService,[{key:"getInitialState",value:function getInitialState(){var e=_get(dataService_getPrototypeOf(MCQDataService.prototype),"getInitialState",this).call(this),t=e.validatable;return t=a.a.extend(t,{ariaGlobal:{visible:this.isReviewState,label:this.getValidatableAriaLabel()}}),"block"===this.displayType&&this.choiceLabel&&(t.validationStemNumeration=this.choiceLabel),a.a.extend(e,{mcq:{selectedOptions:this.selectedOptions,options:this.options,allowsMultipleResponses:this.allowsMultipleResponses,uiStyle:{choiceLabel:this.choiceLabel,type:this.displayType,orientation:this.orientation,columns:this.columns,inputBelowLabel:"horizontal-input-bottom"===this.displayType},minSelection:this.minSelection,maxSelection:this.maxSelection},validatable:t})}},{key:"getValidatableAriaLabel",value:function getValidatableAriaLabel(){if(this.isReviewState){var e=this.VALIDATION_STATES,t=e.CORRECT,n=e.INCORRECT;return this.isResponseValid()?t:n}}},{key:"getValidatedResponses",value:function getValidatedResponses(){var e=this.getResponse();if(e){var t=e.value||[],n=this.validateResponse(),i=this.options;if(!n)return;return a.a.map(i,(function(e){var i=t.indexOf(e.value);return i>=0?n[i]:null}))}}},{key:"getMappedValidatedResponsesData",value:function getMappedValidatedResponsesData(e){var t=this.options;return a.a.map(e,(function(e,n){return{validatedValue:e,text:t[n].plainText}}))}},{key:"getMappedSuggestedResponsesData",value:function getMappedSuggestedResponsesData(e){var t=[];return a.a.each(e,(function(e){a.a.isUndefined(e)||t.push({text:e.plainText})})),t}},{key:"getSuggestedResponses",value:function getSuggestedResponses(){var e=_get(dataService_getPrototypeOf(MCQDataService.prototype),"getSuggestedResponses",this).call(this),t=this.options;return{value:a.a.map(e.value,(function(e){return a.a.findWhere(t,{value:e})}))}}},{key:"_prepareLabelColumns",value:function _prepareLabelColumns(e,t){for(var n=[],i=e.length,a=0;a<t;a++)for(var o=a;o<i;o+=t)n[o]=e.shift();return n}},{key:"canShowGlobalValidationUI",get:function get(){var e=a.a.getNested(this.question,"validation.scoring_type");return(!e||"exactMatch"===e)&&_get(dataService_getPrototypeOf(MCQDataService.prototype),"canShowGlobalValidationUI",this)}},{key:"selectedOptions",get:function get(){var e=a.a.getNested(this.getResponse(),"value")||[],t=this.options;return a.a.chain(e).map((function(e){return a.a.findWhere(t,{value:e})})).compact().value()}},{key:"options",get:function get(){if(a.a.isUndefined(this.data.options)){var e=this.model.getOrderedOptions(),t=this.orientation,n=this.columns;a.a.each(e,(function(e,t){return e.defaultIndex=t})),n>1&&"vertical"===t&&(e=this._prepareLabelColumns(e,n)),this.data.options=a.a.map(e,(function(e){var t=s.a.sanitizeHTML(e.value),n=s.a.sanitizeHTML(e.label);return{value:t,label:n,plainText:s.a.stripHTML(s.a.createImageDescriptions(n),!0),defaultIndex:e.defaultIndex}}))}return this.data.options}},{key:"choiceLabel",get:function get(){if(a.a.isUndefined(this.data.choiceLabel)){var e=this.question,t=a.a.getNested(e,"ui_style.choice_label");a.a.contains(["number","lower-alpha","upper-alpha"],t)&&(this.data.choiceLabel=t)}return this.data.choiceLabel}},{key:"displayType",get:function get(){return a.a.getNested(this.question,"ui_style.type")||"vertical"}},{key:"allowsMultipleResponses",get:function get(){return!!this.question.multiple_responses}},{key:"orientation",get:function get(){if(a.a.isUndefined(this.data.orientation)){var e=a.a.getNested(this.question,"ui_style.orientation");this.data.orientation=a.a.contains(["horizontal","vertical"],e)?e:"vertical"}return this.data.orientation}},{key:"columns",get:function get(){var e=a.a.getNested(this.question,"ui_style.columns");return parseInt(e,10)}},{key:"minSelection",get:function get(){var e=this.question.min_selection;return e||0}},{key:"maxSelection",get:function get(){var e=this.question.max_selection;return e||1/0}}]),MCQDataService}(n(55).a),j=n(25);function reducer_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=P.actionTypes,F=(reducer_defineProperty(D={},z.MCQ_SELECT_OPTION,(function(e,t){var n=t.option,i=t.allowsMultipleResponses,a=e.selectedOptions;if(i){var o=a.indexOf(n);o>=0?a.splice(o,1):a.push(n)}else a=[n];return{selectedOptions:a}})),reducer_defineProperty(D,z.MCQ_UPDATE_SELECTED_OPTIONS,(function(e,t){return{selectedOptions:t.options}})),D),W=Object(j.a)(F,{selectedOptions:[]}),Q=p.a.extend({maskable:!0,ViewComponent:N,DataService:A,forwardRef:!0,getReducers:function getReducers(){var e=p.a.prototype.getReducers.apply(this,arguments);return a.a.extend(e,{mcq:W})},addFacadeMethods:function addFacadeMethods(e){var t,n=this.getDataService();e.getProcessedOptions=function(){if(a.a.isUndefined(t)){var e=n.options,i=n.choiceLabel;t=a.a.map(e,(function(e,t){return{label:e.label,value:e.value,choice_label:Object(R.a)(i,t)}}))}return t},e.isValid=a.a.wrap(e.isValid,(function(t,i){var o=t.call(e,i);if(o&&i){var r=a.a.getNested(n.getResponse(),"value")||[],s=o.partial;o.partial=a.a.map(n.options,(function(e){var t=r.indexOf(e.value);return s&&t>=0?s[t]:null}))}return o}))}});t.default={View:Q,Model:u}}}]);