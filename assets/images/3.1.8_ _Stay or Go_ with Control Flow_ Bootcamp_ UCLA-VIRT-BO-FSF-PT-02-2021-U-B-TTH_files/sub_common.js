/*! For license information please see sub_common.js.LICENSE.txt */
(window.LearnosityAmd=window.LearnosityAmd||[]).push([[0],Array(131).concat([function(r,a,l){"use strict";l.d(a,"a",(function(){return i18nTemplate}));var O=l(0),S=l.n(O);function i18nTemplate(r,a){return S.a.isEmpty(r)?"":(S()(a).forEach((function(a,l){var O="{{".concat(l,"}}");r=r.replace(O,a)})),r)}},,,,,function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=l(10),T=(l(42),l(34));function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function _classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function _possibleConstructorReturn(r,a){return!a||"object"!==_typeof(a)&&"function"!=typeof a?function _assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r):a}function _getPrototypeOf(r){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function _setPrototypeOf(r,a){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}var j=["exactMatch","partialMatch","partialMatchV2"],D=function isDefaultValidResponseValue(r){return 0===S.a.filter(r,(function(r){return r||0===r})).length},q=function(r){function ClozeScorer(){return _classCallCheck(this,ClozeScorer),_possibleConstructorReturn(this,_getPrototypeOf(ClozeScorer).apply(this,arguments))}return function _inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&_setPrototypeOf(r,a)}(ClozeScorer,r),function _createClass(r,a,l){return a&&_defineProperties(r.prototype,a),l&&_defineProperties(r,l),r}(ClozeScorer,[{key:"reset",value:function reset(r){var a=JSON.stringify(r),l=this.flags||this.cachedFlags;if(this.serializedData!==a){r.question.validation&&r.question.validation.scoring_type||(r=E.a.normalizeParameters(r));var O=getOptions(r.question,l);try{this.scoringData=function getScoringData(r,a){var l=r.question.validation,O=[];if(!function canValidateResponse(r){if(!1===S.a.getNested(r,"validation.automarkable"))return!1;var a=r.validation||r||{};return!S.a.isEmpty(a)&&(S.a.isArray(a.valid_responses)||S.a.isObject(a.valid_response)&&!D(a.valid_response.value))}(r.question))return{automarkable:!1};r.question.equiv_literal_legacy&&(r=E.a.processCompatibility(r));if(r.response=r.response||{},l&&l.scoring_type){if(!S.a.contains(j,l.scoring_type))throw new E.a.InvalidScoringTypeException(r.question.type,l.scoring_type);return l.valid_response&&O.push(l.valid_response),l.alt_responses&&(O=O.concat(l.alt_responses)),function processResponsesCurrentScoringFormat(r,a,l){var O={score:1,penaltyScore:0,rounding:"floor"};return E.a.scoreArray(r,a,O,l)}(r,O,a)}return S.a.isArray(r.question.valid_responses)?function processLegacyResponses1233(r,a){var l,O,T=r.question,j=r.response&&r.response.value||[],D=T.valid_responses,q=[];a=getOptions(T,{stripWhiteSpaceForMath:!0}),S.a.each(j,(function(r,T){var j,B,G=D[T],Z=!1;S.a.each(G,(function(l){l.value&&S.a.isNumber(l.score)&&(E.a.stringCompare(r,l.value,a)?(B=l.score,Z=!0):B=B||0,(S.a.isUndefined(j)||l.score>j)&&(j=l.score))})),l=E.a.addIfDefined(l,B),O=E.a.addIfDefined(O,j),q.push(Z)})),j.length||S.a.each(D,(function(r,a){var l;S.a.each(r,(function(r){S.a.isNumber(r.score)&&(S.a.isUndefined(l)||r.score>l)&&(l=r.score)})),O=E.a.addIfDefined(O,l)}));return{score:l,responsesValid:q,maxScore:O,isValid:q.length?S.a.all(q):void 0}}(r,a):function processLegacyResponsesPre2140(r,a){var l,O=r.question,T=r.response||{};O.validation=O.validation||{};var j,D,q=O.validation.valid_responses,B=T.value||[],G=Math.abs(S.a.isNumber(O.validation.penalty_score)?O.validation.penalty_score:0),Z=function getResponseScoreArray(r){var a,l=parseFloat(r.validation.valid_score),O=r.validation.valid_responses,E=[];if(l=isNaN(l)?1:l,S.a.isArray(r.validation.valid_score))E=r.validation.valid_score;else for(var T=0;T<O.length;T++){a=[];for(var j=0;j<O[T].length;j++)a.push(l);E.push(a)}return E}(O),$=[],Q=0;S.a.each(B,(function(r,O){var T=q[O],D=0,B=!1;if(!S.a.isUndefined(r)&&null!==r&&""!==r&&S.a.isArray(T))for(var Q=0;Q<T.length;Q++){if(E.a.stringCompare(r,T[Q],a)){D=Z[O][Q],l=T,B=!0;break}D=-1*G}$.push(B),j=(S.a.isUndefined(j)?0:j)+D})),S.a.each(Z,(function(r){Q+=S.a.max(r)})),B.length&&!1===O.validation.partial_scoring&&j!==Q&&(j=0);B.length&&$.length&&(D=!1===O.validation.partial_scoring?S.a.all($):S.a.any($));return{score:j,responsesValid:$,suggestedResponse:l,maxScore:Q,isValid:D}}(r,a)}(r,O),E.a.normalizeScores(this.scoringData,r)}catch(r){this.scoringData={error:r}}this.serializedData=a}return this.cachedFlags=l,this}},{key:"flags",get:function get(){}}]),ClozeScorer}(T.a);function getOptions(r,a){var l={caseSensitive:!!r.case_sensitive,removeWhitespace:!!r.is_math&&a.stripWhiteSpaceForMath,matchAllPossibleResponses:!(!r.validation||!r.validation.match_all_possible_responses)};return delete a.stripWhiteSpaceForMath,S.a.extend(a,l)}a.a=q},,,,function(r,a){r.exports=function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}},function(r,a,l){r.exports=l(543)},,function(r,a,l){"use strict";l.d(a,"a",(function(){return O})),l.d(a,"e",(function(){return S})),l.d(a,"d",(function(){return E})),l.d(a,"c",(function(){return T})),l.d(a,"b",(function(){return j})),l.d(a,"f",(function(){return D}));var O={bold:{type:"button",icon:"lrn-icon-bold",command:"bold"},italic:{type:"button",icon:"lrn-icon-italic",command:"italic"},underline:{type:"button",icon:"lrn-icon-underline",command:"underline"},orderedList:{type:"button",icon:"lrn-icon-list-numbered",command:"insertOrderedList"},unorderedList:{type:"button",icon:"lrn-icon-list-bulleted",command:"insertUnorderedList"},removeFormat:{type:"button",icon:"lrn-icon-remove-format",command:"removeFormat"},alignLeft:{type:"button",icon:"lrn-icon-align-left",command:"alignLeftStyle"},alignCenter:{type:"button",icon:"lrn-icon-align-center",command:"alignCenterStyle"},alignRight:{type:"button",icon:"lrn-icon-align-right",command:"alignRightStyle"},alignJustify:{type:"button",icon:"lrn-icon-align-justify",command:"alignJustifyStyle"},superscript:{type:"button",icon:"lrn-icon-superscript",command:"superscript"},subscript:{type:"button",icon:"lrn-icon-subscript",command:"subscript"},insertHorizontalRule:{type:"button",icon:"lrn-icon-hr",command:"insertHorizontalRule"},indentIncrease:{type:"button",icon:"lrn-icon-indent-increase",command:"increaseIndent"},indentDecrease:{type:"button",icon:"lrn-icon-indent-decrease",command:"decreaseIndent"},textDirectionLtr:{type:"button",icon:"lrn-icon-text-direction-ltr",command:"textDirectionLtr"},textDirectionRtl:{type:"button",icon:"lrn-icon-text-direction-rtl",command:"textDirectionRtl"},blockquote:{type:"button",icon:"lrn-icon-blockquote",command:"insertBlockQuote"},table:{type:"createTable",icon:"lrn-icon-table"},editTable:{type:"editTable",icon:"lrn-icon-edit-table"},image:{type:"insertImage",icon:"lrn-icon-image",icons:{edit:"lrn-icon-image-edit",preview:"lrn-icon-image-preview",delete:"lrn-icon-image-delete"}},undo:{type:"button",icon:"lrn-icon-undo",command:"undo"},redo:{type:"button",icon:"lrn-icon-redo",command:"redo"},charactermap:{type:"charactermap"},characterMathMap:{type:"characterMathMap"},"|":{type:"divider"},formulaEditor:{type:"formulaEditor",icon:"lrn-icon-formula"}},S=12,E={SMALL:"small",MEDIUM:"medium",LARGE:"large",FULL_SIZE:"fullSize"},T={SMALL:200,MEDIUM:525,LARGE:1024,FULL_SIZE:3024},j={CREATE_FORMULA:"createFormula",EDIT_FORMULA:"editFormula"},D={FORMULA_EDITOR:"editFormula"}},,,,,,,,,function(r,a,l){"use strict";var O=l(125),S=l.n(O);function Icon(r){var a=r.icon;return a?S.a.createElement("span",{className:"lrn_icon  ".concat(a),"aria-hidden":"true"}):null}function ScreenReader(r){var a=r.label;return a?S.a.createElement("span",{className:"sr-only"},"  ",a):null}a.a={Divider:function Divider(){return S.a.createElement("div",{className:"lrn-divider"})},Button:function Button(r){var a=r.disabled,l=r.isActive,O=r.name,E=r.icon,T=r.label,j=r.activeClassName,D=r.children,q=r.getRef,B=r.onMouseEnter,G=r.onMouseLeave,Z=r.onMouseDown,$=r.onClick,Q=r.tabIndex,ee="lrn_btn  lrn-editor-toolbar-button-".concat(O,"  ").concat(l?j:"","  ").concat(r.className||"");return S.a.createElement("button",{ref:function ref(r){return q&&q(r)},type:"button",className:ee,"aria-label":T,"aria-pressed":"false",disabled:a,onMouseEnter:function onMouseEnter(){return B(T)},onMouseLeave:G,onMouseDown:function mouseDownHandler(r){Z&&Z(),r.preventDefault()},onClick:function clickHandler(r){$&&$(),r.preventDefault()},tabIndex:Q},S.a.createElement(Icon,{icon:E}),S.a.createElement(ScreenReader,{label:T}),D)}}},function(r,a,l){"use strict";var O=l(125),S=l.n(O),E=l(185);l(187);a.a=function Modal(r){var a=r.afterRender,l=r.children,O=r.title,T=r.parentNode,j=r.modalIsOpen,D=r.onRequestClose,q=r.preventFocusWhenAppear,B="lrn-wysihtml-modal  ".concat(r.className||"");return S.a.createElement(E.a,{afterRender:a,preventFocusWhenAppear:q,isOpen:j,parentNode:T,className:"lrn-wysihtml-floating-modal",onRequestClose:D,shouldUpdatePosition:!1},S.a.createElement("div",{className:B,style:{opacity:1}},S.a.createElement("div",{className:"lrn-wysihtml-modal-dialog",role:"dialog",style:{opacity:1}},S.a.createElement("div",{className:"lrn-wysihtml-modal-title"},O),S.a.createElement("div",{className:"lrn-wysihtml-modal-content"},l),S.a.createElement("button",{type:"button",className:"lrn_btn lrn_btn_close",title:"Close","data-lrn-action":"close",onClick:D},S.a.createElement("span",{className:"sr-only"},"Close")))))}},,,,,,,,,function(r,a,l){"use strict";var O=l(5),S=l.n(O),E=l(0),T=l.n(E),j=l(50),D=["toggle"],q=["Left","Right","Backspace","÷","×","-","+","="];switch(j.a.getOs()){case"osx":D=["shift","opt"];break;case"windows":case"unix":case"linux":D=["shift","alt"]}var B=S.a.Model.extend({keysForToggle:D,keyForCtrlToggle:"ctrl",ariaHiddenSymbols:q,defaults:{type:"write"},initialize:function initialize(){this.createDisplayableShortcut(),this.on("change:shortcut",this.createDisplayableShortcut,this)},createDisplayableShortcut:function createDisplayableShortcut(){var r=T.a.clone(this.get("shortcut"));"toggle"===T.a.first(r)&&(r=T.a.union(this.keysForToggle,T.a.rest(r,1))),"ctrl"===T.a.first(r)&&(r=T.a.union(["ctrl"],T.a.rest(r))),r&&r[0]===this.get("title")&&(r=[]),this.set("displayableShortcut",r)},renderLabelAsLatex:function renderLabelAsLatex(){var r=this.get("label_latex");return T.a.isBoolean(r)?r:this.get("label").indexOf("\\")>-1},isPlaceholder:function isPlaceholder(){return""===this.get("id")},isFunctional:function isFunctional(){return!("addmatrixcol"===this.get("name")||"addmatrixrow"===this.get("name"))&&"keystroke"===this.get("type")},hasOwnStyle:function hasOwnStyle(){return!!this.get("style")},isAria:function isAria(r){return T.a.contains(q,r)}});a.a=S.a.Collection.extend({model:B,get:function get(r){return S.a.Collection.prototype.get.apply(this,arguments)||this.find((function(a){return T.a.contains(a.get("aliases"),r)}))},add:function add(r){this.isUnique(r)&&S.a.Collection.prototype.add.apply(this,arguments)},isUnique:function isUnique(r){var a=r.aliases&&T.a.union(r.aliases,r.id)||[];return!this.any((function(l){return r.id===l.id||T.a.intersection(a,l.get("aliases")).length}))},getShortcutsMap:function getShortcutsMap(){var r={};return this.each((function(a){var l=a.get("shortcut");"toggle"===T.a.first(l)&&(r[l[1]]=a)})),r},getGroups:function getGroups(){var r=T.a.unique(this.pluck("group")),a=this;return T.a.map(r,(function(r){return a.where({group:r})}))},getFirstInEachGroup:function getFirstInEachGroup(){return T.a.map(this.getGroups(),T.a.first)}})},,,,,function(r,a,l){"use strict";l.d(a,"a",(function(){return D}));var O=l(0),S=l.n(O),E=l(3),T=l(13);function _classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}var j="spokenmathWorker";var D=new(function(){function SingletonWorker(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,SingletonWorker),this._loading=!1,this._collections=[],this._resolveCollections=this._resolveCollections.bind(this),this.getPostMessage=a.getPostMessage.bind(this),this.processReceivedMessage=a.processReceivedMessage.bind(this)}return function _createClass(r,a,l){return a&&_defineProperties(r.prototype,a),l&&_defineProperties(r,l),r}(SingletonWorker,[{key:"process",value:function process(r){var a=this,l=this._collections;return new E.default((function(O){l.push({data:r,resolve:O}),a._loading||a._loadWorker()}))}},{key:"_loadWorker",value:function _loadWorker(){var r=this;this._loading=!0,function loadWorker(r){return new E.default((function(a){T.a.getExposedExternalBundle(r)().then((function(r){a(r)}))}))}(j).then((function(a){var l=new a,O=r._collections,E=S.a.pluck(O,"data");l.postMessage(r.getPostMessage(E)),l.addEventListener("message",(function(a){var S=a.data;l.terminate(),r._loading=!1,r._resolveCollections(r.processReceivedMessage(S)),O.length&&r._loadWorker()}))}))}},{key:"_resolveCollections",value:function _resolveCollections(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=this._collections;r.length&&a.length;){var l=a.shift(),O=l.resolve;O(r.shift())}}}]),SingletonWorker}())(j,{getPostMessage:function getPostMessage(r){return{latexes:r}},processReceivedMessage:function processReceivedMessage(r){return r.value}})},,,,,function(r,a,l){"use strict";var O=l(1),S=l.n(O),E=l(0),T=l.n(E),j=function ScaleCompensator(r,a){var l=this;this.id=T.a.uniqueId("lrn_scale_compensator_"),this.$el=r,this.opts=a,this.scale=T.a.debounce((function(){var r=T.a.bind(l.scaleAndPosition,l);window.requestAnimationFrame?window.requestAnimationFrame(r):r()}),a.debounceTime)};T.a.extend(j.prototype,{start:function start(r){return S()(window).on("resize."+this.id+" orientationchange."+this.id+" scroll."+this.id,this.scale),this},stop:function stop(){S()(window).off("."+this.id)},scaleAndPosition:function scaleAndPosition(){var r=document.documentElement.clientWidth,a=document.documentElement.clientHeight,l=window.innerWidth,O=window.innerHeight,S=l/r,E="scale("+S+") translateX("+window.pageXOffset/S+"px) translateY("+-(a-(window.pageYOffset+O))/S+"px)";S>.99?(this.$el.removeClass("lrn_scalable"),E=""):this.$el.addClass("lrn_scalable"),this.setTransform(E),this.opts.onUpdate(S)},setTransform:function setTransform(r){return this.$el.css({transform:r,"-moz-transform":r,"-o-transform":r,"-webkit-transform":r,"-ms-transform":r}),this},destroy:function destroy(){this.stop(),this.setTransform("").$el.removeClass("lrn_scalable"),this.$el=this.opts=null}}),a.a=j},function(r,a,l){"use strict";var O=l(5),S=l.n(O),E=l(125),T=l.n(E),j=l(128),D=l.n(j),q=l(157);function _extends(){return(_extends=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&(r[O]=l[O])}return r}).apply(this,arguments)}function _classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function _defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var B=function(){function CustomDropdown(r,a){var l=this,O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,CustomDropdown),_defineProperty(this,"on",S.a.Events.on),_defineProperty(this,"once",S.a.Events.once),_defineProperty(this,"off",S.a.Events.off),_defineProperty(this,"trigger",S.a.Events.trigger),_defineProperty(this,"_selectedIndex",-1),_defineProperty(this,"_value",null),_defineProperty(this,"_onChange",(function(r){var a=r.index,O=r.value;l._selectedIndex=a,l._value=O,l.trigger("change",{value:O,selectedIndex:a})})),_defineProperty(this,"_onBlur",(function(){l.trigger("blur")})),_defineProperty(this,"_onUpdateComplete",(function(){l.trigger("updateComplete")})),this.el=r,this.menuOptions=a,this.options=O,this._render()}return function _createClass(r,a,l){return a&&_defineProperties(r.prototype,a),l&&_defineProperties(r,l),r}(CustomDropdown,[{key:"open",value:function open(r){this.component.open(r)}},{key:"close",value:function close(){this.component.close()}},{key:"isOpen",value:function isOpen(){return this.component.isOpen()}},{key:"_render",value:function _render(){var r=this.menuOptions,a=this.options;this.component=D.a.render(T.a.createElement(q.a,_extends({},a,{containerClass:"lrn_theme_primary",menuOptions:r,onChange:this._onChange,onBlur:this._onBlur,updateComplete:this._onUpdateComplete,selectedIndex:this.selectedIndex})),this.el)}},{key:"selectedIndex",get:function get(){return this._selectedIndex},set:function set(r){this._selectedIndex=r,this.component.setSelectedIndex(r)}},{key:"value",get:function get(){return this._value}}]),CustomDropdown}();a.a=B},,,,,,,,,,,,,,,function(r,a,l){r.exports=l(549)},function(r,a,l){r.exports=l(596)},,,,,,,,,,function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=l(18),T={jpg:{jpg:"image/jpeg",jpeg:"image/jpeg"},png:"image/png",gif:"image/gif",pdf:"application/pdf",csv:"text/csv",rtf:"application/rtf",txt:"text/plain",xps:"application/vnd.ms-xpsdocument",ms_word:{doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroenabled.12",dotm:"application/vnd.ms-word.template.macroenabled.12"},ms_excel:{xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12"},ms_powerpoint:{ppt:"application/vnd.ms-powerpoint",pps:"application/vnd.ms-powerpoint",pot:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",pptm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",potm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppsm:"application/vnd.ms-powerpoint.slideshow.macroenabled.12"},ms_publisher:{pub:"application/vnd.ms-publisher"},open_office:{odf:"application/vnd.oasis.opendocument.formula",odt:"application/vnd.oasis.opendocument.text",ods:"application/vnd.oasis.opendocument.spreadsheet",odp:"application/vnd.oasis.opendocument.presentation"},video:{mp4:"video/mp4",mov:"video/quicktime",webm:"video/webm",avi:"video/avi",asf:"video/x-ms-asf",wmv:"video/x-ms-wmv"},zip:"application/zip",matlab:{m:"text/plain",fig:"application/octet-stream",mat:"application/octet-stream"},altera_quartus:{bdf:"text/plain",bsf:"text/plain"},verilog:{sv:"text/plain"},c:"text/plain",h:"text/plain",s:"text/plain",v:"text/plain",cpp:"text/plain",assembly:{asm:"text/plain"}},j={createBasePath:function createBasePath(r){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=new Date(r.get("security").getTimestamp()),O=l.getUTCFullYear(),S=new Date(Date.UTC(O,0,1)),E=Math.ceil((l-S)/864e5),T=r.get("consumer"),j=T.get("id"),D=r.get("user_id"),q=a?"userupload/":"";return"".concat(q).concat(j,"/questionresponse/").concat(O,"/").concat(E,"/").concat(j,"_").concat(D)},createFullPath:function createFullPath(r,a,l,O){var S=this.createBasePath(r,O),T=E.a.v4(),j=this.getValidExtension(l);return"".concat(S,"_").concat(a,"/").concat(T,".").concat(j)},getValidExtension:function getValidExtension(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=this.getFlattenedExtensions(),l=r.lastIndexOf(".")+1,O=l>0?r.slice(l).toLowerCase():"";return a[O]?O:""},getFlattenedExtensions:function getFlattenedExtensions(){var r={};return S.a.mapObject(T,(function buildExtensionMime(a,l){S.a.isString(a)?r[l]=a:S.a.isObject(a)&&S.a.mapObject(a,buildExtensionMime)})),r},getExtensions:function getExtensions(r){var a=T[r],l=[];return S.a.isString(a)?l.push(r):S.a.isObject(a)&&(l=S.a.keys(a)),l},getMimeTypeByExtension:function getMimeTypeByExtension(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=this.getFlattenedExtensions(),l=a[r.toLowerCase()];return l||""}};a.a=j},function(r,a,l){"use strict";var O=l(220),S=l(546).f,E=l(548),T=l(278),j=l(497),D=l(256),q=l(241),wrapConstructor=function(r){var Wrapper=function(a,l,O){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(a);case 2:return new r(a,l)}return new r(a,l,O)}return r.apply(this,arguments)};return Wrapper.prototype=r.prototype,Wrapper};r.exports=function(r,a){var l,B,G,Z,$,Q,ee,te,ne=r.target,re=r.global,oe=r.stat,ie=r.proto,ae=re?O:oe?O[ne]:(O[ne]||{}).prototype,se=re?T:T[ne]||(T[ne]={}),le=se.prototype;for(G in a)l=!E(re?G:ne+(oe?".":"#")+G,r.forced)&&ae&&q(ae,G),$=se[G],l&&(Q=r.noTargetGet?(te=S(ae,G))&&te.value:ae[G]),Z=l&&Q?Q:a[G],l&&typeof $==typeof Z||(ee=r.bind&&l?j(Z,O):r.wrap&&l?wrapConstructor(Z):ie&&"function"==typeof Z?j(Function.call,Z):Z,(r.sham||Z&&Z.sham||$&&$.sham)&&D(ee,"sham",!0),se[G]=ee,ie&&(q(T,B=ne+"Prototype")||D(T,B,{}),T[B][G]=Z,r.real&&le&&!le[G]&&D(le,G,Z)))}},function(r,a,l){var O=l(220),S=l(500),E=l(241),T=l(502),j=l(503),D=l(554),q=S("wks"),B=O.Symbol,G=D?B:B&&B.withoutSetter||T;r.exports=function(r){return E(q,r)||(j&&E(B,r)?q[r]=B[r]:q[r]=G("Symbol."+r)),q[r]}},,function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=l(178);a.a=function getOrderedListBasedOnQuestion(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0;if(!a.shuffle_options)return S.a.deepClone(r);if(!S.a.isString(l))throw new Error("getOrderedListBasedOnQuestion requires a seed");return Object(E.a)({seed:l,exclusions:r,questionMetadata:a.metadata,originalOrder:r})}},,,function(r,a,l){"use strict";l.d(a,"d",(function(){return getSpellCheckValue})),l.d(a,"a",(function(){return getAutoCapitalizeValue})),l.d(a,"b",(function(){return getAutoCompleteValue})),l.d(a,"c",(function(){return getAutoCorrectValue}));var O=l(0),S=l.n(O);function getSpellCheckValue(r){return S.a.isBoolean(r)?r:!!S.a.isString(r)&&"true"===r}function getAutoCapitalizeValue(r){return defaultCheck(r)}function getAutoCompleteValue(r){return defaultCheck(r)}function getAutoCorrectValue(r){return defaultCheck(r)}function defaultCheck(r){return S.a.isString(r)?"true"===r?"on":"off":S.a.isBoolean(r)&&r?"on":"off"}},function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=l(5),T=l.n(E),j=l(209),D=(l(3),l(9),l(6)),q=l(199),B="".concat(D.a.apiHost,"/asset/view"),G="".concat(D.a.apiHost,"/asset/viewProcessed"),Z={uploading:"uploading",failed:"failed",complete:"complete"};a.a=T.a.Model.extend({UPLOAD_STATUS:Z,initialize:function initialize(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=r.file,O=a.eventBus,E=a.activity,T=a.securityObject,j=a.hasVideoSupport,D=a.hasVideoRecordingSupport,q=a.assetExtension,B=a.assetMimeType,G=a.assetPath,$=a.responseId;if(this.options=a,this.eventBus=O,this.activity=E,this.securityToken=this._uriEncodeObject(T),this.responseId=$,this.hasVideoSupport=j,this.hasVideoRecordingSupport=D,this.set("id",S.a.uniqueId()),!S.a.isUndefined(l)&&this.validateFile(l)){if(this.file=l,this.set({name:l.name,originalName:l.name,extension:q,size:l.size,mimetype:B||l.type,status:Z.uploading,hasUploaded:this.hasUploaded(),description:"",hasFailed:!1,hasNotifiedFailure:!0,assetPath:G}),(D||j)&&this.isVideoFile()){var Q=G.substr(0,G.lastIndexOf(".")),ee=this.get("name").substr(0,this.get("name").lastIndexOf("."));this.set({assetProcessedPath:"".concat(Q,".").concat("mp4"),extension:"mp4",name:"".concat(ee,".").concat("mp4")})}this.uploadAndHandle()}else this.set({status:Z.complete,hasUploaded:!0});this.set("colorClass",this.getIconColorClass(this.get("extension")))},validateFile:function validateFile(r){return r instanceof File||r instanceof Blob&&!!r.name},hasUploaded:function hasUploaded(){return this.get("status")===Z.complete},upload:function upload(){return j.a.upload({file:this.file,activity:this.activity,responseId:this.responseId,extension:this.get("extension"),mimeType:this.get("mimetype"),assetPath:this.get("assetPath"),assetProcessedPath:this.get("assetProcessedPath"),hasVideoSupport:this.hasVideoSupport})},uploadAndHandle:function uploadAndHandle(){var r=this;return this.upload().then((function(){r.handleUploadSuccess()})).catch((function(){r.handleUploadFail()}))},abortUpload:function abortUpload(){j.a.abort(this.get("assetPath"))},isSubmitPractice:function isSubmitPractice(){return this.options.activity.get("type")===this.activity.TYPE.SUBMIT_PRACTICE},isVideoFile:function isVideoFile(){var r=q.a.getExtensions("video"),a=this.get("extension");return S.a.contains(r,a)},handleUploadSuccess:function handleUploadSuccess(){var r=this.options.onUploadSuccess;this.set({status:Z.complete,hasUploaded:!0,hasNotifiedFailure:!0}),S.a.isUndefined(this.eventBus)||this.eventBus.trigger("fileUploaded",this),r&&r()},handleUploadFail:function handleUploadFail(){var r=this.options.onUploadError;this.set({status:Z.failed,hasFailed:!0,hasNotifiedFailure:!1}),S.a.isUndefined(this.eventBus)||this.eventBus.trigger("fileUploadFailed",this),r&&r()},getViewUrl:function getViewUrl(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a={assetPath:this.get("assetPath")},l=B;this.get("assetProcessedPath")&&(a.assetProcessedPath=this.get("assetProcessedPath"),a.assetOriginalName=this.get("originalName"),l=G),r&&(a.assetName=this.get("name"));var O=this._uriEncodeObject(a);return"".concat(l,"?action=get&security=").concat(this.securityToken,"&usrequest=").concat(O)},retryUpload:function retryUpload(){this.get("hasFailed")&&(this.set({hasFailed:!1,status:Z.uploading}),this.uploadAndHandle())},clearFailNotification:function clearFailNotification(){this.set("hasNotifiedFailure",!0)},getIconColorClass:function getIconColorClass(r){var a="default";switch(r){case"png":case"gif":case"pdf":case"csv":case"rtf":case"txt":case"xps":a=r;break;case"jpg":case"jpeg":a="jpg";break;case"doc":case"docx":case"dot":case"dotx":case"docm":case"dotm":a="word";break;case"xls":case"xlsx":case"xlt":case"xltm":case"xlsm":a="excel";break;case"ppt":case"pps":case"pot":case"pptx":case"pptm":case"potx":case"potm":case"ppsx":case"ppsm":a="powerpoint";break;case"pub":a="publisher";break;case"odf":case"odt":case"ods":case"odp":a="open-office";break;case"mp4":case"mov":case"avi":a="video"}return"".concat("lrn-file-").concat(a)},updateDescription:function updateDescription(r){this.set({description:r})},_uriEncodeObject:function _uriEncodeObject(r){return encodeURIComponent(JSON.stringify(r))}})},,function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=(l(254),l(3)),T=(l(18),l(9));function _defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}var j=function(){function S3(){var r=this;!function _classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,S3),this.promise=new E.default((function(a,l){r.resolve=a,r.reject=l}))}return function _createClass(r,a,l){return a&&_defineProperties(r.prototype,a),l&&_defineProperties(r,l),r}(S3,[{key:"request",value:function request(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.send(r),this.promise}},{key:"handleSuccess",value:function handleSuccess(r){r.target.status<400?this.resolve(r):this.handleFailure(r)}},{key:"handleFailure",value:function handleFailure(r){this.reject(r.target.status)}},{key:"send",value:function send(){var r=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=new FormData,O=a.data.data.file,E="".concat(a.data.data.name,".").concat(a.data.data.extension),T=new XMLHttpRequest,j=O.slice(0,O.size,O.type),D=0;S.a.each(a.formInputs,(function(r,a){l.append(a,r)})),l.append("file",j,E),T.addEventListener("load",(function(a){r.handleSuccess(a)})),T.addEventListener("error",(function(a){r.handleFailure(a)})),T.upload.addEventListener("progress",(function(r){D=r.loaded})),T.open(a.formAttributes.method,a.formAttributes.action),T.send(l),a.onSendStart&&a.onSendStart({abort:function abort(){return T.abort()},getUploadedBytes:function getUploadedBytes(){return D}})}}]),S3}(),D=l(7),q=(D.a.isMicrosoft,[]),B=[],G=!1,Z=[],$={MAX_ATTEMPTS:3,RETRY_DELAY:8e3,upload:function upload(){var r=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.validate(a);var l=a.activity,O=a.extension,S=a.file,T=a.assetPath,j=a.mimeType,D=l.get("security"),q={extension:O,file:S,assetPath:T,mimeType:j};return new E.default((function(a,l){var O={security:D.getRequestParameters(),data:q,success:function success(){r.removeFromQueue(O),r.resumeQueue(),a(q)},failure:function failure(a){r.removeFromQueue(O),r.resumeQueue(),l(a)}};r.addToQueue(O)}))},validate:function validate(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!r.file)throw new Error("FileUpload missing file");if(!S.a.isObject(r.activity))throw new Error("FileUpload missing activity");if(!S.a.isString(r.responseId))throw new Error("FileUpload missing responseId");if(!S.a.isString(r.extension))throw new Error("FileUpload missing file extension")},addToQueue:function addToQueue(r){if(this.getQueueItem(r.data.assetPath))throw new Error("Attempting to add duplicate assetPath to upload queue: ".concat(r.data.assetPath));Z.push({config:r,isProcessing:!1,attempts:0}),this.processQueue()},abort:function abort(r){var a=this.getQueueItem(r);if(a){var l=a.config.s3Upload;l&&l.abort(),this.removeFromQueue(a),a.isProcessing&&this.resumeQueue()}},removeFromQueue:function removeFromQueue(r){clearTimeout(r.retryTimeoutId),Z=S.a.filter(Z,(function(a){return r.data.assetPath!==a.config.data.assetPath}))},resumeQueue:function resumeQueue(){G=!1,this.processQueue()},processQueue:function processQueue(){if(!G){var r=S()(Z).find((function(r){return!r.isProcessing}));r&&this.processQueueItem(r)}},processQueueItem:function processQueueItem(r){var a=this,l=r.config,O=l.data,E=O.assetPath,j=O.mimeType;S.a.contains(Z,r)&&(G=!0,r.isProcessing=!0,r.attempts++,T.a.request({url:"/asset/uploadform",security:l.security,action:T.a.ACTION.GET,data:{assetPath:E,mimeType:j},success:function success(l){a.handleTokenSuccess(r,l)},failure:function failure(){a.handleFailure(r)}}))},handleTokenSuccess:function handleTokenSuccess(r,a){var l=this,O=r.config;if(S.a.contains(Z,r)){var E=new j;S.a.getNested(a,"response.data")?E.request({formAttributes:a.response.data.formAttributes,formInputs:a.response.data.formInputs,data:O,onSendStart:function onSendStart(r){O.s3Upload=r}}).then((function(){O.success()})).catch((function(){l.handleFailure(r)})):this.handleFailure(r)}},handleFailure:function handleFailure(r){var a=this;r.attempts<this.MAX_ATTEMPTS?(clearTimeout(r.retryTimeoutId),r.retryTimeoutId=setTimeout((function(){return a.processQueueItem(r)}),this.RETRY_DELAY)):r.config.failure.call(null,"Could not upload after ".concat(this.MAX_ATTEMPTS," attempts"))},isSafeToUnload:function isSafeToUnload(){var r=S.a.find(Z,(function(r){return r.isProcessing}));return!G&&!r},isAssetPathInQueue:function isAssetPathInQueue(r){return S.a.some(Z,(function(a){return a.config.data.assetPath===r}))},getQueueItem:function getQueueItem(r){return S()(Z).find((function(a){return r===a.config.data.assetPath}))},getUploadStatus:function getUploadStatus(){var r=0,a=0;return S.a.each(B,(function(l){l.each((function(l){a+=l.get("size"),l.get("hasUploaded")&&(r+=l.get("size"))}))})),Z.forEach((function(a){var l=a.config.s3Upload;l&&(r+=l.getUploadedBytes())})),{uploadComplete:this.isSafeToUnload(),totalBytes:a,bytesUploaded:r}},hookToActivity:function hookToActivity(r,a){S.a.contains(B,a)||B.push(a),S.a.isEmpty(r)||S.a.contains(q,r)||(r.hooks.unload.push(this.isSafeToUnload),r.hooks.saveProgress.push(S.a.bind(this.getUploadStatus,this)),q.push(r))}};a.a=$},,,,function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=["syntax","argument"],T=["stringMatch"];String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),a.a={processSpec:function processSpec(r){var a,l,O;if(S.a.isObject(r)&&"equivSyntax"===r.method)return S.a.isObject(r.options)&&S.a.isString(r.options.syntax)&&""!==r.options.syntax||!r.value?("\\number",O={method:"equivSyntax",value:""},l=r.options.syntax||"\\number",O.value="\\format{"+l,S.a.isNumber(r.options.argument)&&(O.value+="{"+r.options.argument+"}"),O.value+="}",S.a.isBoolean(r.options.ignoreText)&&(O.options={ignoreText:r.options.ignoreText}),O):r;for(a=0;a<E.length;a++)S.a.isObject(r.options)&&!S.a.isUndefined(r.options[E[a]])&&delete r.options[E[a]];return r},useMathCore:function useMathCore(r){return!(S.a.isObject(r)&&-1!==S.a.indexOf(T,r.method))},validate:function validate(r,a){var l,O,E,T,j,D={errorCode:0,location:void 0,message:"Normal completion",result:!1};return S.a.isObject(r)&&S.a.isString(a)&&"stringMatch"===r.method&&S.a.isString(r.value)&&(l=r.value.replace(/\\\s/g," "),O=a.replace(/\\\s/g," "),T=!S.a.isObject(r.options)||S.a.isObject(r.options)&&!1!==r.options.ignoreLeadingAndTrailingSpaces,j=!S.a.isObject(r.options)||S.a.isObject(r.options)&&!1!==r.options.treatMultipleSpacesAsOne,E=S.a.isObject(r.options)&&!0===r.options.inverseResult,T&&(l=l.trim(),O=O.trim()),j&&(l=l.replace(/\s+/g," "),O=O.replace(/\s+/g," ")),D.result=l===O,E&&(D.result=!D.result)),D}}},function(r,a,l){"use strict";l.d(a,"a",(function(){return applySelectiveFontBoost}));var O=l(245),S=l.n(O);function applySelectiveFontBoost(r,a){r&&!a&&S.a.isWindows&&[].slice.call(r.querySelectorAll(".mq-math-mode span")).filter((function(r){return"−"===r.textContent})).forEach((function(r){r.style.fontSize="120%"}))}},function(r,a,l){"use strict";l(5);var O=l(0),S=l.n(O),E=l(17),T=l.n(E),j=l(51),D=l(244),q=l.n(D),B=l(136);function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function _classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function _possibleConstructorReturn(r,a){return!a||"object"!==_typeof(a)&&"function"!=typeof a?function _assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r):a}function _getPrototypeOf(r){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function _setPrototypeOf(r,a){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}var G=function(r){function ClozeAssociationScorer(){return _classCallCheck(this,ClozeAssociationScorer),_possibleConstructorReturn(this,_getPrototypeOf(ClozeAssociationScorer).apply(this,arguments))}return function _inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&_setPrototypeOf(r,a)}(ClozeAssociationScorer,r),function _createClass(r,a,l){return a&&_defineProperties(r.prototype,a),l&&_defineProperties(r,l),r}(ClozeAssociationScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1}}}]),ClozeAssociationScorer}(B.a);function clozeinlinetext_scoring_typeof(r){return(clozeinlinetext_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function clozeinlinetext_scoring_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function clozeinlinetext_scoring_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function clozeinlinetext_scoring_possibleConstructorReturn(r,a){return!a||"object"!==clozeinlinetext_scoring_typeof(a)&&"function"!=typeof a?function clozeinlinetext_scoring_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r):a}function clozeinlinetext_scoring_getPrototypeOf(r){return(clozeinlinetext_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function clozeinlinetext_scoring_setPrototypeOf(r,a){return(clozeinlinetext_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}var Z=function(r){function ClozeInlinetextScorer(){return clozeinlinetext_scoring_classCallCheck(this,ClozeInlinetextScorer),clozeinlinetext_scoring_possibleConstructorReturn(this,clozeinlinetext_scoring_getPrototypeOf(ClozeInlinetextScorer).apply(this,arguments))}return function clozeinlinetext_scoring_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&clozeinlinetext_scoring_setPrototypeOf(r,a)}(ClozeInlinetextScorer,r),function clozeinlinetext_scoring_createClass(r,a,l){return a&&clozeinlinetext_scoring_defineProperties(r.prototype,a),l&&clozeinlinetext_scoring_defineProperties(r,l),r}(ClozeInlinetextScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!0}}}]),ClozeInlinetextScorer}(B.a);function clozedropdown_scoring_typeof(r){return(clozedropdown_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function clozedropdown_scoring_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function clozedropdown_scoring_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function clozedropdown_scoring_possibleConstructorReturn(r,a){return!a||"object"!==clozedropdown_scoring_typeof(a)&&"function"!=typeof a?function clozedropdown_scoring_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r):a}function clozedropdown_scoring_getPrototypeOf(r){return(clozedropdown_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function clozedropdown_scoring_setPrototypeOf(r,a){return(clozedropdown_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}var $=function(r){function ClozeDropdownScorer(){return clozedropdown_scoring_classCallCheck(this,ClozeDropdownScorer),clozedropdown_scoring_possibleConstructorReturn(this,clozedropdown_scoring_getPrototypeOf(ClozeDropdownScorer).apply(this,arguments))}return function clozedropdown_scoring_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&clozedropdown_scoring_setPrototypeOf(r,a)}(ClozeDropdownScorer,r),function clozedropdown_scoring_createClass(r,a,l){return a&&clozedropdown_scoring_defineProperties(r.prototype,a),l&&clozedropdown_scoring_defineProperties(r,l),r}(ClozeDropdownScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1,strictEquality:!0,trimWhiteSpace:!0}}}]),ClozeDropdownScorer}(B.a);function clozetext_scoring_typeof(r){return(clozetext_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function clozetext_scoring_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function clozetext_scoring_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function clozetext_scoring_possibleConstructorReturn(r,a){return!a||"object"!==clozetext_scoring_typeof(a)&&"function"!=typeof a?function clozetext_scoring_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r):a}function clozetext_scoring_getPrototypeOf(r){return(clozetext_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function clozetext_scoring_setPrototypeOf(r,a){return(clozetext_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}var Q=function(r){function ClozeTextScorer(){return clozetext_scoring_classCallCheck(this,ClozeTextScorer),clozetext_scoring_possibleConstructorReturn(this,clozetext_scoring_getPrototypeOf(ClozeTextScorer).apply(this,arguments))}return function clozetext_scoring_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&clozetext_scoring_setPrototypeOf(r,a)}(ClozeTextScorer,r),function clozetext_scoring_createClass(r,a,l){return a&&clozetext_scoring_defineProperties(r.prototype,a),l&&clozetext_scoring_defineProperties(r,l),r}(ClozeTextScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!0}}}]),ClozeTextScorer}(B.a);function imageclozeassociation_scoring_typeof(r){return(imageclozeassociation_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function imageclozeassociation_scoring_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function imageclozeassociation_scoring_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function imageclozeassociation_scoring_possibleConstructorReturn(r,a){return!a||"object"!==imageclozeassociation_scoring_typeof(a)&&"function"!=typeof a?function imageclozeassociation_scoring_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r):a}function imageclozeassociation_scoring_getPrototypeOf(r){return(imageclozeassociation_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function imageclozeassociation_scoring_setPrototypeOf(r,a){return(imageclozeassociation_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}var ee=function(r){function ImageClozeAssociationScorer(){return imageclozeassociation_scoring_classCallCheck(this,ImageClozeAssociationScorer),imageclozeassociation_scoring_possibleConstructorReturn(this,imageclozeassociation_scoring_getPrototypeOf(ImageClozeAssociationScorer).apply(this,arguments))}return function imageclozeassociation_scoring_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&imageclozeassociation_scoring_setPrototypeOf(r,a)}(ImageClozeAssociationScorer,r),function imageclozeassociation_scoring_createClass(r,a,l){return a&&imageclozeassociation_scoring_defineProperties(r.prototype,a),l&&imageclozeassociation_scoring_defineProperties(r,l),r}(ImageClozeAssociationScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1}}}]),ImageClozeAssociationScorer}(B.a);function imageclozedropdown_scoring_typeof(r){return(imageclozedropdown_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function imageclozedropdown_scoring_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function imageclozedropdown_scoring_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function imageclozedropdown_scoring_possibleConstructorReturn(r,a){return!a||"object"!==imageclozedropdown_scoring_typeof(a)&&"function"!=typeof a?function imageclozedropdown_scoring_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r):a}function imageclozedropdown_scoring_getPrototypeOf(r){return(imageclozedropdown_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function imageclozedropdown_scoring_setPrototypeOf(r,a){return(imageclozedropdown_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}var te=function(r){function ImageClozeDropdownScorer(){return imageclozedropdown_scoring_classCallCheck(this,ImageClozeDropdownScorer),imageclozedropdown_scoring_possibleConstructorReturn(this,imageclozedropdown_scoring_getPrototypeOf(ImageClozeDropdownScorer).apply(this,arguments))}return function imageclozedropdown_scoring_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&imageclozedropdown_scoring_setPrototypeOf(r,a)}(ImageClozeDropdownScorer,r),function imageclozedropdown_scoring_createClass(r,a,l){return a&&imageclozedropdown_scoring_defineProperties(r.prototype,a),l&&imageclozedropdown_scoring_defineProperties(r,l),r}(ImageClozeDropdownScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1}}}]),ImageClozeDropdownScorer}(B.a);function imageclozetext_scoring_typeof(r){return(imageclozetext_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function imageclozetext_scoring_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function imageclozetext_scoring_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function imageclozetext_scoring_possibleConstructorReturn(r,a){return!a||"object"!==imageclozetext_scoring_typeof(a)&&"function"!=typeof a?function imageclozetext_scoring_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r):a}function imageclozetext_scoring_getPrototypeOf(r){return(imageclozetext_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function imageclozetext_scoring_setPrototypeOf(r,a){return(imageclozetext_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}var ne=function(r){function ImageClozeTextScorer(){return imageclozetext_scoring_classCallCheck(this,ImageClozeTextScorer),imageclozetext_scoring_possibleConstructorReturn(this,imageclozetext_scoring_getPrototypeOf(ImageClozeTextScorer).apply(this,arguments))}return function imageclozetext_scoring_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&imageclozetext_scoring_setPrototypeOf(r,a)}(ImageClozeTextScorer,r),function imageclozetext_scoring_createClass(r,a,l){return a&&imageclozetext_scoring_defineProperties(r.prototype,a),l&&imageclozetext_scoring_defineProperties(r,l),r}(ImageClozeTextScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1}}}]),ImageClozeTextScorer}(B.a),re=l(4),oe=l(158);a.a=j.a.extend({imageTemplate:q.a,RESPONSE_MARKER_REGEXP:"{{response}}",initialize:function initialize(){j.a.prototype.initialize.apply(this,arguments),this.updateValidationObject()},validateStartup:function validateStartup(){j.a.prototype.validateStartup.call(this),this.get("question").template&&(this.get("question").template=T.a.sanitizeHTML(this.get("question").template))},processResponseValue:function processResponseValue(r){this.hasResponse()||this.set({response:{value:[],type:this.RESPONSE_TYPE.ARRAY}},{silent:!0}),this.get("response").value=r},isDefaultValidResponseValue:function isDefaultValidResponseValue(r){return 0===S.a.filter(r,(function(r){return r||0===r})).length},getScorerClass:function getScorerClass(){var r,a=this.TYPE;switch(this.get("type")){case a.CLOZETEXT:r=Q;break;case a.CLOZEASSOCIATION:r=G;break;case a.CLOZEDROPDOWN:r=$;break;case a.CLOZEINLINETEXT:r=Z;break;case a.IMAGECLOZEASSOCIATION:r=ee;break;case a.IMAGECLOZEDROPDOWN:r=te;break;case a.IMAGECLOZETEXT:r=ne}return r},validateResponse:function validateResponse(){var r=this.getScorer(),a=r.error();if(!a)return r.validateIndividualResponses();if("MathQuestionException"!==a.name)throw a;"user"!==a.location&&re.a.exception({code:10019,detail:a.message,i18n:this.activity.get("i18n")})},isImageCloze:function isImageCloze(){var r=this.TYPE;return S.a.include([r.IMAGECLOZETEXT,r.IMAGECLOZEASSOCIATION,r.IMAGECLOZEDROPDOWN,r.IMAGECLOZEFORMULA,r.IMAGECLOZECHEMISTRY],this.get("type"))},getDynamicShuffleSeed:function getDynamicShuffleSeed(){return new oe.a(this).getDynamicSeed()},getContentTemplate:function getContentTemplate(){if(this.isImageCloze()){var r=q.a,a=this.get("question"),l={img_alt:!!a.img_alt&&a.img_alt,img_title:!!a.img_title&&a.img_title,img_src:a.img_src,response_positions:a.response_positions,response_container:a.response_container,padding:!!a.padding&&a.padding,question_type:this.get("type")};return a.image&&(a.image.src&&(l.img_src=a.image.src),a.image.alt&&(l.img_alt=a.image.alt),a.image.title&&(l.img_title=a.image.title)),r({displayLogic:l})}return this.get("question").template},getImageClozeAriaLabels:function getImageClozeAriaLabels(){if(this.isImageCloze())return S.a.isUndefined(this._ariaLabels)&&(this._ariaLabels=S.a.map(this.get("question").aria_labels,(function(r){return S.a.escape(r)}))),this._ariaLabels},updateValidationObject:function updateValidationObject(){var r=this.get("question");if(r.hasOwnProperty("valid_responses")){var a,l,O,E=[],T=[],j=!0;S.a.each(r.valid_responses,(function(r,D){E[D]=[],T[D]=[],S.a.each(r,(function(r,q){l=S.a.isUndefined(r.value)?null:r.value,null!==(O=S.a.isUndefined(r.score)?null:r.score)&&(O=parseInt(O,10)),E[D].push(l),T[D].push(O),S.a.isUndefined(a)?a=O:j&=a===O}))})),delete r.valid_responses,r.validation={valid_responses:E},a=j?a:T,S.a.isNull(a)||(r.validation.valid_score=a),this.set({question:r},{silent:!0}),this.trackEvent("Updated pre v1.24.0 question object.")}},getCorrectByIndex:function getCorrectByIndex(r){if(this.canValidateResponse())return this.getValidResponse().value[r]},isVerticalTopContainer:function isVerticalTopContainer(){return S.a.isUndefined(this._verticalTop)&&(this._verticalTop=!!this.isImageCloze()&&!!S.a.getNested(this.get("question"),"response_container.vertical_top")),this._verticalTop}})},,,,,function(r,a,l){(function(a){var check=function(r){return r&&r.Math==Math&&r};r.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof a&&a)||Function("return this")()}).call(this,l(36))},function(r,a){r.exports=function(r){try{return!!r()}catch(r){return!0}}},,,,,,,,,,,,,,,,,function(r,a,l){"use strict";l.d(a,"a",(function(){return trapFocus}));var O=l(0),S=l.n(O),E=l(1),T=l.n(E),j=l(7),D=["a[href]",'input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","area[href]","iframe","object","embed"].join();function trapFocus(r,a){var l=document.activeElement,O=T()(r).find(D).filter(":visible"),E=S.a.first(O),q=S.a.last(O);if(O.length){var B=function handler(r){9===r.keyCode&&(r.shiftKey?document.activeElement===E&&(r.preventDefault(),q.focus()):document.activeElement===q&&(r.preventDefault(),E.focus()))};return(a&&S.a.isFunction(a.focus)?a:E).focus(),r.addEventListener("keydown",B),r.setAttribute("role","dialog"),j.a.isSafari||r.setAttribute("aria-modal","true"),function restore(a){r.removeEventListener("keydown",B),r.removeAttribute("role"),r.removeAttribute("aria-modal"),(a&&S.a.isFunction(a.focus)?a:l).focus()}}}},function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=l(5),T=l.n(E),j=l(207);a.a=T.a.Collection.extend({model:j.a,comparator:"name",ATTRS_FOR_RESPONSE:["name","description","originalName","extension","size","assetPath","assetProcessedPath"],getResponseValueFormat:function getResponseValueFormat(){var r=this,a=this.where({hasUploaded:!0});return S()(a).map((function(a){return a.pick(r.ATTRS_FOR_RESPONSE)}))}})},function(r,a){r.exports=function(r){return"object"==typeof r?null!==r:"function"==typeof r}},function(r,a){var l={}.hasOwnProperty;r.exports=function(r,a){return l.call(r,a)}},function(r,a,l){var O=l(278);r.exports=function(r){return O[r+"Prototype"]}},function(r,a,l){r.exports=l(573)},function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="lrn_imagecloze_container"'+(null==(__t=displayLogic.padding?' style="padding: '+displayLogic.padding+'px"':"")?"":__t)+' ><img draggable="false"',displayLogic.img_alt&&(__p+='alt="'+(null==(__t=displayLogic.img_alt)?"":_.escape(__t))+'"'),__p+="",displayLogic.img_title&&(__p+='title="'+(null==(__t=displayLogic.img_title)?"":_.escape(__t))+'"'),__p+='class="lrn_imagecloze_image"src="'+(null==(__t=displayLogic.img_src)?"":_.escape(__t))+'">',_.each(displayLogic.response_positions,(function(r){__p+='<div class="lrn_imagecloze_response" style="left:'+(null==(__t=r.x)?"":__t)+"%;top:"+(null==(__t=r.y)?"":__t)+"%;",displayLogic.response_container&&"imageclozeassociation"===displayLogic.question_type&&(__p+="",displayLogic.response_container.hasOwnProperty("height")&&(__p+="height:"+(null==(__t=displayLogic.response_container.height)?"":__t)+";"),__p+=""),__p+='">{{response}}</div>'})),__p+="</div>";return __p}},function(r,a,l){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var O=navigator.userAgent.toLowerCase(),S=O.match(/(opera|ie|edge|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],E=S[1],T=parseInt(S[2],10),j="ie"===E&&T<8&&/trident/i.test(O),D=!!O.match(/android|webos|iphone|ipad|ipod|blackBerry|windows phone|opera mini|iemobile/i),q=!!O.match(/applewebkit/),B=/^((?!android|chrome).)*safari/i.test(navigator.userAgent),G=!(!window.chrome||!window.chrome.runtime||"[object Function]"!==Object.prototype.toString.call(window.chrome.runtime.getManifest)),Z=!!navigator.platform&&["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].indexOf(navigator.platform)>=0,$=O.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;O.match(/trident.*rv[ :]*11\./)&&(E="ie",T=11),O.match(/edge/)&&(E="edge"),"version"===E&&(E=S[3]);var Q={browser:E,version:T,compatibilityMode:j,isMobile:D,isChromeApp:G,isAppleWebKit:q,isValidDOCTYPE:function isValidDOCTYPE(r){return!(!r||!r.doctype||"html"!==r.doctype.name)},isIOS:Z,isIPad:$,isMicrosoft:"ie"===E||"edge"===E,isWindows:!(!window.navigator||!window.navigator.platform)&&["Windows","Win32","Win64","WinCE"].indexOf(window.navigator.platform)>-1,isSafari:B};a.default=Q},,,,,,,function(r,a,l){"use strict";var O,S,E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};S=function(){for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];var O=document.createElement("input");return"object"===E(a[0])&&(!0===a[0].multiple&&O.setAttribute("multiple",""),void 0!==a[0].accept&&O.setAttribute("accept",a[0].accept)),O.setAttribute("type","file"),O.style.display="none",O.setAttribute("id","hidden-file"),document.body.appendChild(O),new Promise((function(r){O.addEventListener("change",(function(){r(O.files);var l=a[a.length-1];"function"==typeof l&&l(O.files),document.body.removeChild(O)}));var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),O.dispatchEvent(l)}))},void 0===(O=function(){return S}.call(a,l,a,r))||(r.exports=O)},function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=l(209),T=l(207),j=l(239),D=l(199),q=l(277);function ownKeys(r,a){var l=Object.keys(r);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(r);a&&(O=O.filter((function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),l.push.apply(l,O)}return l}function _objectSpread(r){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?arguments[a]:{};a%2?ownKeys(Object(l),!0).forEach((function(a){_defineProperty(r,a,l[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):ownKeys(Object(l)).forEach((function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(l,a))}))}return r}function _defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var B=-90,G=-180,Z=-270;function getImageConversionOrientation(r){return r===B?8:r===G?3:r===Z?6:void 0}function ImageUploader(r){this.activity=r.activity,this.modelId=r.modelId,this.responseId=r.responseId,this.eventBus=r.eventBus,this.compression=r.compression,this.assets=new j.a,E.a.hookToActivity(this.activity,this.assets)}S.a.extend(ImageUploader.prototype,{compressImage:function compressImage(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a=S.a.extend(this.compression,a);var l=.001*Math.min(r.size,a.size),O=parseInt(l-Math.max(.1*l,1),10),E=_objectSpread({},a,{size:Math.abs(O),orientation:getImageConversionOrientation(a.rotation)});return delete E.rotation,q.compressAccurately(r,E).then((function(a){return a.name=r.name,a.lastModified=r.lastModified,a.lastModifiedDate=r.lastModifiedDate,a}))},upload:function upload(r){var a=D.a.createFullPath(this.activity,this.modelId,r.name,!0),l=D.a.getValidExtension(r.name),O=D.a.getMimeTypeByExtension(l);return this.assets.add({file:r},{assetPath:a,assetExtension:l,assetMimeType:O,activity:this.activity,responseId:this.responseId,eventBus:this.eventBus,securityObject:this.getSecurityObject()})},resume:function resume(r){return this.assets.add({assetPath:r},{securityObject:this.getSecurityObject()})},getSecurityObject:function getSecurityObject(){return this.activity.get("security").getRequestParameters()},currentUploadsCount:function currentUploadsCount(){return this.assets.where({status:T.a.prototype.UPLOAD_STATUS.uploading}).length}}),a.a=ImageUploader},function(r,a,l){"use strict";a.a={encode:function base64_encode(r){var a,l,O,S,E,T,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",D=0,q=0,B="",G=[];if(!r)return r;do{a=(E=r.charCodeAt(D++)<<16|r.charCodeAt(D++)<<8|r.charCodeAt(D++))>>18&63,l=E>>12&63,O=E>>6&63,S=63&E,G[q++]=j.charAt(a)+j.charAt(l)+j.charAt(O)+j.charAt(S)}while(D<r.length);return B=G.join(""),((T=r.length%3)?B.slice(0,T-3):B)+"===".slice(T||3)},decode:function base64_decode(r){var a,l,O,S,E,T,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",D=0,q=0,B=[];if(!r)return r;r+="";do{a=(T=j.indexOf(r.charAt(D++))<<18|j.indexOf(r.charAt(D++))<<12|(S=j.indexOf(r.charAt(D++)))<<6|(E=j.indexOf(r.charAt(D++))))>>16&255,l=T>>8&255,O=255&T,B[q++]=64===S?String.fromCharCode(a):64===E?String.fromCharCode(a,l):String.fromCharCode(a,l,O)}while(D<r.length);return B.join("")}}},function(r,a,l){var O=l(221);r.exports=!O((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(r,a,l){var O=l(255),S=l(335),E=l(357);r.exports=O?function(r,a,l){return S.f(r,a,E(1,l))}:function(r,a,l){return r[a]=l,r}},function(r,a,l){r.exports=l(591)},function(r,a,l){r.exports=l(610)},,function(r,a,l){"use strict";l.d(a,"a",(function(){return mathAccessibility}));var O=l(0),S=l.n(O);function mathAccessibility(r,a){r.processAccessibility=S.a.wrap(r.processAccessibility,(function(a,l){(l=l||{}).getSourceText=function(r){return r.find(".lrn-spokenmath").text()},a.call(r,l)})),r.activity.get("state")===r.activity.STATE.REVIEW&&(r.processAccessibility=S.a.wrap(r.processAccessibility,(function(l,O){var E=a(),T=0;S.a.each(E,(function(a){var S=a.mathEvents;r.listenToOnce(S,S.EVENT.EDITOR_SPOKENMATH_UPDATED,(function(){++T===E.length&&l.call(r,O)}))}))})))}},,function(r,a,l){"use strict";var O=l(1),S=l.n(O),E=l(0),T=l.n(E),j=l(52),D=l(350),q=l.n(D),B=l(261),G=l.n(B),Z=l(11),$=l(24),Q=(l(7),j.a.extend({template:q.a,responseMarkerRegExp:void 0,responseValue:[],showingValidationUI:!1,previousResponseValue:[],readOnly:!1,validGap:11,pointLeftRightGap:1.4,pointerWidth:20,pointerTopBottomHeight:25,pointerLeftRightHeight:36,pointerHeight:"10px",RESPONSE_CONTAINER_DEFAULT_DATA:{defaultData:{bottom:"0px",width:"96px",height:"2.3em"},imageclozeassociation:{width:"20px"},imageclozedropdown:{width:"50px"}},responseContainerDefaultInputType:"text",responseContainerInputTypes:["text","number"],incorrectAnswerBubbleTemplate:G.a,initialize:function initialize(){var r,a;j.a.prototype.initialize.call(this),this.jqNamespace=".lrn-cloze-".concat(this.cid),this.events=T.a.extend({},Q.prototype.events,this.events),this.activity=this.options.activity,this.i18n=this.activity.get("i18n"),this.responseMarkerRegExp=new RegExp(this.model.RESPONSE_MARKER_REGEXP,"g"),r=this.model.getContentTemplate().match(this.responseMarkerRegExp),this.responseValue=[],this.responseValue.length=r?r.length:0;for(var l=0;l<this.responseValue.length;l++)this.responseValue[l]=null;this.activity.get("state")===this.activity.STATE.RESUME&&this.model.hasResponse()&&(this.responseValue=this.model.getResponseValue()||[]),this.responseContainerDefaultData=T.a.extend({},this.RESPONSE_CONTAINER_DEFAULT_DATA.defaultData),(a=this.RESPONSE_CONTAINER_DEFAULT_DATA[this.model.get("type")])&&T.a.extend(this.responseContainerDefaultData,a),this.readOnly=this.activity.get("state")===this.activity.STATE.REVIEW||this.activity.get("state")===this.activity.STATE.PREVIEW,this.displayLogic={},this.addRenderingLogic(),this.render(),this.initialisationCompleted()},render:function render(r){var a,l=this.model,O=this,E=l.get("question"),j=l.isVerticalTopContainer();function resizeImage(){var r=function setWidth(){return Object($.a)(O.$el,(function(){O.setImageWidth()}))};r(),O.isListeningToWindowResize||(S()(window).on("resize"+O.jqNamespace,r),O.isListeningToWindowResize=!0)}function resizeImageOnLoad(){var r=O.$(".lrn_imagecloze_image");r.prop("complete")?resizeImage():r.on("load",resizeImage)}return a=r||this.template({questionResponse:l,displayLogic:this.displayLogic,labels:this.i18n.labels}),this.renderViewContent(a,this.extraClasses),this.displayLogic.isReviewState&&this.renderValidatableUI(),this.$el.toggleClass("lrn_cloze_vertical_top_none",!j),this.displayLogic.isMath&&l.isImageCloze()&&T.a.hasProperty(E,"ui_style.possibility_list_position")&&("left"===E.ui_style.possibility_list_position||"right"===E.ui_style.possibility_list_position)?this.mathquillRendering()?(this.renderMathquill(),resizeImageOnLoad()):Z.a.once(Z.a.EVENT.RENDERED,resizeImageOnLoad):resizeImageOnLoad(),this},setImageWidth:function setImageWidth(){var r=this.$(".lrn_imagecloze_image"),a=this.$(".lrn_possibilityList"),l=this.$(".lrn_imagecloze_container"),O=this.$(".lrn_cloze_response_container"),S=this.$(".lrn_response_input"),E=this.$(".lrn_response_innerbody");O.add(E).add(l).add(r).css({maxWidth:"",width:""});var j,D,q,B,G,Z,$=2*parseFloat(S.css("padding-left"),10)||0,Q=E.innerWidth(),ee=a.length,te=this.getScaledWidth(r.width());return r.css({width:te}),O.css({width:te,"max-width":Q,display:"block"}),ee&&(D=a.css("position"),a.css("position","absolute"),q=this.model.get("question"),Z=T.a.hasProperty(q,"ui_style.possibility_list_position")&&("left"===q.ui_style.possibility_list_position||"right"===q.ui_style.possibility_list_position),j=this.$(".lrn_response_innerbody"),B=S.outerWidth(),G=0,a.css("position",D),Z&&(G=a.outerWidth()),O.css({width:this.getScaledWidth(B+G+$)}),j.css({"max-width":Q,width:this.getScaledWidth(B+G+$)})),l.css({width:r.width()}),te},getScaledWidth:function getScaledWidth(r){return this.displayLogic.imageScale?r/this.model.FONTSIZE_MAP[this.model.FONTSIZE.NORMAL]+"em":r},addRenderingLogic:function addRenderingLogic(){j.a.prototype.addRenderingLogic.call(this);var r=this,a=this.model.get("question"),l=this.activity.get("state")===this.activity.STATE.REVIEW;this.displayLogic.readOnly=l||this.activity.get("state")===this.activity.STATE.PREVIEW,this.displayLogic.multipleResponses=this.responseValue&&this.responseValue.length>1,this.displayLogic.isMath=!!a.is_math,T.a.isObject(this.displayLogic.responseContainer)||(this.displayLogic.responseContainer={}),this.displayLogic.responseContainer.inputType=this.responseContainerDefaultInputType,T.a.isObject(a.response_container)&&(a.response_container.hasOwnProperty("width")&&(this.displayLogic.responseContainer.width=a.response_container.width,a.response_container.width.indexOf("%")>0&&(this.displayLogic.responseContainer.fluid_width=!0)),a.response_container.hasOwnProperty("height")&&(this.displayLogic.responseContainer.height=a.response_container.height,a.response_container.height.indexOf("%")>0&&(this.displayLogic.responseContainer.fluid_height=!0)),a.response_container.hasOwnProperty("placeholder")&&(this.displayLogic.responseContainer.placeholder=a.response_container.placeholder,this.displayLogic.responseContainer.showPlaceholder=!T.a.isEmpty(a.response_container.placeholder)&&!this.displayLogic.readOnly),a.response_container.hasOwnProperty("pointer")&&(this.displayLogic.responseContainer.pointer=a.response_container.pointer),a.response_container.hasOwnProperty("wordwrap")&&(this.displayLogic.responseContainer.wordwrap=a.response_container.wordwrap),T.a.contains(this.responseContainerInputTypes,a.response_container.input_type)&&(this.displayLogic.responseContainer.inputType=a.response_container.input_type)),a.image&&(this.displayLogic.imageScale=a.image.scale),this.extraClasses="lrn_cloze";var O=this.model.getContentTemplate(),S=-1;O=O.replace(this.responseMarkerRegExp,(function(){return S++,r.getResponseInputHTML(S,r.getPointerVars(S))})),this.displayLogic.processedTemplate=O,this.displayLogic.extraContentHTML=this.getExtraContentHTML()},getResponseInputHTML:function getResponseInputHTML(r){return"{replacedInput"+r+"}"},getExtraContentHTML:function getExtraContentHTML(){return null},showCorrectAnswer:function showCorrectAnswer(){this.showCorrectAnswerList()},showCorrectAnswersHover:function showCorrectAnswersHover(){throw new Error("Unimplemented function showCorrectAnswersHover for question type:"+this.model.get("type"))},getResponseContainerFor:function getResponseContainerFor(r){var a=this.model.get("question"),l=T.a.extend({},this.displayLogic.responseContainer);return T.a.isArray(a.response_containers)&&T.a.isObject(a.response_containers[r])&&(T.a.extend(l,a.response_containers[r]),T.a.contains(this.responseContainerInputTypes,a.response_containers[r].input_type)&&(l.inputType=a.response_containers[r].input_type),l.showPlaceholder=!T.a.isEmpty(l.placeholder)&&!this.displayLogic.readOnly),l},getImageClozeAriaLabelFor:function getImageClozeAriaLabelFor(r){var a=this.model.getImageClozeAriaLabels();if(T.a.isArray(a))return a[r]},getPointerVars:function getPointerVars(r){if(!this.model.isImageCloze())return{};var a=this.model.getFontSize(),l=this.getResponseContainerFor(r),O=this.getPixel(l.width||this.responseContainerDefaultData.width,a),S=this.getPixel(l.height||this.responseContainerDefaultData.height,a),E=this.getPixel(l.height||this.responseContainerDefaultData.bottom,a),T=(this.getPixel(this.pointerHeight,a),{position:l.pointer});switch(this.model.get("type")===this.model.TYPE.IMAGECLOZEDROPDOWN&&(this.validGap=0),this.model.get("type")===this.model.TYPE.IMAGECLOZETEXT&&(this.responseContainerDefaultHeight="24px"),l.pointer){case"top":T.top=S/2+this.getPointLeftRightGap()+"px",T.left=this.getEm(-1*(Math.ceil((O-this.pointerWidth)/2)+2));break;case"right":T.right=this.pointerWidth/2+this.getPointLeftRightGap()+"px",T.top=this.getEm(-1*Math.floor((S-this.pointerLeftRightHeight)/2));break;case"bottom":T.bottom=E+this.getPointLeftRightGap()/2+"px",T.left=this.getEm(-1*(Math.ceil((O-this.pointerWidth)/2)+2));break;case"left":T.left=this.pointerWidth*this.pointLeftRightGap+this.getPointLeftRightGap()+"px",T.top=this.getEm(-1*Math.floor((S-this.pointerLeftRightHeight)/2));break;default:T={}}return T},getPointLeftRightGap:function getPointLeftRightGap(){if(!this._pointLeftRightGap){var r=this.model.getFontSize();this._pointLeftRightGap=this.pointLeftRightGap*r}return this._pointLeftRightGap},getPixel:function getPixel(r,a){var l=(r=r.toString()).substr(-2),O=parseFloat(r.substr(0,r.length-2));return"em"===l?O*a:O},getEm:function getEm(r,a,l){var O=r/(l?this.model.FONTSIZE_MAP.normal:this.model.getFontSize());return a?O:O+"em"},remove:function remove(){S()(window).off(this.jqNamespace),j.a.prototype.remove.call(this)}}));a.a=Q},,,,,,,,,,,,,,,function(r,a,l){const O=l(0);r.exports=function(r){var a={};function n(l){if(a[l])return a[l].exports;var O=a[l]={i:l,l:!1,exports:{}};return r[l].call(O.exports,O,O.exports,n),O.l=!0,O.exports}return n.m=r,n.c=a,n.d=function(r,a,l){n.o(r,a)||Object.defineProperty(r,a,{enumerable:!0,get:l})},n.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,a){if(1&a&&(r=n(r)),8&a)return r;if(4&a&&"object"==typeof r&&r&&r.__esModule)return r;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:r}),2&a&&"string"!=typeof r)for(var O in r)n.d(l,O,function(a){return r[a]}.bind(null,O));return l},n.n=function(r){var a=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(a,"a",a),a},n.o=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},n.p="",n(n.s=0)}([function(r,a,l){"use strict";var S;function o(r){return["image/png","image/jpeg","image/gif"].some((function(a){return a===r}))}function u(r,a,l){return void 0===a&&(a=.92),void 0===l&&(l=S.JPEG),function(r,a,l,O){return new(l||(l=Promise))((function(S,E){function i(r){try{c(O.next(r))}catch(r){E(r)}}function u(r){try{c(O.throw(r))}catch(r){E(r)}}function c(r){var a;r.done?S(r.value):(a=r.value,a instanceof l?a:new l((function(r){r(a)}))).then(i,u)}c((O=O.apply(r,a||[])).next())}))}(this,void 0,void 0,(function(){return function(r,a){var l,O,S,E,T={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return E={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function u(E){return function(j){return function(E){if(l)throw new TypeError("Generator is already executing.");for(;T;)try{if(l=1,O&&(S=2&E[0]?O.return:E[0]?O.throw||((S=O.return)&&S.call(O),0):O.next)&&!(S=S.call(O,E[1])).done)return S;switch(O=0,S&&(E=[2&E[0],S.value]),E[0]){case 0:case 1:S=E;break;case 4:return T.label++,{value:E[1],done:!1};case 5:T.label++,O=E[1],E=[0];continue;case 7:E=T.ops.pop(),T.trys.pop();continue;default:if(!((S=(S=T.trys).length>0&&S[S.length-1])||6!==E[0]&&2!==E[0])){T=0;continue}if(3===E[0]&&(!S||E[1]>S[0]&&E[1]<S[3])){T.label=E[1];break}if(6===E[0]&&T.label<S[1]){T.label=S[1],S=E;break}if(S&&T.label<S[2]){T.label=S[2],T.ops.push(E);break}S[2]&&T.ops.pop(),T.trys.pop();continue}E=a.call(r,T)}catch(r){E=[6,r],O=0}finally{l=S=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([E,j])}}}(this,(function(O){return o(l)||(l=S.JPEG),[2,r.toDataURL(l,a)]}))}))}function c(r,a,l){return void 0===a&&(a=.92),void 0===l&&(l=S.JPEG),new Promise((function(O){return r.toBlob((function(r){return O(r)}),l,a)}))}function f(r,a){return function(r,a,l,O){return new(l||(l=Promise))((function(S,E){function i(r){try{c(O.next(r))}catch(r){E(r)}}function u(r){try{c(O.throw(r))}catch(r){E(r)}}function c(r){var a;r.done?S(r.value):(a=r.value,a instanceof l?a:new l((function(r){r(a)}))).then(i,u)}c((O=O.apply(r,a||[])).next())}))}(this,void 0,void 0,(function(){var l,O,S,E,T;return function(r,a){var l,O,S,E,T={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return E={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function u(E){return function(j){return function(E){if(l)throw new TypeError("Generator is already executing.");for(;T;)try{if(l=1,O&&(S=2&E[0]?O.return:E[0]?O.throw||((S=O.return)&&S.call(O),0):O.next)&&!(S=S.call(O,E[1])).done)return S;switch(O=0,S&&(E=[2&E[0],S.value]),E[0]){case 0:case 1:S=E;break;case 4:return T.label++,{value:E[1],done:!1};case 5:T.label++,O=E[1],E=[0];continue;case 7:E=T.ops.pop(),T.trys.pop();continue;default:if(!((S=(S=T.trys).length>0&&S[S.length-1])||6!==E[0]&&2!==E[0])){T=0;continue}if(3===E[0]&&(!S||E[1]>S[0]&&E[1]<S[3])){T.label=E[1];break}if(6===E[0]&&T.label<S[1]){T.label=S[1],S=E;break}if(S&&T.label<S[2]){T.label=S[2],T.ops.push(E);break}S[2]&&T.ops.pop(),T.trys.pop();continue}E=a.call(r,T)}catch(r){E=[6,r],O=0}finally{l=S=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([E,j])}}}(this,(function(j){for(l=r.split(","),O=l[0].match(/:(.*?);/)[1],S=atob(l[1]),E=S.length,T=new Uint8Array(E);E--;)T[E]=S.charCodeAt(E);return o(a)&&(O=a),[2,new Blob([T],{type:O})]}))}))}function h(r){return new Promise((function(a,l){var O=new Image;O.onload=function(){return a(O)},O.onerror=function(){return l(new Error("dataURLtoImage(): dataURL is illegal"))},O.src=r}))}function d(r,a){var l=document.createElement("a");l.href=window.URL.createObjectURL(r),l.download=a||Date.now().toString(36),document.body.appendChild(l);var O=document.createEvent("MouseEvents");O.initEvent("click",!1,!1),l.dispatchEvent(O),document.body.removeChild(l)}function p(r){return new Promise((function(a){var l=new FileReader;l.onloadend=function(r){return a(r.target.result)},l.readAsDataURL(r)}))}l.r(a),l.d(a,"canvastoDataURL",(function(){return u})),l.d(a,"canvastoFile",(function(){return c})),l.d(a,"dataURLtoFile",(function(){return f})),l.d(a,"dataURLtoImage",(function(){return h})),l.d(a,"downloadFile",(function(){return d})),l.d(a,"filetoDataURL",(function(){return p})),l.d(a,"imagetoCanvas",(function(){return g})),l.d(a,"urltoBlob",(function(){return v})),l.d(a,"urltoImage",(function(){return m})),l.d(a,"compress",(function(){return k})),l.d(a,"compressAccurately",(function(){return I})),l.d(a,"EImageType",(function(){return S})),function(r){r.PNG="image/png",r.JPEG="image/jpeg",r.GIF="image/gif"}(S||(S={}));var b=function(){return(b=O.extend||function(r){for(var a,l=1,O=arguments.length;l<O;l++)for(var S in a=arguments[l])Object.prototype.hasOwnProperty.call(a,S)&&(r[S]=a[S]);return r}).apply(this,arguments)};function g(r,a){return void 0===a&&(a={}),function(r,a,l,O){return new(l||(l=Promise))((function(S,E){function i(r){try{c(O.next(r))}catch(r){E(r)}}function u(r){try{c(O.throw(r))}catch(r){E(r)}}function c(r){var a;r.done?S(r.value):(a=r.value,a instanceof l?a:new l((function(r){r(a)}))).then(i,u)}c((O=O.apply(r,a||[])).next())}))}(this,void 0,void 0,(function(){var l,O,S,E,T,j,D;return function(r,a){var l,O,S,E,T={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return E={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function u(E){return function(j){return function(E){if(l)throw new TypeError("Generator is already executing.");for(;T;)try{if(l=1,O&&(S=2&E[0]?O.return:E[0]?O.throw||((S=O.return)&&S.call(O),0):O.next)&&!(S=S.call(O,E[1])).done)return S;switch(O=0,S&&(E=[2&E[0],S.value]),E[0]){case 0:case 1:S=E;break;case 4:return T.label++,{value:E[1],done:!1};case 5:T.label++,O=E[1],E=[0];continue;case 7:E=T.ops.pop(),T.trys.pop();continue;default:if(!((S=(S=T.trys).length>0&&S[S.length-1])||6!==E[0]&&2!==E[0])){T=0;continue}if(3===E[0]&&(!S||E[1]>S[0]&&E[1]<S[3])){T.label=E[1];break}if(6===E[0]&&T.label<S[1]){T.label=S[1],S=E;break}if(S&&T.label<S[2]){T.label=S[2],T.ops.push(E);break}S[2]&&T.ops.pop(),T.trys.pop();continue}E=a.call(r,T)}catch(r){E=[6,r],O=0}finally{l=S=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([E,j])}}}(this,(function(q){for(j in l=b({},a),O=document.createElement("canvas"),S=O.getContext("2d"),l)Object.prototype.hasOwnProperty.call(l,j)&&(l[j]=Number(l[j]));switch(l.scale?(D=l.scale>0&&l.scale<10?l.scale:1,T=r.width*D,E=r.height*D):(T=l.width||l.height*r.width/r.height||r.width,E=l.height||l.width*r.height/r.width||r.height),[5,6,7,8].some((function(r){return r===l.orientation}))?(O.height=T,O.width=E):(O.height=E,O.width=T),l.orientation){case 3:S.rotate(180*Math.PI/180),S.drawImage(r,-O.width,-O.height,O.width,O.height);break;case 6:S.rotate(90*Math.PI/180),S.drawImage(r,0,-O.width,O.height,O.width);break;case 8:S.rotate(270*Math.PI/180),S.drawImage(r,-O.height,0,O.height,O.width);break;case 2:S.translate(O.width,0),S.scale(-1,1),S.drawImage(r,0,0,O.width,O.height);break;case 4:S.translate(O.width,0),S.scale(-1,1),S.rotate(180*Math.PI/180),S.drawImage(r,-O.width,-O.height,O.width,O.height);break;case 5:S.translate(O.width,0),S.scale(-1,1),S.rotate(90*Math.PI/180),S.drawImage(r,0,-O.width,O.height,O.width);break;case 7:S.translate(O.width,0),S.scale(-1,1),S.rotate(270*Math.PI/180),S.drawImage(r,-O.height,0,O.height,O.width);break;default:S.drawImage(r,0,0,O.width,O.height)}return[2,O]}))}))}function v(r){return fetch(r).then((function(r){return r.blob()}))}function m(r){return new Promise((function(a,l){var O=new Image;O.onload=function(){return a(O)},O.onerror=function(){return l(new Error("urltoImage(): Image failed to load, please check the image URL"))},O.src=r}))}var x=function(r,a,l,O){return new(l||(l=Promise))((function(S,E){function i(r){try{c(O.next(r))}catch(r){E(r)}}function u(r){try{c(O.throw(r))}catch(r){E(r)}}function c(r){var a;r.done?S(r.value):(a=r.value,a instanceof l?a:new l((function(r){r(a)}))).then(i,u)}c((O=O.apply(r,a||[])).next())}))},P=function(r,a){var l,O,S,E,T={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return E={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function u(E){return function(j){return function(E){if(l)throw new TypeError("Generator is already executing.");for(;T;)try{if(l=1,O&&(S=2&E[0]?O.return:E[0]?O.throw||((S=O.return)&&S.call(O),0):O.next)&&!(S=S.call(O,E[1])).done)return S;switch(O=0,S&&(E=[2&E[0],S.value]),E[0]){case 0:case 1:S=E;break;case 4:return T.label++,{value:E[1],done:!1};case 5:T.label++,O=E[1],E=[0];continue;case 7:E=T.ops.pop(),T.trys.pop();continue;default:if(!((S=(S=T.trys).length>0&&S[S.length-1])||6!==E[0]&&2!==E[0])){T=0;continue}if(3===E[0]&&(!S||E[1]>S[0]&&E[1]<S[3])){T.label=E[1];break}if(6===E[0]&&T.label<S[1]){T.label=S[1],S=E;break}if(S&&T.label<S[2]){T.label=S[2],T.ops.push(E);break}S[2]&&T.ops.pop(),T.trys.pop();continue}E=a.call(r,T)}catch(r){E=[6,r],O=0}finally{l=S=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([E,j])}}};function k(r,a){return void 0===a&&(a={}),x(this,void 0,void 0,(function(){var l,E,T,j;return P(this,(function(D){switch(D.label){case 0:if(!(r instanceof Blob))throw new Error("compress(): First arg must be a Blob object or a File object.");return"object"!=typeof a&&(a=O.extend({quality:a})),a.quality=Number(a.quality),O.isNaN(a.quality)?[2,r]:[4,p(r)];case 1:return l=D.sent(),E=l.split(",")[0].match(/:(.*?);/)[1],T=S.JPEG,o(a.type)&&(T=a.type,E=a.type),[4,h(l)];case 2:return[4,g(D.sent(),O.extend({},a))];case 3:return[4,u(D.sent(),a.quality,T)];case 4:return[4,f(D.sent(),E)];case 5:return(j=D.sent()).size>r.size?[2,r]:[2,j]}}))}))}function I(r,a){return void 0===a&&(a={}),x(this,void 0,void 0,(function(){var l,E,T,j,D,q,B,G,Z,$,Q,ee;return P(this,(function(te){switch(te.label){case 0:if(!(r instanceof Blob))throw new Error("compressAccurately(): First arg must be a Blob object or a File object.");return"object"!=typeof a&&(a=O.extend({size:a})),a.size=Number(a.size),O.isNaN(a.size)||1024*a.size>r.size?[2,r]:(a.accuracy=Number(a.accuracy),(!a.accuracy||a.accuracy<.8||a.accuracy>.99)&&(a.accuracy=.95),l={max:a.size*(2-a.accuracy)*1024,accurate:1024*a.size,min:a.size*a.accuracy*1024},[4,p(r)]);case 1:return E=te.sent(),T=E.split(",")[0].match(/:(.*?);/)[1],j=S.JPEG,o(a.type)&&(j=a.type,T=a.type),[4,h(E)];case 2:return[4,g(te.sent(),O.extend({},a))];case 3:D=te.sent(),q=.75,B=.5,Z=[null,null],$=1,te.label=4;case 4:return $<=7?[4,u(D,B,j)]:[3,7];case 5:if(G=te.sent(),Q=G.length*q,7===$)return(l.max<Q||l.min>Q)&&(G=function(){for(var r=0,a=0,l=arguments.length;a<l;a++)r+=arguments[a].length;var O=Array(r),S=0;for(a=0;a<l;a++)for(var E=arguments[a],T=0,j=E.length;T<j;T++,S++)O[S]=E[T];return O}([G],Z).filter((function(r){return r})).sort((function(r,a){return Math.abs(r.length*q-l.accurate)-Math.abs(a.length*q-l.accurate)}))[0]),[3,7];if(l.max<Q)Z[1]=G,B-=Math.pow(.5,$+1);else{if(!(l.min>Q))return[3,7];Z[0]=G,B+=Math.pow(.5,$+1)}te.label=6;case 6:return $++,[3,4];case 7:return[4,f(G,T)];case 8:return(ee=te.sent()).size>r.size?[2,r]:[2,ee]}}))}))}}])},function(r,a){r.exports={}},,,,,,,,,,,,,function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="lrn_bubble lrn_charactermap"><div class="lrn_charactermap_title">'+(null==(__t=labels.characterMapTitle)?"":__t)+"</div>",_.each(characters,(function(r,a){__p+='<button class="lrn_btn_grid lrn_characterbutton" type="button" unselectable="on" tabindex="0" data-character-btn-index="'+(null==(__t=a)?"":__t)+'">'+(null==(__t=r)?"":__t)+"</button>"})),__p+="</div>";return __p}},,,,,,function(r,a,l){"use strict";l(1);var O=l(0),S=l.n(O),E=l(8).a.extend({DEFAULT_FORMATTING_OPTIONS:["bold","italic","underline","|","unorderedList","orderedList"],SHOW_WORD_LIMITS:{ALWAYS:"always",ON:"on-limit",OFF:"off"},MAX_WORD_LENGTH:1e4,processResponseValue:function processResponseValue(r){this.hasResponse()||this.set({response:{value:"",wordCount:0,type:this.RESPONSE_TYPE.STRING}},{silent:!0}),this.get("response").value=r.value,this.get("response").wordCount=r.wordCount},getFormattingOptions:function getFormattingOptions(){if(!this._formattingOptions){var r=this.get("question").formatting_options;S.a.isArray(r)||(r=this.DEFAULT_FORMATTING_OPTIONS);var a=this.getCharacterMap(),l=r.indexOf("charactermap");S.a.isArray(a)||!1!==a?l<0&&r.push("charactermap"):!1===a&&l>=0&&Array.prototype.splice.call(r,l,1),this._formattingOptions=r}return this._formattingOptions},getMaxLength:function getMaxLength(){if(!this._maxLength){var r=this.get("question").max_length;(!S.a.isNumber(r)||r<0||r>this.MAX_WORD_LENGTH)&&(r=this.MAX_WORD_LENGTH),this._maxLength=r}return this._maxLength},getWordCount:function getWordCount(){return this.hasResponse()?this.get("response").wordCount:0},getShowWordCount:function getShowWordCount(){if(S.a.isUndefined(this._showWordCount)){var r=this.get("question").show_word_count;this._showWordCount=!S.a.isBoolean(r)||r}return this._showWordCount},getPlaceholder:function getPlaceholder(){return this.get("question").placeholder},getBrowserSpellCheck:function getBrowserSpellCheck(){if(S.a.isUndefined(this._spellCheck)){var r=this.get("question").spellcheck;this._spellCheck=S.a.isBoolean(r)?r:"false"!==r}return this._spellCheck},disableAutoLink:function disableAutoLink(){return this.activity.get("disable_auto_link")||S.a.getNested(this.get("question"),"disable_auto_link")},getCharacterMap:function getCharacterMap(){if(S.a.isUndefined(this._characterMap)){var r=this.get("question"),a=r.character_map,l=S.a.isArray(r.formatting_options)?r.formatting_options:[],O=(S.a.isUndefined(a)||S.a.isArray(a)&&!a.length)&&l.indexOf("charactermap")>=0;this._characterMap=!!O||!(!S.a.isArray(a)&&!S.a.isBoolean(a))&&a}return this._characterMap},getShowWordLimit:function getShowWordLimit(){if(S.a.isUndefined(this._showWordLimit)){var r=this.get("question").show_word_limit,a=this.SHOW_WORD_LIMITS;this._showWordLimit=S.a.contains(a,r)?r:a.ALWAYS}return this._showWordLimit},getUIStyle:function getUIStyle(){return S.a.isUndefined(this._uiStyle)&&(this._uiStyle=S.a.getNested(this.get("question"),"ui_style")||{}),this._uiStyle},isMaxLengthDefined:function isMaxLengthDefined(){return S.a.isUndefined(this._isMaxLengthDefined)&&(this._isMaxLengthDefined=!!this.get("question").max_length),this._isMaxLengthDefined},wordCountExceeded:function wordCountExceeded(){return this.getWordCount()>this.getMaxLength()},hasAllowedResponse:function hasAllowedResponse(){return!(this.hasResponse()&&!this.get("question").submit_over_limit&&this.wordCountExceeded())}});a.a=E},,function(r,a,l){var O=l(240);r.exports=function(r){if(!O(r))throw TypeError(String(r)+" is not an object");return r}},function(r,a,l){var O=l(255),S=l(221),E=l(241),T=Object.defineProperty,j={},thrower=function(r){throw r};r.exports=function(r,a){if(E(j,r))return j[r];a||(a={});var l=[][r],D=!!E(a,"ACCESSORS")&&a.ACCESSORS,q=E(a,0)?a[0]:thrower,B=E(a,1)?a[1]:void 0;return j[r]=!!l&&!S((function(){if(D&&!O)return!0;var r={length:-1};D?T(r,1,{enumerable:!0,get:thrower}):r[1]=1,l.call(r,q,B)}))}},function(r,a){r.exports={}},,,,,function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=l(34),T=l(10);function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function _classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function _possibleConstructorReturn(r,a){return!a||"object"!==_typeof(a)&&"function"!=typeof a?function _assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r):a}function _getPrototypeOf(r){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function _setPrototypeOf(r,a){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}var j=["exactMatch"],D=function isDefaultValidResponseValue(r){return 0===S.a.filter(r,(function(r){return r&&(r.value||r.method||0===r.value)})).length},q=function(r){function MathScorer(){return _classCallCheck(this,MathScorer),_possibleConstructorReturn(this,_getPrototypeOf(MathScorer).apply(this,arguments))}return function _inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&_setPrototypeOf(r,a)}(MathScorer,r),function _createClass(r,a,l){return a&&_defineProperties(r.prototype,a),l&&_defineProperties(r,l),r}(MathScorer,[{key:"reset",value:function reset(r,a){var l=JSON.stringify(r);if(a=a||this.cachedValidateSingleSpec,this.serializedData!==l){try{this.scoringData=function getScoringData(r,a){if(!function canValidateResponse(r){if(!1===S.a.getNested(r,"validation.automarkable"))return!1;var a=r.validation||r;return!(S.a.isEmpty(a)||!(a.valid_responses||a.valid_response&&!D(a.valid_response.value)))}(r.question))return{automarkable:!1};r.response=r.response||{};var l,O,E=r.response&&r.response.value,q=[];r.question.equiv_literal_legacy&&(r=T.a.processCompatibility(r));if(O=!!r.question.validation.allow_negative_scores,r.response=r.response||{},r.question.validation.scoring_type){if(!S.a.contains(j,r.question.validation.scoring_type))throw new T.a.InvalidScoringTypeException(r.question.type,r.question.validation.scoring_type);r.question.validation.valid_response&&q.push(r.question.validation.valid_response),r.question.validation.alt_responses&&(q=q.concat(r.question.validation.alt_responses)),l=Math.abs(S.a.isNumber(r.question.validation.penalty)?r.question.validation.penalty:0)}else q=r.question.validation&&r.question.validation.valid_responses||[];var B=T.a.validateMathLists(E,q,a,1,l);void 0===B.scoreWithFullPenalty?B.score=null:B.score=O?B.scoreWithFullPenalty:Math.max(0,B.scoreWithFullPenalty);return B}(r,a),T.a.normalizeScores(this.scoringData,r)}catch(r){this.scoringData={error:r}}this.serializedData=l}return this.cachedValidateSingleSpec=a,this}}]),MathScorer}(E.a);a.a=q},,function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=l(706),T=l.n(E);function _defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function _defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var j=function(){function Fraction(r,a,l){!function _classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,Fraction),this.integer=isNaN(parseFloat(l))?0:parseFloat(l),this.numerator=0,this.denominator=null,(r||a)&&this.set(r,a)}return function _createClass(r,a,l){return a&&_defineProperties(r.prototype,a),l&&_defineProperties(r,l),r}(Fraction,[{key:"normalize",value:function normalize(r){var a,l,O,S,E=this.denominator?this.denominator:1;if(!0===r?(O=this.numerator,S=E):(l=Fraction.gcd(this.numerator,E),O=this.numerator/l,S=E/l),Math.abs(O)>=Math.abs(S)){if(1===S)return this.integer+=O,this.numerator=0,this.denominator=null,this;a=O<0?-Math.floor(-O/S):Math.floor(O/S),this.integer<0?this.integer-=a:this.integer+=a,O-=a*S}return this.set(O,S)}},{key:"clone",value:function clone(){return new Fraction(this)}},{key:"set",value:function set(r,a){if(r instanceof Fraction)this.integer=r.integer,this.numerator=r.numerator,this.denominator=r.denominator;else if(S.a.isUndefined(r)||S.a.isNull(r)||S.a.isUndefined(a)||S.a.isNull(a))if(S.a.isUndefined(a)||S.a.isNull(a))if(S.a.isString(r)){var l=Fraction.IMPROPER_REG_EXP.exec(r),O=Fraction.MIXED_REG_EXP.exec(r);O&&4===O.length?(this.integer=parseInt(O[1],10),this.numerator=parseInt(O[2],10),this.denominator=parseInt(O[3],10)):l&&3===l.length?(this.numerator=parseInt(l[1],10),this.denominator=parseInt(l[2],10)):(this.integer=parseFloat(r),this.numerator=0,this.denominator=null)}else S.a.isNumber(r)?(this.integer=r,this.numerator=0,this.denominator=null):(this.integer=0,this.numerator=0,this.denominator=null);else S.a.isUndefined(a)||S.a.isNull(a)?(this.integer=0,this.numerator=0,this.denominator=null):(this.integer=0,this.numerator=0,(S.a.isNumber(a)||S.a.isString(a))&&(this.denominator=parseInt(a,10),this.denominator||(this.denominator=null)));else(S.a.isNumber(r)||S.a.isString(r))&&(this.numerator=parseInt(r,10)),(S.a.isNumber(a)||S.a.isString(a))&&(this.denominator=parseInt(a,10)),this.denominator||(this.denominator=null);return this.setCorrectSign(),this}},{key:"convertToDenominator",value:function convertToDenominator(r){var a,l,O=this.denominator?this.denominator:1,E=this.numerator,T=this.integer;return S.a.isNumber(r)||(r=(l=new Fraction(r)).denominator?l.denominator:1),S.a.isNumber(r)&&O!==r&&(a=r/O,0===(E=this.numerator*a)&&(E=T*r,T=0)),new Fraction(E,r,T)}},{key:"add",value:function add(r){var a,l,O,S;return r=new Fraction(r),a=this.getImproperFraction(),l=r.getImproperFraction(),O=Fraction.lcm(a.denominator?a.denominator:1,l.denominator?l.denominator:1),(S=new Fraction(O/(a.denominator?a.denominator:1)*a.numerator+O/(l.denominator?l.denominator:1)*l.numerator,O)).normalize(!0),S}},{key:"subtract",value:function subtract(r){return r=new Fraction(r),this.add(r.multiply(-1))}},{key:"inverse",value:function inverse(){var r=this.getImproperFraction();return new Fraction(r.denominator,r.numerator)}},{key:"multiply",value:function multiply(r){var a,l;return r=new Fraction(r),a=this.getImproperFraction(),l=r.getImproperFraction(),new Fraction(a.numerator*l.numerator,(a.denominator?a.denominator:0)*(l.denominator?l.denominator:0))}},{key:"divide",value:function divide(r){return r=new Fraction(r),this.multiply(r.inverse())}},{key:"getProperFraction",value:function getProperFraction(){var r=new Fraction(this);return r.normalize(!0),new Fraction(r.integer<0&&r.numerator>0?-r.numerator:r.numerator,this.denominator)}},{key:"getImproperFraction",value:function getImproperFraction(){var r,a;return this.numerator&&this.denominator?(r=this.integer<0?this.integer*this.denominator-this.numerator:this.integer*this.denominator+this.numerator,a=this.denominator):this.denominator?(a=this.denominator,this.integer&&(r=this.integer*this.denominator)):this.integer&&(r=this.integer,a=1),new Fraction(r,a)}},{key:"getSimpleFraction",value:function getSimpleFraction(){return new Fraction(this.integer<0?-this.numerator:this.numerator,this.denominator)}},{key:"toInteger",value:function toInteger(){return~~this.toDecimal()}},{key:"toDecimal",value:function toDecimal(){return this.denominator&&0!==this.denominator?this.integer&&this.integer<0?this.integer-this.numerator/this.denominator:this.numerator/this.denominator+this.integer:this.integer}},{key:"setCorrectSign",value:function setCorrectSign(){this.numerator&&this.numerator<0&&this.denominator&&this.denominator<0?(this.numerator=-this.numerator,this.denominator=-this.denominator):this.integer&&this.integer<0&&this.numerator&&this.numerator<0?this.numerator=-this.numerator:this.integer&&this.integer<0&&this.denominator&&this.denominator<0?this.denominator=-this.denominator:this.numerator&&this.numerator<0?this.integer&&(this.integer=-this.integer,this.numerator=-this.numerator):this.denominator&&this.denominator<0&&(this.integer?(this.integer=-this.integer,this.denominator=-this.denominator):(this.numerator=-this.numerator,this.denominator=-this.denominator))}},{key:"toSimpleString",value:function toSimpleString(){var r=0;return 0===this.integer&&0===this.numerator&&null===this.denominator?"0":!this.integer||this.numerator||this.denominator?(this.integer&&this.denominator&&(r=this.integer<0?-this.integer*this.denominator:this.integer*this.denominator),this.numerator&&(r+=this.numerator),this.denominator?(this.integer<0?"-":"")+r+"/"+this.denominator:""):""+this.integer}},{key:"toSimpleHtml",value:function toSimpleHtml(r,a){var l={integer:"",simpleFraction:this.getImproperFraction(),allowZeroNumerator:!0};return this.toMixedHtml(r,l,a)}},{key:"toMixedParams",value:function toMixedParams(){var r=this.getSimpleFraction();return 0===r.toDecimal()?r=null:this.integer<0&&(r=r.multiply(-1)),{integer:this.integer,simpleFraction:r,allowZeroNumerator:!1}}},{key:"toMixedString",value:function toMixedString(){var r=this.toMixedParams(),a=(r.integer?r.integer:"")+(r.simpleFraction?" "+r.simpleFraction.toSimpleString():"");return a?a.trim():"0"}},{key:"toMixedHtml",value:function toMixedHtml(r,a,l){var O,S,E,T=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Fraction.fractionClass,j="",D="";return D=(a=a||this.toMixedParams()).integer,a.simpleFraction?(S=a.simpleFraction.numerator,E=a.simpleFraction.denominator):(S=0,E=0),S<0&&(S=-S,""===D||0===D?D="-":D>0&&(D=-D)),0!==S?(j+=S,E&&(j+="<hr/>"+E)):a.allowZeroNumerator&&E&&(j+="0<hr/>"+E),r&&(D=r+" "+D),""===j&&""===D&&(D=0),O={fractionClass:T,proper:j,integer:0===D&&""!==j?"":""+D},!0===l?O:Fraction.mixedFractionTemplate(O)}}]),Fraction}();_defineProperty(j,"IMPROPER_REG_EXP",/(\-?\d+)\s*\/\s*([1-9]\d*)/),_defineProperty(j,"MIXED_REG_EXP",/(\-?\d+)\s+(\d+)\s*\/\s*([1-9]\d*)/),_defineProperty(j,"fractionClass","lrn-numberline-fraction"),_defineProperty(j,"mixedFractionTemplate",T.a),_defineProperty(j,"gcd",(function(r,a){return a?j.gcd(a,r%a):r})),_defineProperty(j,"lcm",(function(r,a){var l=j.gcd(r,a);return Math.abs(r)/l*Math.abs(a)})),_defineProperty(j,"isNumber",(function(r){return!isNaN(parseFloat(r))&&isFinite(r)})),_defineProperty(j,"isFraction",(function(r){var a=j.IMPROPER_REG_EXP.exec(r),l=j.MIXED_REG_EXP.exec(r);return!!(l&&4===l.length||a&&3===a.length)})),_defineProperty(j,"isMixedFraction",(function(r){var a=j.MIXED_REG_EXP.exec(r);return!(!a||4!==a.length)})),_defineProperty(j,"isParsable",(function(r){return j.isNumber(r)||j.isFraction(r)})),_defineProperty(j,"areEqual",(function(r,a){return r.toDecimal()===a.toDecimal()})),_defineProperty(j,"areIdentical",(function(r,a){return r.numerator===a.numerator&&r.denominator===a.denominator&&r.integer===a.integer})),_defineProperty(j,"decimalToFraction",(function(r){if(r===parseInt(r))return{top:parseInt(r),bottom:1,display:parseInt(r)+"/1"};var a=-1!==r.toString().indexOf(".")?r.toString().replace(/\d+[.]/,""):0,l=Math.pow(10,a.toString().replace("-","").length);r>=1?a=+a+Math.floor(r)*l:r<=-1&&(a=+a+Math.ceil(r)*l);var O=Math.abs(j.gcd(a,l));return{top:a/O,bottom:l/O}})),a.a=j},function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=l(154),T=l(125),j=l.n(T),D=l(129),q=l(127),B=l(126),G=l.n(B),Z=l(149),$=l(143),Q=l(152),ee=l(194);function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function _extends(){return(_extends=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&(r[O]=l[O])}return r}).apply(this,arguments)}function _classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function _possibleConstructorReturn(r,a){return!a||"object"!==_typeof(a)&&"function"!=typeof a?_assertThisInitialized(r):a}function _getPrototypeOf(r){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function _assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _setPrototypeOf(r,a){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}function _defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}function modalWithToggle(r){return function(a){function _temp(){var r,a;_classCallCheck(this,_temp);for(var l=arguments.length,O=new Array(l),S=0;S<l;S++)O[S]=arguments[S];return _defineProperty(_assertThisInitialized(a=_possibleConstructorReturn(this,(r=_getPrototypeOf(_temp)).call.apply(r,[this].concat(O)))),"state",{modalIsOpen:!1}),_defineProperty(_assertThisInitialized(a),"closeModal",(function(){(0,a.props.onModal)(null),a.setState({modalIsOpen:!1})})),_defineProperty(_assertThisInitialized(a),"toggleModal",(function(){var r=a.props.onModal,l=!a.state.modalIsOpen;r(l),a.setState({modalIsOpen:l})})),a}return function _inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&_setPrototypeOf(r,a)}(_temp,a),function _createClass(r,a,l){return a&&_defineProperties(r.prototype,a),l&&_defineProperties(r,l),r}(_temp,[{key:"render",value:function render(){var a=this.props,l=this.state,O=a.isActive,S=a.visible,E=a.onApply,T=a.getContainer,D=l.modalIsOpen,q=G()({hide:!S});return j.a.createElement(j.a.Fragment,null,j.a.createElement(Q.a.Button,_extends({},a,{isActive:O,className:q,onClick:this.toggleModal})),j.a.createElement(r,_extends({},a,{relativeNode:T,modalIsOpen:D,onRequestClose:this.closeModal,onApply:E})))}}]),_temp}(j.a.Component)}var te=l(153);function create_typeof(r){return(create_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function create_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function create_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function create_possibleConstructorReturn(r,a){return!a||"object"!==create_typeof(a)&&"function"!=typeof a?create_assertThisInitialized(r):a}function create_getPrototypeOf(r){return(create_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function create_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function create_setPrototypeOf(r,a){return(create_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}function create_defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var ne=function(r){function CreateTableModal(){var r,a;create_classCallCheck(this,CreateTableModal);for(var l=arguments.length,O=new Array(l),S=0;S<l;S++)O[S]=arguments[S];return create_defineProperty(create_assertThisInitialized(a=create_possibleConstructorReturn(this,(r=create_getPrototypeOf(CreateTableModal)).call.apply(r,[this].concat(O)))),"state",{cols:3,rows:2}),create_defineProperty(create_assertThisInitialized(a),"onChange",(function(r,l){a.setState(create_defineProperty({},r,l))})),create_defineProperty(create_assertThisInitialized(a),"onApply",(function(r){var l=a.props,O=l.onApply,S=l.onRequestClose,E=a.state;O({cols:E.cols,rows:E.rows}),S(),r.preventDefault()})),create_defineProperty(create_assertThisInitialized(a),"onCloseWithoutApply",(function(){var r=a.props,l=r.onApply,O=r.onRequestClose;l(null),O()})),a}return function create_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&create_setPrototypeOf(r,a)}(CreateTableModal,r),function create_createClass(r,a,l){return a&&create_defineProperties(r.prototype,a),l&&create_defineProperties(r,l),r}(CreateTableModal,[{key:"render",value:function render(){var r=this,a=this.props,l=a.i18n,O=a.relativeNode,S=a.modalIsOpen,E=a.responseId,T=l.labels.editor.modals,D=this.state,q=D.cols,B=D.rows,G=q>0&&B>0&&q<100&&B<100;return j.a.createElement(te.a,{getRef:function getRef(a){return r.el=a},title:T.tableTitle,parentNode:O,modalIsOpen:S,onRequestClose:this.onCloseWithoutApply},j.a.createElement("div",{className:"lrn_clearfix"},j.a.createElement("div",{className:"lrn-wysihtml-modal-section"},j.a.createElement("label",{htmlFor:"".concat(E,"-table-columns")},j.a.createElement("span",{className:"lrn-label-title"},T.columns),j.a.createElement("input",{type:"number",id:"".concat(E,"-table-columns"),className:"lrn-editor-input",defaultValue:q,min:"1",max:"99",onChange:function onChange(a){return r.onChange("cols",a.target.value)}}))),j.a.createElement("div",{className:"lrn-wysihtml-modal-section"},j.a.createElement("label",{htmlFor:"".concat(E,"-table-rows")},j.a.createElement("span",{className:"lrn-label-title"},T.rows),j.a.createElement("input",{type:"number",id:"".concat(E,"-table-rows"),className:"lrn-editor-input",defaultValue:B,min:"1",max:"99",onChange:function onChange(a){return r.onChange("rows",a.target.value)}})))),j.a.createElement("hr",null),j.a.createElement("div",{className:"lrn-wysihtml-modal-controls"},j.a.createElement("button",{className:"lrn_btn lrn_btn_blue","data-lrn-action":"apply",onClick:this.onApply,disabled:!G,type:"button"},T.apply)))}}]),CreateTableModal}(j.a.Component);function edit_typeof(r){return(edit_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function edit_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function edit_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function edit_possibleConstructorReturn(r,a){return!a||"object"!==edit_typeof(a)&&"function"!=typeof a?edit_assertThisInitialized(r):a}function edit_getPrototypeOf(r){return(edit_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function edit_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function edit_setPrototypeOf(r,a){return(edit_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}function edit_defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var re=function(r){function EditTableModal(){var r,a;edit_classCallCheck(this,EditTableModal);for(var l=arguments.length,O=new Array(l),S=0;S<l;S++)O[S]=arguments[S];return edit_defineProperty(edit_assertThisInitialized(a=edit_possibleConstructorReturn(this,(r=edit_getPrototypeOf(EditTableModal)).call.apply(r,[this].concat(O)))),"onApply",(function(r,l){var O=a.props,S=O.onApply,E=O.onRequestClose;S(l),E(),r.preventDefault()})),a}return function edit_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&edit_setPrototypeOf(r,a)}(EditTableModal,r),function edit_createClass(r,a,l){return a&&edit_defineProperties(r.prototype,a),l&&edit_defineProperties(r,l),r}(EditTableModal,[{key:"render",value:function render(){var r=this,a=this.props,l=a.i18n,O=a.relativeNode,S=a.modalIsOpen,E=a.onRequestClose,T=l.labels.editor.modals;return j.a.createElement(te.a,{getRef:function getRef(a){return r.el=a},title:T.tableTitle,parentNode:O,className:"lrn-wysihtml-modal-table-edit",modalIsOpen:S,onRequestClose:E},j.a.createElement("div",{className:"lrn_clearfix"},j.a.createElement("div",{className:"lrn-wysihtml-modal-section"},j.a.createElement("div",null,j.a.createElement("span",{className:"lrn-label-title"},T.columns)),j.a.createElement("ul",null,j.a.createElement("li",null,j.a.createElement("button",{type:"button",className:"lrn_btn",onMouseDown:function onMouseDown(a){return r.onApply(a,{type:"addTableCells",params:"before"})}},T.insertColumnBefore)),j.a.createElement("li",null,j.a.createElement("button",{type:"button",className:"lrn_btn",onMouseDown:function onMouseDown(a){return r.onApply(a,{type:"addTableCells",params:"after"})}},T.insertColumnAfter)),j.a.createElement("li",null,j.a.createElement("button",{type:"button",className:"lrn_btn",onMouseDown:function onMouseDown(a){return r.onApply(a,{type:"deleteTableCells",params:"column"})}},T.deleteColumn)))),j.a.createElement("div",{className:"lrn-wysihtml-modal-section"},j.a.createElement("div",null,j.a.createElement("span",{className:"lrn-label-title"},T.rows)),j.a.createElement("ul",null,j.a.createElement("li",null,j.a.createElement("button",{type:"button",className:"lrn_btn",onMouseDown:function onMouseDown(a){return r.onApply(a,{type:"addTableCells",params:"above"})}},T.insertRowAbove)),j.a.createElement("li",null,j.a.createElement("button",{type:"button",className:"lrn_btn",onMouseDown:function onMouseDown(a){return r.onApply(a,{type:"addTableCells",params:"below"})}},T.insertRowBelow)),j.a.createElement("li",null,j.a.createElement("button",{type:"button",className:"lrn_btn",onMouseDown:function onMouseDown(a){return r.onApply(a,{type:"deleteTableCells",params:"row"})}},T.deleteRow))))),j.a.createElement("hr",null),j.a.createElement("div",{className:"lrn-wysihtml-modal-controls"},j.a.createElement("button",{type:"button",className:"lrn_btn  lrn_btn_danger",onMouseDown:function onMouseDown(a){return r.onApply(a,{type:"deleteTable"})}},T.deleteTable)))}}]),EditTableModal}(j.a.Component),oe={CreateTableButton:modalWithToggle(ne),EditTableButton:modalWithToggle(re)},ie=l(252),ae=l.n(ie),se=l(328),le=l.n(se),ce=l(218),ue=l(131);function imagePropsUtil_defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}function generateImageAttributes(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{className:"class"},l=r.url,O=r.size,S=r.naturalWidth,E=r.naturalHeight,T=imagePropsUtil_defineProperty({src:l,width:getImageWidthFromSize(O,S,E)},a.className,G()(imagePropsUtil_defineProperty({},"lrn-size-".concat(O),!!O)));return r.assetPath&&(T["data-asset-path"]=r.assetPath),T}function getImageWidthFromSize(r,a,l){var O,S=a<l,E=S?l:a;((O=r===$.d.SMALL?Math.min(E,$.c.SMALL):r===$.d.MEDIUM?Math.min(E,$.c.MEDIUM):r===$.d.LARGE?Math.min(E,$.c.LARGE):Math.min(E,$.c.FULL_SIZE))||(O=0),S)&&(O=parseInt(O*(a/l),10));return O}var pe=l(275);function editor_extends(){return(editor_extends=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&(r[O]=l[O])}return r}).apply(this,arguments)}function _slicedToArray(r,a){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,a){if(!(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r)))return;var l=[],O=!0,S=!1,E=void 0;try{for(var T,j=r[Symbol.iterator]();!(O=(T=j.next()).done)&&(l.push(T.value),!a||l.length!==a);O=!0);}catch(r){S=!0,E=r}finally{try{O||null==j.return||j.return()}finally{if(S)throw E}}return l}(r,a)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ImageSizeSelection(r){var a=r.naturalWidth,l=r.naturalHeight,O=r.labels,E=r.size,T=r.responseId,D=function getAvailableSizes(r,a){var l=r<a?a:r;if(l<=$.c.SMALL)return null;var O=[$.d.SMALL];return l>$.c.MEDIUM&&O.push($.d.MEDIUM),l>$.c.LARGE&&O.push($.d.LARGE),O.push($.d.FULL_SIZE),O}(a,l);if(!D)return null;var q=S.a.mapObject(O.imageSize,(function(r,O){return function getImageSizeLabel(r){var a=r.label,l=r.size,O=r.naturalWidth,S=r.naturalHeight,E=O/S,T=getImageWidthFromSize(l,O,S)||O,j=parseInt(T/E,10);return Object(ue.a)(a,{width:T,height:j})}({label:r,size:O,naturalWidth:a,naturalHeight:l})}));return j.a.createElement("div",{className:"lrn-image-properties"},j.a.createElement("div",{className:"lrn-margin-top-md"},j.a.createElement("label",{htmlFor:"".concat(T,"-image-size"),className:"lrn-margin-right-md"},j.a.createElement("span",{className:"lrn-label-title lrn-display-block"},O.imageSize.title),j.a.createElement("select",{id:"".concat(T,"-image-size"),value:E,className:"lrn-editor-input",onChange:function onChange(O){return function onSizeChange(O){r.onChange({size:O,width:getImageWidthFromSize(O,a,l)})}(O.target.value)},onBlur:S.a.noop},S.a.map(D,(function(r){return j.a.createElement("option",{key:r,value:r},q[r])}))))))}function ZoomableImage(r){var a=r.naturalWidth,l=r.naturalHeight,O=r.containerDimensions.height,S=a>O&&l>O,E=_slicedToArray(Object(T.useState)(!1),2),D=E[0],q=E[1],B={onClick:function onClick(){return q(S&&!D)}},Z=generateImageAttributes(r,{className:"className"});return Z.className=G()({"lrn-img-zoom-in":S&&D,"lrn-img-zoom-out":S&&!D},Z.className),j.a.createElement("img",editor_extends({alt:""},B,Z))}function ImageEditor(r){var a=r.children,l=Object(T.useRef)(null),O=_slicedToArray(Object(T.useState)(0),2),S=O[0],E=O[1];return Object(T.useLayoutEffect)((function(){l.current&&l.current.clientHeight!==S&&E(l.current.clientHeight)})),j.a.createElement("div",null,j.a.createElement("div",{className:"lrn-image-uploader-preview lrn-margin-top-md",ref:l},j.a.createElement(ZoomableImage,editor_extends({containerDimensions:{height:S}},r))),a,j.a.createElement(ImageSizeSelection,r))}var de=l(21),fe={LONGTEXTV2_UPDATE_WORD_COUNT:"longtextv2:update:wordcount",LONGTEXTV2_UPDATE_WORD_COUNT_EXCEEDED:"longtextv2:update:wordcountexceeded",LONGTEXTV2_UPDATE_WORD_LIMIT_VISIBILITY:"longtextv2:update:wordlimitvisibility",LONGTEXTV2_DISABLE_EDITOR:"longtextv2:disable:editor"};var he={actionTypes:fe,compressImage:function compressImage(r,a){return function(l,O,S){return S.dataService.compressImage(r,a)}},uploadImage:function actions_uploadImage(r,a){return function(l,O,S){return S.dataService.uploadImage(r,a)}},updateValue:function updateValue(r){return function(a,l,O){var S=O.dataService.getResponse();if((S&&S.value)!==(r=O.dataService.formatValue(r))){a({type:fe.LONGTEXTV2_UPDATE_WORD_COUNT,payload:{value:r}});var E=l().longTextV2.footer.wordCount;a(de.a.updateResponseValue({value:r,wordCount:E}));var T=O.dataService.getWordCountExceeded();a({type:fe.LONGTEXTV2_UPDATE_WORD_COUNT_EXCEEDED,payload:{value:T}});var j=O.dataService.getWordLimitVisibility();a({type:fe.LONGTEXTV2_UPDATE_WORD_LIMIT_VISIBILITY,payload:{value:j}})}}},disableEditor:function disableEditor(r){return{type:fe.LONGTEXTV2_DISABLE_EDITOR,payload:{value:r}}}};function uploadModal_typeof(r){return(uploadModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function ownKeys(r,a){var l=Object.keys(r);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(r);a&&(O=O.filter((function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),l.push.apply(l,O)}return l}function uploadModal_extends(){return(uploadModal_extends=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&(r[O]=l[O])}return r}).apply(this,arguments)}function uploadModal_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function uploadModal_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function uploadModal_possibleConstructorReturn(r,a){return!a||"object"!==uploadModal_typeof(a)&&"function"!=typeof a?uploadModal_assertThisInitialized(r):a}function uploadModal_getPrototypeOf(r){return(uploadModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function uploadModal_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function uploadModal_setPrototypeOf(r,a){return(uploadModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}function uploadModal_defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var me={url:null,width:0,naturalWidth:0,naturalHeight:0,size:$.d.FULL_SIZE,rotation:0,loading:!1,error:null,warning:null},ge=function(r){function UploadImageModal(){var r,a;uploadModal_classCallCheck(this,UploadImageModal);for(var l=arguments.length,O=new Array(l),E=0;E<l;E++)O[E]=arguments[E];return uploadModal_defineProperty(uploadModal_assertThisInitialized(a=uploadModal_possibleConstructorReturn(this,(r=uploadModal_getPrototypeOf(UploadImageModal)).call.apply(r,[this].concat(O)))),"file",null),uploadModal_defineProperty(uploadModal_assertThisInitialized(a),"state",S.a.extend({},me)),uploadModal_defineProperty(uploadModal_assertThisInitialized(a),"reset",(function(){a.setState(me)})),uploadModal_defineProperty(uploadModal_assertThisInitialized(a),"cleanUpAndClose",(function(){a.file=null,a.props.onRequestClose(),a.reset()})),uploadModal_defineProperty(uploadModal_assertThisInitialized(a),"onImageRotationClick",(function(){var r=uploadModal_assertThisInitialized(a),l=r.file,O=r.state,S=r.props,E=O.rotation;return E>-270?E-=90:E=0,a.setState({loading:!0}),S.compressImage(l,{rotation:E}).then(ce.c).then((function(r){a.setState({loading:!1,url:r.src,width:r.width,naturalWidth:r.width,naturalHeight:r.height,rotation:E})}))})),uploadModal_defineProperty(uploadModal_assertThisInitialized(a),"startImageSelection",(function(){a.uploadAborted=!1,ae()({multiple:!1,accept:"image/*"}).then((function(r){a.processSelectedImage(r[0])}))})),uploadModal_defineProperty(uploadModal_assertThisInitialized(a),"onImageEditorChanged",(function(r){var l=r.width,O=r.size;a.setState({width:l,size:O})})),uploadModal_defineProperty(uploadModal_assertThisInitialized(a),"onCancelButtonClicked",(function(){a.uploadAborted=!0,a.cleanUpAndClose()})),uploadModal_defineProperty(uploadModal_assertThisInitialized(a),"onUploadButtonClicked",(function(r){var l=a.state,O=l.rotation,S=l.naturalWidth,E=a.props.uploadImage,T={rotation:O};return S>$.c.FULL_SIZE&&(T.width=$.c.FULL_SIZE),r.preventDefault(),r.stopPropagation(),a.setState({loading:!0}),E(a.file,T).then((function(r){a.uploadAborted||a.insertImage(r)})).catch((function(){a.showProcessingImageError()}))})),a}return function uploadModal_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&uploadModal_setPrototypeOf(r,a)}(UploadImageModal,r),function uploadModal_createClass(r,a,l){return a&&uploadModal_defineProperties(r.prototype,a),l&&uploadModal_defineProperties(r,l),r}(UploadImageModal,[{key:"componentDidUpdate",value:function componentDidUpdate(r){var a=this.props,l=a.modalIsOpen,O=a.selectedFile;r.selectedFile!==O&&(this.file=null,this.uploadAborted=!1,O&&l&&this.processSelectedImage(O))}},{key:"render",value:function render(){var r=this,a=this.props,l=a.i18n,O=a.relativeNode,E=a.responseId,T=a.modalIsOpen,D=this.state,q=D.url,B=D.loading,G=D.warning,Z=D.error,$=!(!T||!(this.file||B||Z||G)),Q=l.labels.editor.modals;return j.a.createElement(te.a,{className:"lrn-full-width",getRef:function getRef(a){return r.el=a},title:Q.imageTitle,parentNode:O,modalIsOpen:$,onRequestClose:this.onCancelButtonClicked},j.a.createElement("div",{className:"lrn-image-editor-wrapper"},this.getMessage(),Z&&j.a.createElement("div",{className:"lrn-config-btn-upload-wrapper"},j.a.createElement("button",{className:"btn lrn_btn_blue lrn-imageupload-config-btn-upload",type:"button",onClick:this.startImageSelection},Q.uploadText)),q&&j.a.createElement(ImageEditor,uploadModal_extends({},this.state,{labels:Q,responseId:E,onChange:this.onImageEditorChanged}),j.a.createElement("button",{className:"lrn_btn lrn-btn-outline lrn-margin-right-md lrn-margin-top-md",onClick:this.startImageSelection,disabled:B},j.a.createElement("span",{className:"lrn-icon-image lrn-margin-right-md"}),Q.imageReplace),j.a.createElement("button",{className:"lrn_btn lrn-btn-outline lrn-margin-top-md",onClick:this.onImageRotationClick,disabled:B},j.a.createElement("span",{className:"lrn-icon-image-rotation lrn-margin-right-md"}),Q.imageRotate)),B&&j.a.createElement("div",{className:"lrn-loader-wrapper"},j.a.createElement(pe.a,null))),j.a.createElement("hr",null),j.a.createElement("div",{className:"lrn-wysihtml-modal-controls"},j.a.createElement("button",{className:"lrn_btn lrn_btn_blue lrn-margin-right-md","data-lrn-action":"upload",onClick:this.onUploadButtonClicked,disabled:S.a.isEmpty(q)||B,type:"button"},Q.upload),j.a.createElement("button",{className:"lrn_btn",onClick:this.onCancelButtonClicked,type:"button"},Q.cancel)))}},{key:"getMessage",value:function getMessage(){var r=this.state,a=r.error,l=r.warning;if(!a&&!l)return null;var O=this.props.i18n.labels.editor.messages,S=a?"error":"warning",E=a?O.failedLoadingImage:O.imageHasBeenOptimized;return j.a.createElement(le.a,{className:"lrn-margin-bottom-none lrn-ds-message",type:S,iconClassMapping:{warning:"lrn-icon-warning",error:"lrn-icon-info"},ariaHidden:!0},E)}},{key:"showProcessingImageError",value:function showProcessingImageError(){this.file=null,this.uploadAborted=!1,this.setState({loading:!1,url:null,error:!0})}},{key:"processSelectedImage",value:function processSelectedImage(r){var a,l=this;return this.setState({loading:!0,error:!1}),Object(ce.c)(r).then((function(l){return a=l.width,r})).then((function processImage(){return l.shouldCompress(r,a)?(l.setState({warning:l.shouldShowWarning(r,a)}),a>$.c.FULL_SIZE&&(O={width:$.c.FULL_SIZE}),l.props.compressImage(r,{rotation:0,compressOptions:O})):(l.setState({warning:null,error:null}),Promise.resolve(r));var O})).then((function(r){return l.file=r,Object(ce.c)(r)})).then((function(r){return l.setState({loading:!1,url:r.src,width:r.width,naturalWidth:r.width,naturalHeight:r.height,rotation:0})})).catch((function(){l.showProcessingImageError()}))}},{key:"insertImage",value:function insertImage(r){var a=r.url,l=r.assetPath;(0,this.props.onApply)(generateImageAttributes(function _objectSpread(r){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?arguments[a]:{};a%2?ownKeys(Object(l),!0).forEach((function(a){uploadModal_defineProperty(r,a,l[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):ownKeys(Object(l)).forEach((function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(l,a))}))}return r}({},this.state,{url:a,assetPath:l}))),this.cleanUpAndClose()}},{key:"shouldCompress",value:function shouldCompress(r,a){return r.size>this.props.maxFileSize||a>$.c.FULL_SIZE}},{key:"shouldShowWarning",value:function shouldShowWarning(r,a){return r.size>this.props.warningFileSize||a>$.c.FULL_SIZE}}]),UploadImageModal}(j.a.PureComponent),ye=q.b((function(r){return{maxFileSize:r.longTextV2.maxFileSize,warningFileSize:r.longTextV2.warningFileSize}}),(function(r){return{compressImage:D.b(he.compressImage,r),uploadImage:D.b(he.uploadImage,r)}}))(ge);function insertImageButton_extends(){return(insertImageButton_extends=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&(r[O]=l[O])}return r}).apply(this,arguments)}function insertImageButton_slicedToArray(r,a){return function insertImageButton_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function insertImageButton_iterableToArrayLimit(r,a){if(!(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r)))return;var l=[],O=!0,S=!1,E=void 0;try{for(var T,j=r[Symbol.iterator]();!(O=(T=j.next()).done)&&(l.push(T.value),!a||l.length!==a);O=!0);}catch(r){S=!0,E=r}finally{try{O||null==j.return||j.return()}finally{if(S)throw E}}return l}(r,a)||function insertImageButton_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function editorModal_typeof(r){return(editorModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function editorModal_extends(){return(editorModal_extends=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&(r[O]=l[O])}return r}).apply(this,arguments)}function editorModal_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function editorModal_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function editorModal_possibleConstructorReturn(r,a){return!a||"object"!==editorModal_typeof(a)&&"function"!=typeof a?editorModal_assertThisInitialized(r):a}function editorModal_getPrototypeOf(r){return(editorModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function editorModal_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function editorModal_setPrototypeOf(r,a){return(editorModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}function editorModal_defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var _e={url:null,align:"",width:0,naturalWidth:0,size:$.d.FULL_SIZE},be={InsertImageButton:function InsertImageButton(r){var a=insertImageButton_slicedToArray(Object(T.useState)(!1),2),l=a[0],O=a[1],E=insertImageButton_slicedToArray(Object(T.useState)(null),2),D=E[0],q=E[1],B=r.isActive,Z=r.visible,ee=r.onApply,te=r.getContainer,ne=r.onModal,re=r.editableElementSelector,oe=G()({hide:!Z}),ie=S.a.debounce((function(){q(null),ae()({multiple:!1,accept:"image/*"}).then((function(r){ne(!0),O(!0),q(r[0])}))}),10,!0),se=function(){var r=te();if(r){var a=r.querySelector(re),l=a&&a.querySelectorAll("img");return!!(l&&l.length>=$.e)}return!1}();return j.a.createElement(j.a.Fragment,null,j.a.createElement(Q.a.Button,insertImageButton_extends({},r,{isActive:B,disabled:se,className:oe,onClick:ie})),j.a.createElement(ye,insertImageButton_extends({},r,{selectedFile:D,relativeNode:te,modalIsOpen:l,onRequestClose:function closeModal(){ne(null),q(null),O(!1)},onApply:ee})))},EditImageButton:modalWithToggle(function(r){function ImageEditorModal(){var r,a;editorModal_classCallCheck(this,ImageEditorModal);for(var l=arguments.length,O=new Array(l),E=0;E<l;E++)O[E]=arguments[E];return editorModal_defineProperty(editorModal_assertThisInitialized(a=editorModal_possibleConstructorReturn(this,(r=editorModal_getPrototypeOf(ImageEditorModal)).call.apply(r,[this].concat(O)))),"state",S.a.extend({},_e)),editorModal_defineProperty(editorModal_assertThisInitialized(a),"cleanUpAndClose",(function(){a.setState(_e),a.props.onRequestClose()})),editorModal_defineProperty(editorModal_assertThisInitialized(a),"onImageEditorChanged",(function(r){var l=r.width,O=r.size;a.setState({width:l,size:O})})),editorModal_defineProperty(editorModal_assertThisInitialized(a),"onApply",(function(r){var l=a.props.onApply,O=generateImageAttributes(a.state);r.preventDefault(),r.stopPropagation(),l(O),a.cleanUpAndClose()})),a}return function editorModal_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&editorModal_setPrototypeOf(r,a)}(ImageEditorModal,r),function editorModal_createClass(r,a,l){return a&&editorModal_defineProperties(r.prototype,a),l&&editorModal_defineProperties(r,l),r}(ImageEditorModal,[{key:"componentDidUpdate",value:function componentDidUpdate(){var r=this.props,a=r.image;r.modalIsOpen&&a&&this.state.url!==a.url&&this.setState(S.a.extend({},_e,a))}},{key:"render",value:function render(){var r=this,a=this.state.url,l=this.props,O=l.i18n,S=l.relativeNode,E=l.responseId,T=l.modalIsOpen,D=O.labels.editor.modals;return j.a.createElement(j.a.Fragment,null,j.a.createElement(te.a,{className:"lrn-full-width",getRef:function getRef(a){return r.el=a},title:D.imageTitle,parentNode:S,modalIsOpen:T,onRequestClose:this.cleanUpAndClose},a&&j.a.createElement(j.a.Fragment,null,j.a.createElement(ImageEditor,editorModal_extends({},this.state,{labels:D,responseId:E,onChange:this.onImageEditorChanged})),j.a.createElement("hr",null),j.a.createElement("div",{className:"lrn-wysihtml-modal-controls"},j.a.createElement("button",{className:"lrn_btn lrn_btn_blue lrn-margin-right-md","data-lrn-action":"apply",onClick:this.onApply,type:"button"},D.apply),j.a.createElement("button",{className:"lrn_btn","data-lrn-action":"cancel",onClick:this.cleanUpAndClose,type:"button"},D.cancel)))))}}]),ImageEditorModal}(j.a.PureComponent))};function subToolbar_extends(){return(subToolbar_extends=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&(r[O]=l[O])}return r}).apply(this,arguments)}var ve=function getImageFromProps(r){var a=S.a.findWhere(r.activeActions,{action:"insertImage"}),l=a&&a.target;return l?function getImageProps(r){var a,l,O,S=r.naturalWidth,E=r.naturalHeight,T=r.width,j=r.src,D=r.className;return{naturalWidth:S,naturalHeight:E,url:j,width:T||0,size:(a=D,l="lrn-size-(\\S+)",O=new RegExp(l,"g").exec(a),(O&&O.length>=2?O[1]:"")||$.d.FULL_SIZE)}}(l):null};function ImageEditorSubControl(r){var a=r.image,l=r.i18n,O=r.onClick,S=r.onModal,E=l.labels.editor.toolbar,T=!!a;return j.a.createElement(j.a.Fragment,null,j.a.createElement(be.EditImageButton,subToolbar_extends({},r,{name:"editImage",image:a,getImage:function getImage(){return a},icon:$.a.image.icons.edit,label:E.editImage,isActive:!1,visible:!0,disabled:!T,onApply:function onApply(r){return O({type:"insertImage",params:r})},onModal:function onModal(r){return S(r?"editImage":null)}})),j.a.createElement(Q.a.Button,subToolbar_extends({},r,{name:"preview",icon:$.a.image.icons.preview,label:E.previewImage,disabled:!T,onClick:function onClick(){return O({type:"previewImage",url:a.url})}})),j.a.createElement(Q.a.Button,subToolbar_extends({},r,{name:"delete",icon:$.a.image.icons.delete,label:E.deleteImage,disabled:!T,onClick:function onClick(){return O({type:"deleteImage"})}})))}function SubToolbar(r){var a=ve(r),l=G()({in:!!a},"lrn-sub-toolbar lrn-wysihtml-toolbar lrn-animation-dropdown");return j.a.createElement("div",{className:l},S.a.contains(r.formattingOptions,"image")&&j.a.createElement(ImageEditorSubControl,subToolbar_extends({},r,{image:a})))}var we=l(312);function toolbar_typeof(r){return(toolbar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function toolbar_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function toolbar_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function toolbar_possibleConstructorReturn(r,a){return!a||"object"!==toolbar_typeof(a)&&"function"!=typeof a?toolbar_assertThisInitialized(r):a}function toolbar_getPrototypeOf(r){return(toolbar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function toolbar_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function toolbar_setPrototypeOf(r,a){return(toolbar_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}function toolbar_defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r)){for(var a=0,l=new Array(r.length);a<r.length;a++)l[a]=r[a];return l}}(r)||function _iterableToArray(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function toolbar_extends(){return(toolbar_extends=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&(r[O]=l[O])}return r}).apply(this,arguments)}var xe="ArrowRight",Oe="ArrowLeft";function getControls(r,a){return S.a.reduce(r.formattingOptions,(function(l,O){var S=$.a[O],E=l.length,T={control:S,key:O,index:E,props:r,selectedIndex:a};if(S&&(l.push(getControl(T)),"table"===O)){var j={control:$.a.editTable,key:"editTable",index:E+1,props:r,selectedIndex:a};l.push(getControl(j))}return l}),[])}function getControl(r){var a=r.control,l=r.key,O=r.index,E=r.props,T=r.selectedIndex,D=E.i18n,q=E.isChemistry,B=E.disabled,G=E.activeModal,Z=E.formulaEditorHorizontalLayout,$=E.formulaEditorNumberPad,te=E.formulaEditorSymbols,ne=E.formulaEditorTextBlocks,re=E.modalData,ie=E.activeActions,ae=E.onClick,se=E.onModal,le=E.onMouseEnter,ce=E.onMouseLeave,ue=E.characterMapModalClassName,pe=E.focusButtonInsideToolbar,de=D.labels.ariaLabel,fe=a.icon,he=a.type,me=D.labels.editor.toolbar[l],ge=!!S.a.findWhere(ie,{action:l}),ye="".concat(l).concat(O),_e=O===T?0:-1;switch(he){case"divider":return j.a.createElement(Q.a.Divider,{key:ye,name:he});case"button":return j.a.createElement(Q.a.Button,toolbar_extends({},E,{key:ye,name:l,icon:fe,label:me,tabIndex:_e,isActive:ge,disabled:B,onClick:function onClick(){return ae({type:l})}}));case"charactermap":var ve=E.characterMap,xe=!0===ve?_toConsumableArray(D.labels.characterMapCharacters):ve;return j.a.createElement(ee.a.CharacterMapButton,{key:ye,label:D.labels.characterMapIcon,title:D.labels.characterMapTitle,disabled:B,characters:xe,className:"lrn-wysihtml-toolbar",modalClassName:ue,tabIndex:_e,recoverFocus:pe,onMouseEnter:function onMouseEnter(){return le(D.labels.characterMapTitle)},onMouseLeave:ce,onSelect:function onSelect(r){return ae({type:"characterMap",params:r})}});case"characterMathMap":var Oe=_toConsumableArray(D.labels.characterMapMathCharacters);return j.a.createElement(ee.a.CharacterMapButton,{key:ye,label:D.labels.characterMapMathIcon,title:D.labels.characterMathMapTitle,onMouseEnter:function onMouseEnter(){return le(D.labels.characterMathMapTitle)},onMouseLeave:ce,disabled:B,characters:Oe,tabIndex:_e,recoverFocus:pe,className:"lrn-wysihtml-toolbar",modalClassName:ue,onSelect:function onSelect(r){return ae({type:"characterMap",params:r})}});case"createTable":var Ce=S.a.findWhere(ie,{action:"editTable"});return j.a.createElement(oe.CreateTableButton,toolbar_extends({},E,{key:ye,name:l,icon:fe,tabIndex:_e,label:me,disabled:B,visible:!Ce,onApply:function onApply(r){return ae({type:"createTable",params:r})},onModal:function onModal(r){return se(r?"createTable":null)}}));case"editTable":return j.a.createElement(oe.EditTableButton,toolbar_extends({},E,{key:ye,name:l,icon:fe,tabIndex:_e,label:D.labels.editor.editTable,isActive:ge,visible:ge,disabled:B,onApply:function onApply(r){return ae({type:r.type,params:r.params})},onModal:function onModal(r){return se(r?"editTable":null)}}));case"insertImage":return j.a.createElement(be.InsertImageButton,{i18n:D,getContainer:E.getContainer,editableElementSelector:E.editableElementSelector,responseId:E.responseId,key:ye,name:"insertImage",icon:fe,tabIndex:_e,label:me,visible:!0,onMouseEnter:le,onMouseLeave:ce,onApply:function onApply(r){return ae({type:"insertImage",params:r})},onModal:function onModal(r){return se(r?"insertImage":null)}});case"formulaEditor":return j.a.createElement(we.a.FormulaEditorButton,{activeModal:G,className:"lrn-wysihtml-toolbar",disabled:B,getContainer:E.getContainer,horizontalLayout:Z,i18n:D,icon:fe,isActive:ge,isChemistry:q,key:ye,modalData:re,onApply:function onApply(r){return ae(r)},onModal:se,onMouseEnter:function onMouseEnter(){return le(de.mathKeyboard.title)},onMouseLeave:ce,tabIndex:_e,symbols:te,textBlocks:ne,numberPad:$,title:de.mathKeyboard.title});default:return null}}function lrnToolbar_extends(){return(lrnToolbar_extends=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&(r[O]=l[O])}return r}).apply(this,arguments)}var Ce={WYSIHTML:function withWYSIHTML(r){return function(a){return a.isReviewState?null:j.a.createElement(r,lrnToolbar_extends({},a,{className:"lrn-wysihtml-toolbar",activeClassName:"wysihtml-command-active",role:"group"}))}}(function(r){function Toolbar(){var r,a;toolbar_classCallCheck(this,Toolbar);for(var l=arguments.length,O=new Array(l),S=0;S<l;S++)O[S]=arguments[S];return toolbar_defineProperty(toolbar_assertThisInitialized(a=toolbar_possibleConstructorReturn(this,(r=toolbar_getPrototypeOf(Toolbar)).call.apply(r,[this].concat(O)))),"state",{index:0}),toolbar_defineProperty(toolbar_assertThisInitialized(a),"handleKeyDown",(function(r){r.stopPropagation();var l=r.key;if(l===Oe||l===xe){var O=a.rovingTabIndex(l);a.setState({index:O})}})),toolbar_defineProperty(toolbar_assertThisInitialized(a),"rovingTabIndex",(function(r){for(var l=toolbar_assertThisInitialized(a),O=l.props,S=l.state,E=getControls(O,S.index),T=a.moveIndex(S.index,r,E.length);"divider"===E[T].props.name||"editTable"===E[T].props.name;)T=a.moveIndex(T,r,E.length);return T})),toolbar_defineProperty(toolbar_assertThisInitialized(a),"moveIndex",(function(r,a,l){var O=r;return a===Oe?O--:a===xe&&O++,Math.max(Math.min(O,l-1),0)})),a}return function toolbar_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&toolbar_setPrototypeOf(r,a)}(Toolbar,r),function toolbar_createClass(r,a,l){return a&&toolbar_defineProperties(r.prototype,a),l&&toolbar_defineProperties(r,l),r}(Toolbar,[{key:"componentDidUpdate",value:function componentDidUpdate(r,a){this.state.index!==a.index&&this.props.focusButtonInsideToolbar()}},{key:"render",value:function render(){var r=this.props,a=this.state,l=r.i18n.labels.ariaLabel,O=getControls(r,a.index),S=G()({"lrn-toolbar-rtl":r.toolbarRtlEditingMode},r.className,"lrn_clearfix");return j.a.createElement("div",{className:"lrn-toolbar"},j.a.createElement("div",{ref:r.toolbarRef,onKeyDown:this.handleKeyDown,className:S,role:"toolbar","aria-label":l.longTextV2.toolbar},O),j.a.createElement(SubToolbar,r))}}]),Toolbar}(j.a.Component))};function preview_typeof(r){return(preview_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function preview_ownKeys(r,a){var l=Object.keys(r);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(r);a&&(O=O.filter((function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),l.push.apply(l,O)}return l}function preview_objectSpread(r){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?arguments[a]:{};a%2?preview_ownKeys(Object(l),!0).forEach((function(a){preview_defineProperty(r,a,l[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):preview_ownKeys(Object(l)).forEach((function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(l,a))}))}return r}function preview_extends(){return(preview_extends=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&(r[O]=l[O])}return r}).apply(this,arguments)}function preview_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function preview_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function preview_createClass(r,a,l){return a&&preview_defineProperties(r.prototype,a),l&&preview_defineProperties(r,l),r}function preview_possibleConstructorReturn(r,a){return!a||"object"!==preview_typeof(a)&&"function"!=typeof a?preview_assertThisInitialized(r):a}function preview_getPrototypeOf(r){return(preview_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function preview_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function preview_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&preview_setPrototypeOf(r,a)}function preview_setPrototypeOf(r,a){return(preview_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}function preview_defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var Se={fullSize:!1,scrollPosition:null,zoomable:!1,imageSizeText:""},Pe=function(r){function ImagePreview(){var r,a;preview_classCallCheck(this,ImagePreview);for(var l=arguments.length,O=new Array(l),S=0;S<l;S++)O[S]=arguments[S];return preview_defineProperty(preview_assertThisInitialized(a=preview_possibleConstructorReturn(this,(r=preview_getPrototypeOf(ImagePreview)).call.apply(r,[this].concat(O)))),"state",preview_objectSpread({},Se)),preview_defineProperty(preview_assertThisInitialized(a),"onImageClick",(function(r){if(r.preventDefault(),r.stopPropagation(),a.state.fullSize)a.onToggleFullSize();else{var l=r.currentTarget.getBoundingClientRect(),O=(r.clientX-l.left)/l.width,S=(r.clientY-l.top)/l.height;a.setState({fullSize:!0},(function(){a.scrollToPosition(O,S)}))}})),preview_defineProperty(preview_assertThisInitialized(a),"validateImageSize",(function(){if(a.image&&a.imageWrapper){var r=a.props.labels,l=a.image,O=l.naturalWidth,S=l.naturalHeight,E=a.imageWrapper.getBoundingClientRect();a.setState({imageSizeText:Object(ue.a)(r.imagePreviewText,{width:O,height:S}),zoomable:O>E.width||S>E.height})}})),preview_defineProperty(preview_assertThisInitialized(a),"close",(function(){a.setState(Se),a.props.onClose()})),preview_defineProperty(preview_assertThisInitialized(a),"onToggleFullSize",(function(){a.setState({fullSize:!a.state.fullSize})})),a}return preview_inherits(ImagePreview,r),preview_createClass(ImagePreview,[{key:"render",value:function render(){var r=this,a=this.props,l=this.state,O=a.url,S=a.labels,E=l.fullSize,T=l.zoomable,D=l.imageSizeText;if(!O)return null;var q=G()({"full-size":E,zoomable:T}),B=T?{onClick:this.onImageClick}:{};return j.a.createElement("div",{className:"lrn-image-preview"},j.a.createElement("div",{className:"lrn-image-preview-toolbar"},j.a.createElement("div",{className:"lrn-image-preview-size-label lrn-margin-top-md"},D),j.a.createElement("div",{className:"lrn-image-preview-control"},j.a.createElement("a",{className:"lrn_btn lrn-btn-outline snow-theme lrn-margin-top-md lrn-margin-right-md",href:O,target:"_blank"},S.openImageURL),T&&j.a.createElement("button",{className:"lrn_btn lrn-btn-outline snow-theme lrn-margin-top-md",onClick:this.onToggleFullSize,type:"button"},E?S.zoomOut:S.zoomIn)),j.a.createElement("div",{className:"lrn-margin-top-md close-button"},j.a.createElement("button",{className:"lrn_btn lrn-btn-outline snow-theme lrn-btn-close",type:"button",onClick:this.close},j.a.createElement("span",{className:"lrn-icon-clear"})))),j.a.createElement("div",{className:"lrn-padding-xs"},j.a.createElement("div",{className:"lrn-image-wrapper",ref:function ref(a){return r.imageWrapper=a}},j.a.createElement("img",preview_extends({src:O,className:q,onLoad:this.validateImageSize,ref:function ref(a){return r.image=a},alt:S.imageTitle},B)))))}},{key:"scrollToPosition",value:function scrollToPosition(r,a){var l=this.image.getBoundingClientRect(),O=l.width,S=l.height,E=this.imageWrapper.getBoundingClientRect(),T=parseInt(r*O-E.width/2,10),j=parseInt(a*S-E.height/2,10);this.imageWrapper.scrollTop=j,this.imageWrapper.scrollLeft=T}}]),ImagePreview}(j.a.PureComponent),Ee=function withImageClickDetection(r){return function(a){function _temp(){var r,a;preview_classCallCheck(this,_temp);for(var l=arguments.length,O=new Array(l),S=0;S<l;S++)O[S]=arguments[S];return preview_defineProperty(preview_assertThisInitialized(a=preview_possibleConstructorReturn(this,(r=preview_getPrototypeOf(_temp)).call.apply(r,[this].concat(O)))),"state",{url:null}),preview_defineProperty(preview_assertThisInitialized(a),"onContainerClick",(function(r){r.preventDefault(),r.stopPropagation(),"IMG"===r.target.tagName&&(a.setState({url:r.target.src}),a.props.onOpen())})),preview_defineProperty(preview_assertThisInitialized(a),"onClose",(function(){a.setState({url:null}),a.props.onClose()})),a}return preview_inherits(_temp,a),preview_createClass(_temp,[{key:"componentDidMount",value:function componentDidMount(){this.container=this.props.getContainer(),this.container.addEventListener("click",this.onContainerClick)}},{key:"componentDidUpdate",value:function componentDidUpdate(r,a){a.url!==this.state.url&&(this.state.url?this.container.removeEventListener("click",this.onContainerClick):this.container.addEventListener("click",this.onContainerClick))}},{key:"render",value:function render(){return j.a.createElement(r,preview_extends({},this.props,{url:this.state.url,onClose:this.onClose}))}}]),_temp}(j.a.PureComponent)}(Pe),Te=l(294);function Tooltip(r){var a=r.disabled,l=r.activeAction;return a?null:j.a.createElement("span",null,l)}function LengthIndicator(r){var a=r.wordCountExceeded,l="lrn_length_indicator  ".concat(a?"lrn_wordcount_warning_label":"");return j.a.createElement("span",{className:l}," ",j.a.createElement(WordCount,r),j.a.createElement(WordStatic,r),j.a.createElement(WordLimit,r),j.a.createElement(AccessibleCounter,r))}function WordCount(r){var a=r.wordCountVisible,l=r.wordCount;return a?j.a.createElement("span",{className:"lrn_word_count"},l):null}function AccessibleCounter(r){var a=r.textToAnnounce;return j.a.createElement("span",{className:"sr-only","aria-live":"polite","aria-atomic":"true"},a)}function WordStatic(r){var a=r.wordStaticVisible,l=r.wordCountVisible,O=r.i18n.labels.word;return a&&l?j.a.createElement("span",{className:"lrn_static_words"},O):null}function WordLimit(r){var a=r.wordLimitVisible,l=r.wordCountVisible,O=r.wordMaxLength,S=l?" /":"",E=r.i18n.labels.wordLength,T="".concat(S," ").concat(O," ").concat(E);return a?j.a.createElement("span",{className:"lrn_word_limit"},T):null}var Ie=function Footer(r){return j.a.createElement("footer",{className:"lrn-toolbar-footer  lrn_clearfix"},j.a.createElement("div",{className:"lrn_toolbar_footer_left"},j.a.createElement(Tooltip,r)),j.a.createElement("div",{className:"lrn_toolbar_footer_right"},j.a.createElement(LengthIndicator,r)))},Me=l(41);function longTextV2_typeof(r){return(longTextV2_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function longTextV2_extends(){return(longTextV2_extends=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&(r[O]=l[O])}return r}).apply(this,arguments)}function longTextV2_getPrototypeOf(r){return(longTextV2_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function longTextV2_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function longTextV2_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function longTextV2_createClass(r,a,l){return a&&longTextV2_defineProperties(r.prototype,a),l&&longTextV2_defineProperties(r,l),r}function longTextV2_setPrototypeOf(r,a){return(longTextV2_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}function longTextV2_defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var Ae=function(r){function LongTextV2(r){var a;return function longTextV2_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,LongTextV2),a=function longTextV2_possibleConstructorReturn(r,a){return!a||"object"!==longTextV2_typeof(a)&&"function"!=typeof a?longTextV2_assertThisInitialized(r):a}(this,longTextV2_getPrototypeOf(LongTextV2).call(this,r)),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"state",{toolbarActiveActions:[],toolbarRtlEditingMode:Me.a.isRtl(),footerActiveAction:null,isPreviewingImage:!1,previewingImageUrl:null,actionToDo:null,activeModal:null,modalData:null,container:null,textToAnnounce:""}),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"toolbarRef",j.a.createRef()),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"setContainerElement",(function(r){return a.el=r})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"getContainerElement",(function(){return a.el})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onImagePreviewOpened",(function(){return a.setState({isPreviewingImage:!0})})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onImagePreviewClosed",(function(){return a.setState({isPreviewingImage:!1,previewingImageUrl:null})})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"focusButtonInsideToolbar",(function(){var r=a.toolbarRef.current.querySelector("[tabIndex='0']");r&&r.focus()})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onToolbarControlHover",(function(r){a.setState({footerActiveAction:r})})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onToolbarActionToDo",(function(r){r&&"previewImage"===r.type?(a.setState({previewingImageUrl:r.url}),a.onImagePreviewOpened()):a.setState({actionToDo:r})})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onEditorActionDone",(function(r){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},O=l.type,E=S()([$.b.EDIT_FORMULA,$.b.CREATE_FORMULA]).contains(O);E&&a.props.renderMath(),a.setState(S.a.extend(getToolbarState(r),{actionToDo:null}))})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onEditorInteraction",(function(r){a.setState(getToolbarState(r))})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onEditorValueChange",(function(r){a.props.longTextV2Actions.updateValue(r),a.updateAriaLiveText()})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onMathWidgetPaste",(function(){a.props.renderMath()})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onMathWidgetSelect",(function(r){a.onModal($.f.FORMULA_EDITOR,r)})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"updateAriaLiveText",(function(){var r=a.getWordLimitText();setTimeout((function(){return!a._unmounted&&a.setState({textToAnnounce:r})}),500)})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"getWordLimitText",(function(){var r=a.props.longTextV2.footer,l=r.wordCount,O=r.wordMaxLength,S=r.wordCountVisible,E=r.wordLimitVisible,T="of ".concat(O," allowed");return S?"".concat(l," words written ").concat(E?T:""):""})),longTextV2_defineProperty(longTextV2_assertThisInitialized(a),"onModal",(function(r){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a.setState({modalData:l,activeModal:r})})),a.onEditorValueChange=S.a.debounce(a.onEditorValueChange,500).bind(longTextV2_assertThisInitialized(a)),a.updateAriaLiveText=S.a.debounce(a.updateAriaLiveText,500),a}return function longTextV2_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&longTextV2_setPrototypeOf(r,a)}(LongTextV2,r),longTextV2_createClass(LongTextV2,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(){return!this._unmounted}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unmounted=!0}}]),longTextV2_createClass(LongTextV2,[{key:"render",value:function render(){var r=this,a=this.props,l=a.base,O=a.longTextV2,S=a.canInsertImage,E=l.isReviewState,T=l.isPreviewState,D=l.readOnly,q=l.disabled,B=l.i18n,$=l.fontSizeClass,Q=l.responseId,ee=O.wordCountExceeded,te=O.disableAutoLink,ne=this.state,re=ne.toolbarActiveActions,oe=ne.toolbarRtlEditingMode,ie=ne.isPreviewingImage,ae=ne.previewingImageUrl,se=ne.footerActiveAction,le=ne.actionToDo,ce=ne.activeModal,ue=ne.modalData,pe=ne.container,de=ne.textToAnnounce,fe=G()({lrn_texteditor_inactive:ce,lrn_hide:ie},"lrn_texteditor"),he=q||D,me="chemistryessayV2"===l.questionType;return j.a.createElement(Z.a,{responsive:S},j.a.createElement("div",{className:"lrn_response_input_wrapper"},j.a.createElement("div",{className:fe,ref:this.setContainerElement},j.a.createElement(Ce.WYSIHTML,longTextV2_extends({},O.toolbar,{toolbarRtlEditingMode:oe,isReviewState:E,isPreviewState:T,i18n:B,isChemistry:me,characterMapModalClassName:$,disabled:he||ce,activeActions:re,activeModal:ce,modalData:ue,responseId:Q,getContainer:function getContainer(){return pe},editableElementSelector:".".concat("lrn_longtextinput"),onMouseEnter:this.onToolbarControlHover,onMouseLeave:function onMouseLeave(){return r.onToolbarControlHover(null)},onClick:this.onToolbarActionToDo,onModal:this.onModal,focusButtonInsideToolbar:this.focusButtonInsideToolbar,toolbarRef:this.toolbarRef})),j.a.createElement(Te.a.WYSIHTML,longTextV2_extends({},O.lrnEditor,{isReviewState:E,readOnly:D,className:"lrn_longtextinput",disabled:he,inactive:!!ce,i18n:B,wordCountExceeded:ee,actionToDo:le,focusButtonInsideToolbar:this.focusButtonInsideToolbar,onInteraction:this.onEditorInteraction,onValueChange:this.onEditorValueChange,onActionDone:this.onEditorActionDone,onMathWidgetSelect:this.onMathWidgetSelect,onMathWidgetPaste:this.onMathWidgetPaste,disableAutoLink:te})),j.a.createElement(Ie,longTextV2_extends({},O.footer,{textToAnnounce:de,i18n:B,disabled:he,wordCountExceeded:ee,activeAction:se}))),D&&j.a.createElement(Ee,{labels:B.labels.editor.modals,getContainer:this.getContainerElement,onOpen:this.onImagePreviewOpened,onClose:this.onImagePreviewClosed}),!D&&S&&j.a.createElement(Pe,{url:ae,labels:B.labels.editor.modals,visible:ie,getContainer:this.getContainerElement,onOpen:this.onImagePreviewOpened,onClose:this.onImagePreviewClosed})))}},{key:"componentDidMount",value:function componentDidMount(){this.setState({container:this.el})}}]),LongTextV2}(j.a.Component);function getToolbarState(r){return{toolbarActiveActions:r,toolbarRtlEditingMode:S.a.isEmpty(r)?Me.a.isRtl():S.a.some(r,{action:"textDirectionRtl"})}}var Le=q.b((function(r){return{base:r.base,longTextV2:r.longTextV2,canInsertImage:S.a.contains(r.longTextV2.toolbar.formattingOptions,"image")}}),(function(r){return{longTextV2Actions:D.b(he,r),renderMath:D.b(de.a.renderMathIfRequired,r)}}))(Ae),ke=l(26),ze=l(224),je=l(206),Re=l(276);function dataService_typeof(r){return(dataService_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function dataService_defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function dataService_assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _get(r,a,l){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(r,a,l){var O=function _superPropBase(r,a){for(;!Object.prototype.hasOwnProperty.call(r,a)&&null!==(r=dataService_getPrototypeOf(r)););return r}(r,a);if(O){var S=Object.getOwnPropertyDescriptor(O,a);return S.get?S.get.call(l):S.value}})(r,a,l||r)}function dataService_getPrototypeOf(r){return(dataService_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function dataService_setPrototypeOf(r,a){return(dataService_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}var De=function(r){function LongTextV2DataService(r,a){var l;return function dataService_classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,LongTextV2DataService),l=function dataService_possibleConstructorReturn(r,a){return!a||"object"!==dataService_typeof(a)&&"function"!=typeof a?dataService_assertThisInitialized(r):a}(this,dataService_getPrototypeOf(LongTextV2DataService).call(this,r,a)),Object(ze.a)(dataService_assertThisInitialized(l)),Object(Re.a)(dataService_assertThisInitialized(l)),l}return function dataService_inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&dataService_setPrototypeOf(r,a)}(LongTextV2DataService,r),function dataService_createClass(r,a,l){return a&&dataService_defineProperties(r.prototype,a),l&&dataService_defineProperties(r,l),r}(LongTextV2DataService,[{key:"getInitialState",value:function getInitialState(){var r=_get(dataService_getPrototypeOf(LongTextV2DataService.prototype),"getInitialState",this).call(this),a=this.placeholder,l=this.browserSpellCheck,O=Object(je.a)(l),E=Object(je.b)(l),T=Object(je.c)(l),j=this.responseValue,D=this.uiStyle,q=this.wordCount,B=this.wordCountExceeded,G=this.wordCountVisible,Z=this.wordLimitVisibility,$=Z.wordStatic,Q=Z.wordLimit,ee=this.wordMaxLength,te=this.formattingOptions,ne=this.characterMap,re=this.disableAutoLink,oe=this.formulaEditorHorizontalLayout,ie=this.formulaEditorSymbols,ae=this.formulaEditorTextBlocks,se=this.formulaEditorNumberPad;return S.a.extend(r,{longTextV2:{wordCountExceeded:B,disableAutoLink:re,maxFileSize:this.maxFileSize,warningFileSize:this.warningFileSize,toolbar:{formattingOptions:te,characterMap:ne,formulaEditorHorizontalLayout:oe,formulaEditorNumberPad:se,formulaEditorSymbols:ie,formulaEditorTextBlocks:ae},lrnEditor:{placeholder:a,spellCheck:l,autocapitalize:O,autocomplete:E,autocorrect:T,responseValue:j,uiStyle:D},footer:{wordCount:q,wordCountVisible:G,wordStaticVisible:$,wordLimitVisible:Q,wordMaxLength:ee}}})}},{key:"getWordLimitVisibility",value:function getWordLimitVisibility(){return this.wordLimitVisibility}},{key:"getWordCountExceeded",value:function getWordCountExceeded(){return this.wordCountExceeded}},{key:"formatValue",value:function formatValue(r){return r=(r||"").replace(/<p[^>]*>\s?<\/p>/gi,"")}},{key:"wordLimitVisibility",get:function get(){var r,a,l=this.model,O=l.SHOW_WORD_LIMITS,S=l.getShowWordLimit();return S===O.ALWAYS||S===O.ON&&this.wordCountExceeded?(a=!0,r=!1):(a=!1,r=!0),{wordLimit:a,wordStatic:r}}},{key:"placeholder",get:function get(){return this.model.getPlaceholder()}},{key:"browserSpellCheck",get:function get(){return this.model.getBrowserSpellCheck()}},{key:"disableAutoLink",get:function get(){return this.model.disableAutoLink()}},{key:"formulaEditorHorizontalLayout",get:function get(){return!!this.question.horizontal_layout}},{key:"formulaEditorNumberPad",get:function get(){return this.question.numberPad}},{key:"formulaEditorSymbols",get:function get(){return this.question.symbols}},{key:"formulaEditorTextBlocks",get:function get(){return this.question.text_blocks}},{key:"responseValue",get:function get(){var r=this.getResponse();return S.a.getNested(r,"value")}},{key:"uiStyle",get:function get(){var r=S.a.extend({},this.model.getUIStyle());return r.minHeight=r.min_height||"",r.maxHeight=r.max_height||"",delete r.min_height,delete r.max_height,r}},{key:"wordCount",get:function get(){return this.model.getWordCount()}},{key:"wordCountExceeded",get:function get(){return this.model.wordCountExceeded()}},{key:"wordCountVisible",get:function get(){return this.model.getShowWordCount()}},{key:"wordMaxLength",get:function get(){return this.model.getMaxLength()}},{key:"formattingOptions",get:function get(){return this.model.getFormattingOptions()}}]),LongTextV2DataService}(ke.a);De.prototype.EXPOSED_METHODS=[].concat(function dataService_toConsumableArray(r){return function dataService_arrayWithoutHoles(r){if(Array.isArray(r)){for(var a=0,l=new Array(r.length);a<r.length;a++)l[a]=r[a];return l}}(r)||function dataService_iterableToArray(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function dataService_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(De.prototype.EXPOSED_METHODS),["getWordLimitVisibility","getWordCountExceeded","formatValue"]);var Ne,Fe=De,Ve=l(25),Ue=l(212);function reducer_defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var We=l.n(Ue)()("[\\p{L}\\p{N}]"),qe=he.actionTypes,Be=(reducer_defineProperty(Ne={},qe.LONGTEXTV2_UPDATE_WORD_COUNT,(function(r,a){var l=r.footer,O=function getWordCount(r){if(!S.a.isString(r)||S.a.isEmpty(r))return 0;return r=r.replace(/( | )/," ").replace(/[\n\r]/g," ").replace(/&nbsp;/g," ").replace(/<\/p>/g," ").replace(/<\/blockquote>/g," ").replace(/<\/li>/g," ").replace(/<\/div>/g," ").replace(/<br>/g," ").replace(/<br \/>/g," ").replace(/<.*?>/g,""),S.a.reduce(r.split(/\s+/),(function(r,a){return a.length>0&&We.test(a)?r+1:r}),0)}(a.value);return{footer:S.a.extend({},l,{wordCount:O})}})),reducer_defineProperty(Ne,qe.LONGTEXTV2_UPDATE_WORD_COUNT_EXCEEDED,(function(r,a){return{wordCountExceeded:a.value}})),reducer_defineProperty(Ne,qe.LONGTEXTV2_UPDATE_WORD_LIMIT_VISIBILITY,(function(r,a){var l=r.footer,O=a.value;return{footer:S.a.extend({},l,{wordStaticVisible:O.wordStatic,wordLimitVisible:O.wordLimit})}})),reducer_defineProperty(Ne,qe.LONGTEXTV2_DISABLE_EDITOR,(function(r,a){return{disabled:a.value}})),Ne);var He=Object(Ve.a)(Be,{imageUrl:null,error:null});a.a=E.a.extend({maskable:!1,ViewComponent:Le,DataService:Fe,getReducers:function getReducers(){var r=E.a.prototype.getReducers.apply(this,arguments);return S.a.extend(r,{longTextV2:He})}})},,,,function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=l(17),T=l.n(E),j=l(158);a.a={getShuffleOption:function getShuffleOption(){return this.shuffleOption||(this.shuffleOption=new j.a(this)),this.shuffleOption},usingPossibleGroupingResponses:function usingPossibleGroupingResponses(){return!!this.get("question").group_possible_responses},getPossibleResponseGroups:function getPossibleResponseGroups(){var r=this.getShuffleOption(),a=S.a.map(this.get("question").possible_response_groups,(function(a){return{title:a.title,responses:r.getOrderedData(a.responses)}}));return S.a.each(a,(function(r){S.a.isString(r.title)?r.title=T.a.stripHTML(T.a.createImageDescriptions(r.title),!0):r.title=""})),a},getPossibleResponseGroupResponses:function getPossibleResponseGroupResponses(){var r,a;return r=this.getPossibleResponseGroups(),S.a.isArray(r)&&r.length&&(a=[],S.a.each(r,(function(r,l){S.a.each(r.responses,(function(r){a.push({value:r,groupIndex:l})}))}))),a},getPossibleResponses:function getPossibleResponses(){var r=this.getShuffleOption().getOrderedData(this.get("question").possible_responses);return S.a.map(r,(function(r){return{value:r}}))}}},,,,,,,,,,,,,,,function(r,a,l){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var O=_interopRequireDefault(l(125)),S=_interopRequireDefault(l(387)),E=_interopRequireDefault(l(126)),T=_interopRequireDefault(l(542));function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function _classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}function _possibleConstructorReturn(r,a){return!a||"object"!==_typeof(a)&&"function"!=typeof a?_assertThisInitialized(r):a}function _getPrototypeOf(r){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function _assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _setPrototypeOf(r,a){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(r,a){return r.__proto__=a,r})(r,a)}function _defineProperty(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var j=function(r){function Message(){var r,a;_classCallCheck(this,Message);for(var l=arguments.length,O=new Array(l),S=0;S<l;S++)O[S]=arguments[S];return _defineProperty(_assertThisInitialized(a=_possibleConstructorReturn(this,(r=_getPrototypeOf(Message)).call.apply(r,[this].concat(O)))),"state",{style:{}}),a}return function _inherits(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),a&&_setPrototypeOf(r,a)}(Message,r),function _createClass(r,a,l){return a&&_defineProperties(r.prototype,a),l&&_defineProperties(r,l),r}(Message,[{key:"componentDidUpdate",value:function componentDidUpdate(r){var a=this.props,l=a.visibility,O=a.animation;r.visibility!==l&&(l?O&&O.enter?O.enter(this.el):this.setState({style:{display:"block"}}):O&&O.leave?O.leave(this.el):this.setState({style:{display:"none"}}))}},{key:"getMessageIcon",value:function getMessageIcon(){var r=this.props,a=r.iconClassMapping,l=r.hiddenIcon,S=r.type;return l||"neutral"===S?null:a&&a[S]?O.default.createElement("span",{className:"lds-message__icon ".concat(a[S])}):O.default.createElement(T.default,{className:"lds-message__icon",icon:"".concat(S,"Icon")})}},{key:"render",value:function render(){var r=this,a=this.props,l=a.ariaHidden,S=a.ariaLive,T=a.className,j=a.hiddenIcon,D=a.type,q=(r.props.children&&(r.children=r.props.children),r.children),B=(0,E.default)("lds-message",T,{"lds-message--neutral":"neutral"===D,"lds-message--info":"info"===D,"lds-message--success":"success"===D,"lds-message--warning":"warning"===D,"lds-message--error":"error"===D,"lds-message--hidden-icon":j});return O.default.createElement("div",{className:B,ref:function ref(a){return r.el=a},"aria-hidden":l,"aria-live":S,style:this.state.style},this.getMessageIcon(),q)}}]),Message}(O.default.Component);a.default=j,j.propTypes={ariaHidden:S.default.bool,ariaLive:S.default.string,animation:S.default.shape({enter:S.default.func,leave:S.default.func}),children:S.default.node,className:S.default.string,hiddenIcon:S.default.bool,iconClassMapping:S.default.object,type:S.default.string.isRequired,visibility:S.default.bool},j.defaultProps={ariaHidden:!1,ariaLive:"polite",animation:null,className:"",hiddenIcon:!1,type:"neutral",visibility:!0}},,,,,function(r,a,l){var O=l(437),S=l(334);r.exports=function(r){return O(S(r))}},function(r,a){r.exports=function(r){if(null==r)throw TypeError("Can't call method on "+r);return r}},function(r,a,l){var O=l(255),S=l(495),E=l(299),T=l(438),j=Object.defineProperty;a.f=O?j:function defineProperty(r,a,l){if(E(r),a=T(a,!0),E(l),S)try{return j(r,a,l)}catch(r){}if("get"in l||"set"in l)throw TypeError("Accessors not supported");return"value"in l&&(r[a]=l.value),r}},function(r,a,l){var O=l(334);r.exports=function(r){return Object(O(r))}},function(r,a,l){var O=l(440),S=Math.min;r.exports=function(r){return r>0?S(O(r),9007199254740991):0}},function(r,a,l){var O=l(447),S=l(358),E=l(201)("toStringTag"),T="Arguments"==S(function(){return arguments}());r.exports=O?S:function(r){var a,l,O;return void 0===r?"Undefined":null===r?"Null":"string"==typeof(l=function(r,a){try{return r[a]}catch(r){}}(a=Object(r),E))?l:T?S(a):"Object"==(O=S(a))&&"function"==typeof a.callee?"Arguments":O}},,,,function(r,a,l){var O,S;O=[l(1)],void 0===(S=function(r){"use strict";var a={};return{publish:function(l,O){a[l]&&r.each(a[l],(function(){this&&this.apply(r,O||[])}))},subscribe:function(r,l){return a[r]||(a[r]=[]),a[r].push(l),[r,l]},unsubscribe:function(l){var O=l[0];a[O]&&r.each(a[O],(function(r){this==l[1]&&a[O].splice(r,1)}))},reset:function(){a={}}}}.apply(a,O))||(r.exports=S)},,,,function(r,a,l){"use strict";var O=l(0),S=l.n(O),E=l(306),T=l(307),j=l.n(T),D=l(213);function FormulaScorer(r,a){S.a.isObject(a)&&S.a.isNumber(a.mathcoreTimeoutDuration)?j.a.setTimeoutDuration(a.mathcoreTimeoutDuration):j.a.setTimeoutDuration(5e3),this._initialize(r,(function(r,a){return D.a.useMathCore(r)?j.a.evaluateVerbose(D.a.processSpec(r),a):D.a.validate(r,a)}))}FormulaScorer.prototype=new E.a,a.a=FormulaScorer},function(r,a,l){"use strict";var O,S=l(5),E=l.n(S),T=l(0),j=l.n(T),D=l(1),q=l.n(D),B=l(212),G=l.n(B),Z=l(7),$=l(291),Q=l.n($),ee=l(17),te=l.n(ee),ne=["bold","italic","underline","unorderedList"],re=Q.a,oe=/<!--([\s\S]*?)-->/g,ie=/<p>/gi,ae=/<\/p>/gi,se=/<\/?(em|strong|u|sup|sub)[^>]*>/gi,le=/<\/?(br|li|ol|ul|span)[^>]*>/gi,ce=/<\/?(div)[^>]*>/gi,ue=/<(div)><\/(div)>/gi,pe=/<(div|p)><br><\/(div|p)>/gi,de=/<br>(^<\/br>)/gi,fe=/&nbsp;/g,he=G()("[\\p{L}\\p{N}]"),me=q()(document);a.a=function editor(r){j.a.extend(this,E.a.Events);var a,l,S,T,D,B,G,$,Q,ee,ge,ye,_e=!1,be=!1,ve=[],we=[];function getContent(){return"ie"!==Z.a.browser||9!==Z.a.version&&10!==Z.a.version?cleanHTML(D.html()):D.html().replace(/<p>/g,"").replace(/<\/p>/g,"<br>")}function cleanHTML(r){return r=function cleanTagsThatCauseIssuesWhenPasting(r){return r=(r=(r=r.replace(pe,"<br></br>")).replace(ue,"<br></br>")).replace(de,"<br></br>")}(r),r=(r=te.a.sanitizeHTML(r)).replace(oe,""),"ie"===Z.a.browser&&9===Z.a.version||(r=r.replace(ae,"<br></br>")),r=r.replace(ie,"")}function getWordCount(r){return r=function cleanHTMLForWordCount(r){return r=(r=(r=(r=r.replace(se,"")).replace(le," ")).replace(ce," ")).replace(fe," ")}(r),j.a.reduce(r.split(/\s+/),(function(r,a){return a.length>0&&he.test(a)?r+1:r}),0)}function updateToolbar(){j.a.each(ve,(function(r){r.updateUI()}))}this.getTbContainer=function(){return ye};var xe=function Command(r){this.execute=function(){"subscript"!==r&&"superscript"!==r||this.queryState()||j.a.each(["subscript","superscript"],(function(r){Ce[r]&&Ce[r].command.queryState()&&document.execCommand(r,!1,null)})),document.execCommand(r,!1,null),_e=!0},this.queryState=function(){return document.queryCommandState(r)},this.setButton=function(r){this.button=r}};function InsertListCommand(r){var a=r?"insertOrderedList":"insertUnorderedList",l="ie"===Z.a.browser||"edge"===Z.a.browser;this.execute=function(){!function handleInsertListDependingOnBrowser(r,a){var l;D.focus(),r&&(l=q()(document.createElement("p")),D.append(l));document.execCommand(a,!1,null),r&&l.remove()}(l,a),_e=!0},this.queryState=function(){return document.queryCommandState(a)},this.setButton=function(r){this.button=r}}function CharacterMapCommand(a){j.a.isArray(a)||(a=r.labels.characterMapCharacters),this.execute=function(){var l=this;if(be)removeCharMap();else{var O=q()(re({characters:a,labels:r.labels})).hide().appendTo(this.button),S=this.button.position().left,E=ye.width()-(S+this.button.outerWidth()),T=Math.abs(-O.width()/2+this.button.outerWidth()),j=function destroyCharacterMap(){l.button.removeClass("lrn_active"),removeCharMap()};T>S&&(T=S),O.width()/2>E&&(T+=O.width()/2-E),O.css("left",-T+"px").fadeIn("fast",(function(){me.off("click.charactermap").on("click.charactermap",j)})),O.find(".lrn_characterbutton").first().focus(),be=!0,q()(".lrn_toolbar .lrn_charactermap .lrn_characterbutton",D.parents(".lrn_texteditor")).on("mousedown",(function(r){r.preventDefault()}))}},this.queryState=function(){return be},this.setButton=function(r){this.button=r}}var Oe=function ToggleCommandButtonController(a,S,E,T){var j,B=q()("<li></li>").addClass("lrn_btn");B.html(a.content),B.attr({unselectable:"on",title:a.title,"aria-label":a.title,tabindex:0,role:"button","data-button-index":E}),q()(B).children().attr("unselectable","on"),B.on("mousedown",(function(r){r.preventDefault&&r.preventDefault()})),l||(B.on("click",(function(r){D.is(":focus")||D.focus(),a.command.execute(),updateToolbar()})),B.on("keydown",(function(l){13!==l.which&&32!==l.which||(l.preventDefault(),D.is(":focus")||D.focus(),a.title===r.labels.characterMapTitle&&(O=!0),a.command.execute(),updateToolbar()),37===l.which&&(l.preventDefault(),j=(E+T-1)%T,S.find('li[data-button-index="'+j+'"]').first().focus()),39===l.which&&(l.preventDefault(),j=(E+1)%T,S.find('li[data-button-index="'+j+'"]').first().focus())})),B.on("keyup",(function(r){32===r.which&&r.preventDefault()}))),B.appendTo(S),a.command.setButton(B),this.getQueryState=function(){return a.command.queryState()},this.updateUI=function(){a.command.queryState()?(B.addClass("lrn_active"),B.attr({"aria-pressed":"true"})):(B.removeClass("lrn_active"),B.attr({"aria-pressed":"false"}))}};function removeCharMap(){if(be&&!O){var r=q()(".lrn_toolbar .lrn_charactermap",D.parents(".lrn_texteditor"));r.finish().fadeOut((function(){r.remove()})),be=!1,me.off("click.charactermap")}O=!1}function updateContentAndWordCount(){_e&&(_e=!1,S=getContent(),T=getWordCount(S),function checkWordCount(){Q.html(T),T>a?("on-limit"===B&&ee.addClass("lrn_hide"),"off"!==B&&$.removeClass("lrn_hide"),G.addClass("lrn_wordcount_warning_label"),D.addClass("lrn_wordcount_warning")):("on-limit"===B&&(ee.removeClass("lrn_hide"),$.addClass("lrn_hide")),G.removeClass("lrn_wordcount_warning_label"),D.removeClass("lrn_wordcount_warning"))}())}function charLimitExceeded(){return T>1e4}function insertTextAtCursor(r){charLimitExceeded()||(document.getSelection?document.getSelection().getRangeAt(0).insertNode(document.createTextNode(r)):document.selection?document.selection.createRange().pasteHTML(r):document.execCommand("InsertHTML",!1,r))}var Ce={bold:{command:new xe("bold"),content:"<strong>"+r.labels.editorBoldIcon+'</strong> <span class="sr-only">'+r.labels.editorBoldTitle+"</span>",title:r.labels.editorBoldTitle,block:!1},italic:{command:new xe("italic"),content:"<em>"+r.labels.editorItalicsIcon+'</em> <span class="sr-only">'+r.labels.editorItalicsTitle+"</span>",title:r.labels.editorItalicsTitle,block:!1},underline:{command:new xe("underline"),content:"<u>"+r.labels.editorUnderlineIcon+'</u> <span class="sr-only">'+r.labels.editorUnderlineTitle+"</span>",title:r.labels.editorUnderlineTitle,block:!1},removeFormat:{command:new xe("removeFormat"),content:'<i class="lrn_icon lrn-icon-remove-format"></i> <span class="sr-only">'+r.labels.editorRemoveFormatTitle+"</span>",title:r.labels.editorRemoveFormatTitle,block:!1},unorderedList:{command:new InsertListCommand,content:'<i class="lrn_icon lrn-icon-list-bulleted"></i> <span class="sr-only">'+r.labels.editorBulletdListTitle+"</span>",title:r.labels.editorBulletdListTitle,block:!0},orderedList:{command:new InsertListCommand(!0),content:'<i class="lrn_icon lrn-icon-list-numbered"></i> <span class="sr-only">'+r.labels.editorNumberedListTitle+"</span>",title:r.labels.editorNumberedListTitle,block:!0},superscript:{command:new xe("superscript"),content:'<i class="lrn_icon lrn-icon-superscript"></i> <span class="sr-only">'+r.labels.editorSuperscriptTitle+"</span>",title:r.labels.editorSuperscriptTitle,block:!1},subscript:{command:new xe("subscript"),content:'<i class="lrn_icon lrn-icon-subscript"></i> <span class="sr-only"> <span class="sr-only">'+r.labels.editorSubscriptTitle+"</span>",title:r.labels.editorSubscriptTitle,block:!1}};this.makeEditor=function(O){var E,T,te,re,oe,ie,ae,se,le,ce=this,ue=O.el,pe=O.showCharacterMap,de=O.spellCheck,fe=O.characterMapIcon,he=O.placeholder,me=O.wordsLimit,be=O.shouldInsertToolbar,xe=this.normalizeFormattingOptions(O.formattingOptions);switch(l=O.readOnly,a=O.maxWordLength,this.commandDefinitions=Ce,j.a.isUndefined(be)&&(be=!0),j.a.isArray(xe)||(xe=ne),E=j.a.map(xe,(function(r){return Ce[r]})),pe&&(Ce.characterMap={command:new CharacterMapCommand(pe),content:fe+'<span class="sr-only">'+r.labels.characterMapTitle+"</span>",title:r.labels.characterMapTitle},E.push(Ce.characterMap)),(D=q()(ue)).addClass("lrn_editor_area"),D.wrap('<div class="lrn_response_input_wrapper" />'),l?D.wrap('<div class="lrn_texteditor lrn_editor_disabled" />'):(D.wrap('<div class="lrn_texteditor" />'),D.attr("contentEditable","true"),j.a.isBoolean(de)&&D.attr("spellcheck",de.toString()),"ie"===Z.a.browser&&9===Z.a.version&&0!==D.html().indexOf("<p>")&&D.html("<p>"+D.html().replace(/<br>/g,"</p><p>")+"</p>")),G=q()('<span class="lrn_length_indicator" />'),ge=q()('<span class="lrn_toolbar_right" />').append(G),T=q()('<ul class="lrn_toolbar_left lrn_clearfix"></ul>'),ye=q()('<div class="lrn-toolbar-wrapper" />').append(q()('<div class="lrn_toolbar" />').append(T).append(ge)),be&&D.parent().prepend(ye),j.a.each(E,(function(r,a){!0===r.block&&we.push(r),te=new Oe(r,T,a,E.length),ve.push(te)})),B=me,re=!1,me){case"always":re=!1;break;case"on-limit":case"off":re=!0}if(Q=q()('<span class="lrn_word_count" />').html("0"),ee=q()('<span class="lrn_static_words'+(!0===re?"":" lrn_hide")+'"> '+r.labels.word+"</span>"),$=q()('<span class="lrn_word_limit'+(!0===re?" lrn_hide":"")+'"> / '+a+" "+r.labels.wordLength+"</span>"),G.append(Q,ee,$),l||j.a.isEmpty(he)||(oe=q()('<span class="lrn_placeholder" />').text(he),ie=q()('<div class="lrn_input_with_placeholder" />'),ae=function togglePlaceholder(){var r=D.text();r&&r.length>0?oe.hide():oe.show()},D.wrap(ie).before(oe),D.on("focus blur keydown keyup",ae),oe.on("click",(function(r){D.focus()})),ae()),!l){D.on("blur",(function(){triggerChange(),ce.trigger("blur")})),D.on("focus",(function(){ce.trigger("focus")})),D.on("touchend",(function(){window.focus()})),D.on("keyup mouseup",(function(){removeCharMap(),updateToolbar(),triggerChange()})),"ie"!==Z.a.browser?D.on("keyup mouseup",(function(){this.lastChild&&"br"===this.lastChild.nodeName.toLowerCase()||this.appendChild(document.createElement("br"))})):Z.a.browser<9&&D.on("keyup mouseup",(function(){var r,a;D.is(":empty")&&(r=document.createElement("p"),D.append(r),(a=document.body.createTextRange()).moveToElementText(r),a.select())})),se=j.a.throttle((function(){updateContentAndWordCount(),triggerChange()}),300),_e=!0,updateContentAndWordCount(),D.on("keyup",se),D.on("keyup",(function(r){_e=!0,ce.trigger("keyup"),triggerChange()})),D.on("paste",(function(r){charLimitExceeded()&&r.preventDefault(),j.a.defer((function(){var r,a,l,O;window.getSelection?(r=window.getSelection().getRangeAt(0),(a=document.createElement("caret")).innerHTML="-",r.insertNode(a),D.html(getContent()),a=document.getElementsByTagName("caret")[0],(r=window.getSelection().rangeCount>0?window.getSelection().getRangeAt(0):document.createRange()).setStartBefore(a),r.setEndBefore(a),(l=window.getSelection()).rangeCount>0&&l.removeAllRanges(),l.addRange(r),a.parentNode.removeChild(a)):document.selection?((r=document.selection.createRange()).pasteHTML("<span id=lrneditorcaret>-</span>"),O=(O=cleanHTML(O=(O=D.html()).replace(/<span id=lrneditorcaret>-<\/span>/i,"<caret>-</caret>"))).replace(/<caret>-<\/caret>/i,"<span id=lrneditorcaret>-</span>"),D.html(O),a=document.getElementById("lrneditorcaret"),(r=document.selection.createRange()).moveToElementText(a),r.select(),a.parentNode.removeChild(a)):D.html(cleanHTML(D.html())),_e=!0,se()}))})),D.on("keydown",(function(r){if(r.ctrlKey||r.metaKey){var a;switch(r.which){case 66:a=Ce.bold;break;case 73:a=Ce.italic;break;case 85:a=Ce.underline;break;default:return}a.command.execute(),r.preventDefault(),updateToolbar(),triggerChange()}})),D.on("keypress",(function(r){r.which>31&&r.which<127&&charLimitExceeded()&&r.preventDefault(),triggerChange()}));D.parents(".lrn_texteditor").on("click",".lrn_charactermap .lrn_characterbutton",(function clickListener(r){insertTextAtCursor(q()(r.target).text()),D.trigger("keyup"),triggerChange()})),D.parents(".lrn_texteditor").on("keydown",".lrn_charactermap .lrn_characterbutton",(function keyListener(r){var a=q()(r.target).data("character-btn-index");13!==r.which&&32!==r.which||insertTextAtCursor(q()(r.target).text()),37===r.which&&(a=(a+pe.length-1)%pe.length,r.preventDefault(),D.parents(".lrn_texteditor").find('.lrn_charactermap .lrn_characterbutton[data-character-btn-index="'+a+'"]').first().focus()),39===r.which&&(a=(a+1)%pe.length,r.preventDefault(),D.parents(".lrn_texteditor").find('.lrn_charactermap .lrn_characterbutton[data-character-btn-index="'+a+'"]').first().focus())})),D.parents(".lrn_texteditor").on("mousedown",".lrn_charactermap",(function mousedownListener(r){r.preventDefault(),triggerChange()}))}function triggerChange(){S!==le&&(ce.trigger("change"),le=S)}le=S},this.getContentAndWordCount=function(){return updateContentAndWordCount(),{content:S,wordCount:T}},this.focus=function(){D.focus()},this.isEmpty=function(){return!this.getContentAndWordCount().wordCount},this.normalizeFormattingOptions=function(r){if(j.a.isArray(r))return j.a.filter(j.a.uniq(r),(function(r){return!!r}))}}},function(r,a,l){"use strict";l.d(a,"a",(function(){return O}));var O={recursionDepthHigh:13,recursionDepthLow:8};a.b={keepMouseEventHandlers:function keepMouseEventHandlers(r){r.hasMouseHandlers||r.addMouseEventHandlers()}}},,function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="lrn_cloze_response_container">'+(null==(__t="clozeassociation"==displayLogic.questiontype?'<div class="lrn_response_input_wrapper lrn-response-validate-wrapper">':"")?"":__t)+(null==(__t="imageclozeassociation"==displayLogic.questiontype?'<div class="lrn_response_input_wrapper lrn_response_input_wrapper_left lrn-response-validate-wrapper">':"")?"":__t)+'<div class="lrn_response_innerbody '+(null==(__t="imageclozeassociation"!=displayLogic.questiontype&&"clozeassociation"!=displayLogic.questiontype?"lrn-response-validate-wrapper":"")?"":__t)+'">',_.isUndefined(displayLogic.possibilityListPosition)||"top"!==displayLogic.possibilityListPosition&&"left"!==displayLogic.possibilityListPosition||(__p+="",displayLogic.extraContentHTML&&(__p+=""+(null==(__t=displayLogic.extraContentHTML)?"":__t)),__p+=""),__p+="",_.isUndefined(displayLogic.possibilityListPosition)||"left"!==displayLogic.possibilityListPosition&&"right"!==displayLogic.possibilityListPosition||(__p+='<div class="lrn_response_input_position">'),__p+='<div class="lrn_response_input lrn_response_math'+(null==(__t=displayLogic.hasBoostedFont?" lrn_response_font_boost":"")?"":__t)+'" aria-label="'+(null==(__t=displayLogic.questionText)?"":_.escape(__t))+'">'+(null==(__t=displayLogic.processedTemplate)?"":__t)+"</div>",_.isUndefined(displayLogic.possibilityListPosition)||"left"!==displayLogic.possibilityListPosition&&"right"!==displayLogic.possibilityListPosition||(__p+="</div>"),__p+="",(_.isUndefined(displayLogic.possibilityListPosition)||_.isNull(displayLogic.possibilityListPosition)||"bottom"===displayLogic.possibilityListPosition||"right"===displayLogic.possibilityListPosition)&&(__p+="",displayLogic.extraContentHTML&&(__p+=""+(null==(__t=displayLogic.extraContentHTML)?"":__t)),__p+=""),__p+="</div>"+(null==(__t="imageclozeassociation"==displayLogic.questiontype||"clozeassociation"==displayLogic.questiontype?"</div>":"")?"":__t)+'</div><div class="lrn_correctAnswers lrn_hide"><span>'+(null==(__t=labels.correctAnswers)?"":__t)+':</span><ul class="lrn_correctAnswerList"></ul></div>',displayLogic.showValidationButton&&(__p+='<button type="button" '+(null==(__t=displayLogic.readOnly?'disabled="disabled"':"")?"":__t)+' class="lrn_btn lrn_validate"><span>'+(null==(__t=displayLogic.multipleResponses?labels.checkAnswers:labels.checkAnswer)?"":__t)+"</span></button>"),__p+="";return __p}},,,,function(r,a,l){"use strict";r.exports=l(532)},function(r,a,l){"use strict";function _extends(){return(_extends=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&(r[O]=l[O])}return r}).apply(this,arguments)}l.d(a,"a",(function(){return _extends}))},function(r,a,l){"use strict";function _objectWithoutPropertiesLoose(r,a){if(null==r)return{};var l,O,S={},E=Object.keys(r);for(O=0;O<E.length;O++)l=E[O],a.indexOf(l)>=0||(S[l]=r[l]);return S}l.d(a,"a",(function(){return _objectWithoutPropertiesLoose}))},function(r,a){r.exports=function(r,a){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:a}}},function(r,a){var l={}.toString;r.exports=function(r){return l.call(r).slice(8,-1)}},function(r,a,l){var O=l(358);r.exports=Array.isArray||function isArray(r){return"Array"==O(r)}},function(r,a,l){r.exports=l(556)},function(r,a,l){"use strict";var O=l(221);r.exports=function(r,a){var l=[][r];return!!l&&O((function(){l.call(null,a||function(){throw 1},1)}))}},function(r,a,l){r.exports=l(560)},function(r,a,l){var O=l(567),S=l(572),E=l(590);r.exports=function _slicedToArray(r,a){return O(r)||S(r,a)||E()}},function(r,a,l){r.exports=l(605)},function(r,a,l){r.exports=l(614)},function(r,a,l){r.exports=l(618)},function(r,a,l){r.exports=l(623)},function(r,a,l){r.exports=l(627)},,,,,,,,,,,,,function(r,a,l){"use strict";l.d(a,"d",(function(){return define})),l.d(a,"b",(function(){return addLocalDependency})),l.d(a,"a",(function(){return addAsyncDependency}));var O=l(3);function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(r){return typeof r}:function _typeof(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function safeGet(r,a){return a.split(".").reduce((function(r,a){return r&&r[a]}),r)}function isFunction(r){return"function"==typeof r}function loadDep(r,a){if(D.shim[r])return function loadByShim(r,a){var l=D.shim[r];return _require(l.deps||[],(function(){return loadScript(r).then(l.exportsFn||function(){return l.init&&l.init()||safeGet(window,l.exports)})}),null,a)}(r,a);var l=function defer(){var r={};return r.promise=new O.default((function(a,l){r.resolve=a,r.reject=l})),r}();return l.name=r,l.path=a,function invokeLater(r,a){function cleanup(){B=null}q=q.then((function(){return B=r,a()})).then(cleanup,cleanup)}(l,(function(){return loadScript(r).then((function(){setTimeout(l.resolve,100)})).catch((function(){l.reject(new Error('Error while loading module "'+r+'"'))}))})),l.promise}function loadScript(r){return new O.default((function(a,l){var O=_require2.load(null,r,toUrl(r,!0));O.onerror=l,O.onload=a}))}var S=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,E=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g;function _require(r,a,l,S){var E=S.slice(-1)[0];return new O.default((function(a,l){O.default.all(r.map((function(r){if(S.indexOf(r)>-1)return O.default.reject(new Error("Circular dependency: "+S.concat(r).join(" -> ")));var a=S.concat(r);return G[r]?G[r](E):(r.indexOf("!")>-1&&(T[r]=function loadWithPlugin(r,a){var l=r.indexOf("!"),S=r.substr(0,l);return r=r.substr(l+1),_require([S],(function(l){return new O.default((function(O,S){function localRequire(){if(!E)return _require2.apply(null,arguments)}Object.keys(_require2).forEach((function(r){localRequire[r]=_require2[r]}));var E=!1;O.error=S,O.fromText=function(r,l){l||(l=r);var T=B;B={name:r,resolve:O,reject:S,path:a},new Function(l)(),B=T,E=!0},l.load(r,localRequire,O,D)}))}),null,a)}(r,a)),j[r]?T[r]=O.default.resolve().then((function(){return _require.apply(null,j[r].concat([a]))})):T[r]||(Z[r]?T[r]=Z[r]():T[r]=loadDep(r,a)),T[r])}))).then(a,l)})).then((function(r){if(isFunction(a)){var l=a.apply(null,r);return E&&safeGet(T[E],"module.exports")||l}return a}),(function(r){return isFunction(l)&&l(r),_require2.onError(r),O.default.reject(r)}))}function _require2(r,a,l){return _require(r,a,l,[])}var T,j,D,q,B,G={require:function require(r){return _require2},module:function module(r){var module=T[r];if(!module)throw new Error('Module "module" should be required only by modules');return module.module=module.module||{id:r,config:function config(){return D.config[r]||{}}}},exports:function exports(r){return G.module(r).exports={}}};function toUrl(r,a){var l=Object.keys(D.bundles).filter((function(a){return D.bundles[a].indexOf(r)>-1}))[0];return l?_require2.toUrl(l):(D.paths[r]&&(r=D.paths[r]),/^([\w\+\.\-]+:)?\//.test(r)||(r=D.baseUrl+r),a&&r.indexOf(".js")<0&&(r+=".js"),D.urlArgs&&(r+="?"+D.urlArgs),r)}function define(r,a,l){"string"!=typeof r&&(l=a,a=r,r=null),Array.isArray(a)||(l=a,a=[]);var O=B;if(null===r&&!O)throw new Error("Unexpected define!");if(0===a.length&&l.length>0){var T=function wrapCommonJS(r,a){var l=[];return a.toString().replace(S,"").replace(E,(function(r,a){l.push(a)})),{deps:l,factory:function factory(){var O=arguments,S=l.reduce((function(r,a,l){return r[a]=O[l],r}),{});return a((function localRequire(r){if(!S[r])throw new Error('Module "'+l+'" has not been loaded yet');return S[r]}),G.module(r),G.exports(r))}}}(r||O.name,l);a=T.deps,l=T.factory}if(null===r||O&&O.name===r){var D=_require(a,l,O.reject,O.path);O.resolve(D)}else j[r]=[a,l,null]}function addLocalDependency(r,a){T[r]||(T[r]=a)}_require2.resetContext=function(){D={urlArgs:"",baseUrl:"./",paths:{},shim:{},bundles:{},config:{}},T={},j={},q=O.default.resolve(),B=null},_require2.config=function(r){D=function deepmerge(r,a){var l=Array.isArray(a),O=l&&[]||{};return l?(r=r||[],O=O.concat(r),a.forEach((function(a,l){void 0===O[l]?O[l]=a:"object"===_typeof(a)?O[l]=deepmerge(r[l],a):-1===r.indexOf(a)&&O.push(a)}))):(r&&"object"===_typeof(r)&&Object.keys(r).forEach((function(a){O[a]=r[a]})),Object.keys(a).forEach((function(l){"object"===_typeof(a[l])&&a[l]&&r[l]?O[l]=deepmerge(r[l],a[l]):O[l]=a[l]}))),O}(D,r)},_require2.load=function(r,a,l){var O=document.createElement("script");return O.src=l,O.async=!0,document.getElementsByTagName("body")[0].appendChild(O),O},_require2.toUrl=function(r){return toUrl(r,!1)},_require2.specified=function(r){return T.hasOwnProperty(r)},_require2.onError=function(r){console.error(r)},_require2.resetContext();var Z={};function addAsyncDependency(r,a){Z[r]||(Z[r]=a)}a.c=_require2},,,,function(r,a,l){"use strict";l.d(a,"a",(function(){return D}));var O=l(130);function _defineProperties(r,a){for(var l=0;l<a.length;l++){var O=a[l];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}var S=[],E=new MutationObserver((function onMutation(){j||(j=!0,requestAnimationFrame((function(){j=!1,S.forEach((function(r){return r.checkVisibility()}))})))})),T=new Set,j=!1,D=function(){function VisibilityChangeObserver(r,a){!function _classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,VisibilityChangeObserver),this.isActive=!1,this.isVisible=!1,this.element=r,this.onVisibilityChange=a}return function _createClass(r,a,l){return a&&_defineProperties(r.prototype,a),l&&_defineProperties(r,l),r}(VisibilityChangeObserver,[{key:"start",value:function start(){this.isActive||(this.isActive=!0,this.isVisible=O.a.isElementVisible(this.element),S.push(this),observeElementAndAncestors(this.element))}},{key:"stop",value:function stop(){this.isActive&&(this.isActive=!1,S.splice(S.indexOf(this),1),function resetMutationObserver(){E.disconnect(),T.clear(),S.forEach((function(r){return observeElementAndAncestors(r.element)})),T.forEach((function(r){return observeElement(r)}))}())}},{key:"checkVisibility",value:function checkVisibility(){if(this.isActive){var r=O.a.isElementVisible(this.element);this.isVisible!==r&&(this.isVisible=r,this.onVisibilityChange(r))}}}]),VisibilityChangeObserver}();function observeElementAndAncestors(r){for(;r&&!T.has(r);)observeElement(r),T.add(r),r=r.parentElement}function observeElement(r){E.observe(r,{attributes:!0,attributeFilter:["id","style","class"]})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(r,a,l){var O=l(221),S=l(358),E="".split;r.exports=O((function(){return!Object("z").propertyIsEnumerable(0)}))?function(r){return"String"==S(r)?E.call(r,""):Object(r)}:Object},function(r,a,l){var O=l(240);r.exports=function(r,a){if(!O(r))return r;var l,S;if(a&&"function"==typeof(l=r.toString)&&!O(S=l.call(r)))return S;if("function"==typeof(l=r.valueOf)&&!O(S=l.call(r)))return S;if(!a&&"function"==typeof(l=r.toString)&&!O(S=l.call(r)))return S;throw TypeError("Can't convert object to primitive value")}},function(r,a){r.exports=function(r){if("function"!=typeof r)throw TypeError(String(r)+" is not a function");return r}},function(r,a){var l=Math.ceil,O=Math.floor;r.exports=function(r){return isNaN(r=+r)?0:(r>0?O:l)(r)}},function(r,a){r.exports=!0},function(r,a,l){var O=l(221),S=l(201),E=l(504),T=S("species");r.exports=function(r){return E>=51||!O((function(){var a=[];return(a.constructor={})[T]=function(){return{foo:1}},1!==a[r](Boolean).foo}))}},function(r,a,l){var O=l(333),S=l(337),E=l(506),createMethod=function(r){return function(a,l,T){var j,D=O(a),q=S(D.length),B=E(T,q);if(r&&l!=l){for(;q>B;)if((j=D[B++])!=j)return!0}else for(;q>B;B++)if((r||B in D)&&D[B]===l)return r||B||0;return!r&&-1}};r.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},function(r,a){r.exports={}},function(r,a,l){var O=l(500),S=l(502),E=O("keys");r.exports=function(r){return E[r]||(E[r]=S(r))}},function(r,a,l){l(574);var O=l(583),S=l(220),E=l(338),T=l(256),j=l(301),D=l(201)("toStringTag");for(var q in O){var B=S[q],G=B&&B.prototype;G&&E(G)!==D&&T(G,D,q),j[q]=j.Array}},function(r,a,l){var O={};O[l(201)("toStringTag")]="z",r.exports="[object z]"===String(O)},,,,,,,,,,,,,function(r,a,l){"use strict";l.d(a,"a",(function(){return getFullScreenElement}));l(1),l(7);function getFullScreenElement(){for(var r=["fullscreenElement","webkitFullscreenElement","msFullscreenElement","mozFullScreenElement"],a=0;a<r.length;a++){var l=document[r[a]];if(l)return l}return null}},,,,,,,function(r,a,l){"use strict";var O=l(5),S=l.n(O),E=l(0),T=l.n(E),j=(l(1),"stopped"),D="running",q="paused";a.a=S.a.View.extend({state:j,currentLength:void 0,length:5,direction:"down",template:null,showMinutes:!1,initialize:function initialize(){this.template=this.options.labels.counterTemplate,this.options.hasOwnProperty("length")&&(this.length=this.options.length),this.options.hasOwnProperty("direction")&&(this.direction=this.options.direction),this.options.hasOwnProperty("template")&&(this.template=this.options.template),this.options.hasOwnProperty("show_minutes")&&(this.showMinutes=this.options.show_minutes),this.resetCurrentLength(),this.render()},render:function render(){return this.$el.html(this.template.replace("{num}",'<span class="lrn_counterNumber"></span>')),this.counterNumber=this.$(".lrn_counterNumber"),this.setCounterDisplay(this.currentLength),this},counter:function counter(r){this.currentLength=r,this.setCounterDisplay(this.currentLength),"up"===this.direction&&r<this.length||"down"===this.direction&&r>0?this.timerId=T.a.delay(T.a.bind(this.counter,this),1e3,"up"===this.direction?r+1:r-1):(this.timerId=null,this.resetCurrentLength(),this.trigger("complete"))},setCounterDisplay:function setCounterDisplay(r){var a,l,O;this.showMinutes?(l=String(Math.floor(this.currentLength/60)),O=String(this.currentLength%60),a=(l=l.length>1?l:"0"+l)+":"+(O=O.length>1?O:"0"+O)):a=this.currentLength,this.counterNumber.html(a)},begin:function begin(){this.trigger("begin"),this.counter(this.currentLength),this.state=D},pause:function pause(){clearTimeout(this.timerId),this.timerId=null,this.state=q},stop:function stop(){clearTimeout(this.timerId),this.timerId=null,this.resetCurrentLength(),this.state=j},resetCurrentLength:function resetCurrentLength(){this.currentLength="up"===this.direction?0:this.length},isRunning:function isRunning(){return this.state===D},isStopped:function isStopped(){return this.state===j},isPaused:function isPaused(){return this.state===q}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(r,a,l){var O=l(255),S=l(221),E=l(496);r.exports=!O&&!S((function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a}))},function(r,a,l){var O=l(220),S=l(240),E=O.document,T=S(E)&&S(E.createElement);r.exports=function(r){return T?E.createElement(r):{}}},function(r,a,l){var O=l(439);r.exports=function(r,a,l){if(O(r),void 0===a)return r;switch(l){case 0:return function(){return r.call(a)};case 1:return function(l){return r.call(a,l)};case 2:return function(l,O){return r.call(a,l,O)};case 3:return function(l,O,S){return r.call(a,l,O,S)}}return function(){return r.apply(a,arguments)}}},function(r,a,l){"use strict";var O=l(438),S=l(335),E=l(357);r.exports=function(r,a,l){var T=O(a);T in r?S.f(r,T,E(0,l)):r[T]=l}},function(r,a,l){var O=l(240),S=l(359),E=l(201)("species");r.exports=function(r,a){var l;return S(r)&&("function"!=typeof(l=r.constructor)||l!==Array&&!S(l.prototype)?O(l)&&null===(l=l[E])&&(l=void 0):l=void 0),new(void 0===l?Array:l)(0===a?0:a)}},function(r,a,l){var O=l(441),S=l(501);(r.exports=function(r,a){return S[r]||(S[r]=void 0!==a?a:{})})("versions",[]).push({version:"3.6.4",mode:O?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(r,a,l){var O=l(220),S=l(553),E=O["__core-js_shared__"]||S("__core-js_shared__",{});r.exports=E},function(r,a){var l=0,O=Math.random();r.exports=function(r){return"Symbol("+String(void 0===r?"":r)+")_"+(++l+O).toString(36)}},function(r,a,l){var O=l(221);r.exports=!!Object.getOwnPropertySymbols&&!O((function(){return!String(Symbol())}))},function(r,a,l){var O,S,E=l(220),T=l(555),j=E.process,D=j&&j.versions,q=D&&D.v8;q?S=(O=q.split("."))[0]+O[1]:T&&(!(O=T.match(/Edge\/(\d+)/))||O[1]>=74)&&(O=T.match(/Chrome\/(\d+)/))&&(S=O[1]),r.exports=S&&+S},function(r,a,l){var O=l(278),S=l(220),aFunction=function(r){return"function"==typeof r?r:void 0};r.exports=function(r,a){return arguments.length<2?aFunction(O[r])||aFunction(S[r]):O[r]&&O[r][a]||S[r]&&S[r][a]}},function(r,a,l){var O=l(440),S=Math.max,E=Math.min;r.exports=function(r,a){var l=O(r);return l<0?S(l+a,0):E(l,a)}},function(r,a,l){var O,S=l(299),E=l(563),T=l(508),j=l(444),D=l(566),q=l(496),B=l(445),G=B("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(r){return"<script>"+r+"<\/script>"},NullProtoObject=function(){try{O=document.domain&&new ActiveXObject("htmlfile")}catch(r){}var r,a;NullProtoObject=O?function(r){r.write(scriptTag("")),r.close();var a=r.parentWindow.Object;return r=null,a}(O):((a=q("iframe")).style.display="none",D.appendChild(a),a.src=String("javascript:"),(r=a.contentWindow.document).open(),r.write(scriptTag("document.F=Object")),r.close(),r.F);for(var l=T.length;l--;)delete NullProtoObject.prototype[T[l]];return NullProtoObject()};j[G]=!0,r.exports=Object.create||function create(r,a){var l;return null!==r?(EmptyConstructor.prototype=S(r),l=new EmptyConstructor,EmptyConstructor.prototype=null,l[G]=r):l=NullProtoObject(),void 0===a?l:E(l,a)}},function(r,a){r.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(r,a){r.exports=function(){}},function(r,a,l){var O,S,E,T=l(575),j=l(220),D=l(240),q=l(256),B=l(241),G=l(445),Z=l(444),$=j.WeakMap;if(T){var Q=new $,ee=Q.get,te=Q.has,ne=Q.set;O=function(r,a){return ne.call(Q,r,a),a},S=function(r){return ee.call(Q,r)||{}},E=function(r){return te.call(Q,r)}}else{var re=G("state");Z[re]=!0,O=function(r,a){return q(r,re,a),a},S=function(r){return B(r,re)?r[re]:{}},E=function(r){return B(r,re)}}r.exports={set:O,get:S,has:E,enforce:function(r){return E(r)?S(r):O(r,{})},getterFor:function(r){return function(a){var l;if(!D(a)||(l=S(a)).type!==r)throw TypeError("Incompatible receiver, "+r+" required");return l}}}},function(r,a,l){"use strict";var O=l(200),S=l(577),E=l(513),T=l(580),j=l(514),D=l(256),q=l(582),B=l(201),G=l(441),Z=l(301),$=l(512),Q=$.IteratorPrototype,ee=$.BUGGY_SAFARI_ITERATORS,te=B("iterator"),returnThis=function(){return this};r.exports=function(r,a,l,B,$,ne,re){S(l,a,B);var oe,ie,ae,getIterationMethod=function(r){if(r===$&&pe)return pe;if(!ee&&r in ce)return ce[r];switch(r){case"keys":return function keys(){return new l(this,r)};case"values":return function values(){return new l(this,r)};case"entries":return function entries(){return new l(this,r)}}return function(){return new l(this)}},se=a+" Iterator",le=!1,ce=r.prototype,ue=ce[te]||ce["@@iterator"]||$&&ce[$],pe=!ee&&ue||getIterationMethod($),de="Array"==a&&ce.entries||ue;if(de&&(oe=E(de.call(new r)),Q!==Object.prototype&&oe.next&&(G||E(oe)===Q||(T?T(oe,Q):"function"!=typeof oe[te]&&D(oe,te,returnThis)),j(oe,se,!0,!0),G&&(Z[se]=returnThis))),"values"==$&&ue&&"values"!==ue.name&&(le=!0,pe=function values(){return ue.call(this)}),G&&!re||ce[te]===pe||D(ce,te,pe),Z[a]=pe,$)if(ie={values:getIterationMethod("values"),keys:ne?pe:getIterationMethod("keys"),entries:getIterationMethod("entries")},re)for(ae in ie)!ee&&!le&&ae in ce||q(ce,ae,ie[ae]);else O({target:a,proto:!0,forced:ee||le},ie);return ie}},function(r,a,l){"use strict";var O,S,E,T=l(513),j=l(256),D=l(241),q=l(201),B=l(441),G=q("iterator"),Z=!1;[].keys&&("next"in(E=[].keys())?(S=T(T(E)))!==Object.prototype&&(O=S):Z=!0),null==O&&(O={}),B||D(O,G)||j(O,G,(function(){return this})),r.exports={IteratorPrototype:O,BUGGY_SAFARI_ITERATORS:Z}},function(r,a,l){var O=l(241),S=l(336),E=l(445),T=l(578),j=E("IE_PROTO"),D=Object.prototype;r.exports=T?Object.getPrototypeOf:function(r){return r=S(r),O(r,j)?r[j]:"function"==typeof r.constructor&&r instanceof r.constructor?r.constructor.prototype:r instanceof Object?D:null}},function(r,a,l){var O=l(447),S=l(335).f,E=l(256),T=l(241),j=l(579),D=l(201)("toStringTag");r.exports=function(r,a,l,q){if(r){var B=l?r:r.prototype;T(B,D)||S(B,D,{configurable:!0,value:a}),q&&!O&&E(B,"toString",j)}}},function(r,a,l){"use strict";var O=l(584).charAt,S=l(510),E=l(511),T=S.set,j=S.getterFor("String Iterator");E(String,"String",(function(r){T(this,{type:"String Iterator",string:String(r),index:0})}),(function next(){var r,a=j(this),l=a.string,S=a.index;return S>=l.length?{value:void 0,done:!0}:(r=O(l,S),a.index+=r.length,{value:r,done:!1})}))},function(r,a,l){var O=l(497),S=l(437),E=l(336),T=l(337),j=l(499),D=[].push,createMethod=function(r){var a=1==r,l=2==r,q=3==r,B=4==r,G=6==r,Z=5==r||G;return function($,Q,ee,te){for(var ne,re,oe=E($),ie=S(oe),ae=O(Q,ee,3),se=T(ie.length),le=0,ce=te||j,ue=a?ce($,se):l?ce($,0):void 0;se>le;le++)if((Z||le in ie)&&(re=ae(ne=ie[le],le,oe),r))if(a)ue[le]=re;else if(re)switch(r){case 3:return!0;case 5:return ne;case 6:return le;case 2:D.call(ue,ne)}else if(B)return!1;return G?-1:q||B?B:ue}};r.exports={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6)}},function(r,a){r.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},,,,,,,,,,,,,,,function(r,a,l){"use strict";var O,S,E,T,j;if(Object.defineProperty(a,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var D=null,q=null,t=function(){if(null!==D)try{var r=a.unstable_now();D(!0,r),D=null}catch(r){throw setTimeout(t,0),r}},B=Date.now();a.unstable_now=function(){return Date.now()-B},O=function(r){null!==D?setTimeout(O,0,r):(D=r,setTimeout(t,0))},S=function(r,a){q=setTimeout(r,a)},E=function(){clearTimeout(q)},T=function(){return!1},j=a.unstable_forceFrameRate=function(){}}else{var G=window.performance,Z=window.Date,$=window.setTimeout,Q=window.clearTimeout;if("undefined"!=typeof console){var ee=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof ee&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof G&&"function"==typeof G.now)a.unstable_now=function(){return G.now()};else{var te=Z.now();a.unstable_now=function(){return Z.now()-te}}var ne=!1,re=null,oe=-1,ie=5,ae=0;T=function(){return a.unstable_now()>=ae},j=function(){},a.unstable_forceFrameRate=function(r){0>r||125<r?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):ie=0<r?Math.floor(1e3/r):5};var se=new MessageChannel,le=se.port2;se.port1.onmessage=function(){if(null!==re){var r=a.unstable_now();ae=r+ie;try{re(!0,r)?le.postMessage(null):(ne=!1,re=null)}catch(r){throw le.postMessage(null),r}}else ne=!1},O=function(r){re=r,ne||(ne=!0,le.postMessage(null))},S=function(r,l){oe=$((function(){r(a.unstable_now())}),l)},E=function(){Q(oe),oe=-1}}function J(r,a){var l=r.length;r.push(a);e:for(;;){var O=Math.floor((l-1)/2),S=r[O];if(!(void 0!==S&&0<K(S,a)))break e;r[O]=a,r[l]=S,l=O}}function L(r){return void 0===(r=r[0])?null:r}function M(r){var a=r[0];if(void 0!==a){var l=r.pop();if(l!==a){r[0]=l;e:for(var O=0,S=r.length;O<S;){var E=2*(O+1)-1,T=r[E],j=E+1,D=r[j];if(void 0!==T&&0>K(T,l))void 0!==D&&0>K(D,T)?(r[O]=D,r[j]=l,O=j):(r[O]=T,r[E]=l,O=E);else{if(!(void 0!==D&&0>K(D,l)))break e;r[O]=D,r[j]=l,O=j}}}return a}return null}function K(r,a){var l=r.sortIndex-a.sortIndex;return 0!==l?l:r.id-a.id}var ce=[],ue=[],pe=1,de=null,fe=3,he=!1,me=!1,ge=!1;function V(r){for(var a=L(ue);null!==a;){if(null===a.callback)M(ue);else{if(!(a.startTime<=r))break;M(ue),a.sortIndex=a.expirationTime,J(ce,a)}a=L(ue)}}function W(r){if(ge=!1,V(r),!me)if(null!==L(ce))me=!0,O(X);else{var a=L(ue);null!==a&&S(W,a.startTime-r)}}function X(r,l){me=!1,ge&&(ge=!1,E()),he=!0;var O=fe;try{for(V(l),de=L(ce);null!==de&&(!(de.expirationTime>l)||r&&!T());){var j=de.callback;if(null!==j){de.callback=null,fe=de.priorityLevel;var D=j(de.expirationTime<=l);l=a.unstable_now(),"function"==typeof D?de.callback=D:de===L(ce)&&M(ce),V(l)}else M(ce);de=L(ce)}if(null!==de)var q=!0;else{var B=L(ue);null!==B&&S(W,B.startTime-l),q=!1}return q}finally{de=null,fe=O,he=!1}}function Y(r){switch(r){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var ye=j;a.unstable_ImmediatePriority=1,a.unstable_UserBlockingPriority=2,a.unstable_NormalPriority=3,a.unstable_IdlePriority=5,a.unstable_LowPriority=4,a.unstable_runWithPriority=function(r,a){switch(r){case 1:case 2:case 3:case 4:case 5:break;default:r=3}var l=fe;fe=r;try{return a()}finally{fe=l}},a.unstable_next=function(r){switch(fe){case 1:case 2:case 3:var a=3;break;default:a=fe}var l=fe;fe=a;try{return r()}finally{fe=l}},a.unstable_scheduleCallback=function(r,l,T){var j=a.unstable_now();if("object"==typeof T&&null!==T){var D=T.delay;D="number"==typeof D&&0<D?j+D:j,T="number"==typeof T.timeout?T.timeout:Y(r)}else T=Y(r),D=j;return r={id:pe++,callback:l,priorityLevel:r,startTime:D,expirationTime:T=D+T,sortIndex:-1},D>j?(r.sortIndex=D,J(ue,r),null===L(ce)&&r===L(ue)&&(ge?E():ge=!0,S(W,D-j))):(r.sortIndex=T,J(ce,r),me||he||(me=!0,O(X))),r},a.unstable_cancelCallback=function(r){r.callback=null},a.unstable_wrapCallback=function(r){var a=fe;return function(){var l=fe;fe=a;try{return r.apply(this,arguments)}finally{fe=l}}},a.unstable_getCurrentPriorityLevel=function(){return fe},a.unstable_shouldYield=function(){var r=a.unstable_now();V(r);var l=L(ce);return l!==de&&null!==de&&null!==l&&null!==l.callback&&l.startTime<=r&&l.expirationTime<de.expirationTime||T()},a.unstable_requestPaint=ye,a.unstable_continueExecution=function(){me||he||(me=!0,O(X))},a.unstable_pauseExecution=function(){},a.unstable_getFirstCallbackNode=function(){return L(ce)},a.unstable_Profiling=null},,,,,,,function(r,a,l){"use strict";function _inheritsLoose(r,a){r.prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a}l.d(a,"a",(function(){return _inheritsLoose}))},,,function(r,a,l){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=SVGIcon;var O=_interopRequireDefault(l(125)),S=_interopRequireDefault(l(387)),E=_interopRequireDefault(l(126));function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}function SVGIcon(r){var a=(0,E.default)("lds-icon",r.className,{"lds-icon-hide":r.hidden});return(O.default.createElement("svg",{className:a,"aria-hidden":"true",focusable:"false"},O.default.createElement("use",{className:"lds-icon-i",xlinkHref:"#".concat(r.icon.id)})))}SVGIcon.propTypes={className:S.default.string,hidden:S.default.bool,icon:S.default.any},SVGIcon.defaultProps={className:"",hidden:!1,icon:null}},function(r,a,l){var O=l(544);r.exports=O},function(r,a,l){l(545);var O=l(278).Object,S=r.exports=function defineProperty(r,a,l){return O.defineProperty(r,a,l)};O.defineProperty.sham&&(S.sham=!0)},function(r,a,l){var O=l(200),S=l(255);O({target:"Object",stat:!0,forced:!S,sham:!S},{defineProperty:l(335).f})},function(r,a,l){var O=l(255),S=l(547),E=l(357),T=l(333),j=l(438),D=l(241),q=l(495),B=Object.getOwnPropertyDescriptor;a.f=O?B:function getOwnPropertyDescriptor(r,a){if(r=T(r),a=j(a,!0),q)try{return B(r,a)}catch(r){}if(D(r,a))return E(!S.f.call(r,a),r[a])}},function(r,a,l){"use strict";var O={}.propertyIsEnumerable,S=Object.getOwnPropertyDescriptor,E=S&&!O.call({1:2},1);a.f=E?function propertyIsEnumerable(r){var a=S(this,r);return!!a&&a.enumerable}:O},function(r,a,l){var O=l(221),S=/#|\.prototype\./,isForced=function(r,a){var l=T[E(r)];return l==D||l!=j&&("function"==typeof a?O(a):!!a)},E=isForced.normalize=function(r){return String(r).replace(S,".").toLowerCase()},T=isForced.data={},j=isForced.NATIVE="N",D=isForced.POLYFILL="P";r.exports=isForced},function(r,a,l){var O=l(550);r.exports=O},function(r,a,l){var O=l(551),S=Array.prototype;r.exports=function(r){var a=r.concat;return r===S||r instanceof Array&&a===S.concat?O:a}},function(r,a,l){l(552);var O=l(242);r.exports=O("Array").concat},function(r,a,l){"use strict";var O=l(200),S=l(221),E=l(359),T=l(240),j=l(336),D=l(337),q=l(498),B=l(499),G=l(442),Z=l(201),$=l(504),Q=Z("isConcatSpreadable"),ee=$>=51||!S((function(){var r=[];return r[Q]=!1,r.concat()[0]!==r})),te=G("concat"),isConcatSpreadable=function(r){if(!T(r))return!1;var a=r[Q];return void 0!==a?!!a:E(r)};O({target:"Array",proto:!0,forced:!ee||!te},{concat:function concat(r){var a,l,O,S,E,T=j(this),G=B(T,0),Z=0;for(a=-1,O=arguments.length;a<O;a++)if(E=-1===a?T:arguments[a],isConcatSpreadable(E)){if(Z+(S=D(E.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(l=0;l<S;l++,Z++)l in E&&q(G,Z,E[l])}else{if(Z>=9007199254740991)throw TypeError("Maximum allowed index exceeded");q(G,Z++,E)}return G.length=Z,G}})},function(r,a,l){var O=l(220),S=l(256);r.exports=function(r,a){try{S(O,r,a)}catch(l){O[r]=a}return a}},function(r,a,l){var O=l(503);r.exports=O&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(r,a,l){var O=l(505);r.exports=O("navigator","userAgent")||""},function(r,a,l){var O=l(557);r.exports=O},function(r,a,l){var O=l(558),S=Array.prototype;r.exports=function(r){var a=r.indexOf;return r===S||r instanceof Array&&a===S.indexOf?O:a}},function(r,a,l){l(559);var O=l(242);r.exports=O("Array").indexOf},function(r,a,l){"use strict";var O=l(200),S=l(443).indexOf,E=l(361),T=l(300),j=[].indexOf,D=!!j&&1/[1].indexOf(1,-0)<0,q=E("indexOf"),B=T("indexOf",{ACCESSORS:!0,1:0});O({target:"Array",proto:!0,forced:D||!q||!B},{indexOf:function indexOf(r){return D?j.apply(this,arguments)||0:S(this,r,arguments.length>1?arguments[1]:void 0)}})},function(r,a,l){var O=l(561);r.exports=O},function(r,a,l){l(562);var O=l(278).Object;r.exports=function create(r,a){return O.create(r,a)}},function(r,a,l){l(200)({target:"Object",stat:!0,sham:!l(255)},{create:l(507)})},function(r,a,l){var O=l(255),S=l(335),E=l(299),T=l(564);r.exports=O?Object.defineProperties:function defineProperties(r,a){E(r);for(var l,O=T(a),j=O.length,D=0;j>D;)S.f(r,l=O[D++],a[l]);return r}},function(r,a,l){var O=l(565),S=l(508);r.exports=Object.keys||function keys(r){return O(r,S)}},function(r,a,l){var O=l(241),S=l(333),E=l(443).indexOf,T=l(444);r.exports=function(r,a){var l,j=S(r),D=0,q=[];for(l in j)!O(T,l)&&O(j,l)&&q.push(l);for(;a.length>D;)O(j,l=a[D++])&&(~E(q,l)||q.push(l));return q}},function(r,a,l){var O=l(505);r.exports=O("document","documentElement")},function(r,a,l){var O=l(568);r.exports=function _arrayWithHoles(r){if(O(r))return r}},function(r,a,l){r.exports=l(569)},function(r,a,l){var O=l(570);r.exports=O},function(r,a,l){l(571);var O=l(278);r.exports=O.Array.isArray},function(r,a,l){l(200)({target:"Array",stat:!0},{isArray:l(359)})},function(r,a,l){var O=l(243),S=l(587);r.exports=function _iterableToArrayLimit(r,a){if(S(Object(r))||"[object Arguments]"===Object.prototype.toString.call(r)){var l=[],E=!0,T=!1,j=void 0;try{for(var D,q=O(r);!(E=(D=q.next()).done)&&(l.push(D.value),!a||l.length!==a);E=!0);}catch(r){T=!0,j=r}finally{try{E||null==q.return||q.return()}finally{if(T)throw j}}return l}}},function(r,a,l){l(446),l(515);var O=l(585);r.exports=O},function(r,a,l){"use strict";var O=l(333),S=l(509),E=l(301),T=l(510),j=l(511),D=T.set,q=T.getterFor("Array Iterator");r.exports=j(Array,"Array",(function(r,a){D(this,{type:"Array Iterator",target:O(r),index:0,kind:a})}),(function(){var r=q(this),a=r.target,l=r.kind,O=r.index++;return!a||O>=a.length?(r.target=void 0,{value:void 0,done:!0}):"keys"==l?{value:O,done:!1}:"values"==l?{value:a[O],done:!1}:{value:[O,a[O]],done:!1}}),"values"),E.Arguments=E.Array,S("keys"),S("values"),S("entries")},function(r,a,l){var O=l(220),S=l(576),E=O.WeakMap;r.exports="function"==typeof E&&/native code/.test(S(E))},function(r,a,l){var O=l(501),S=Function.toString;"function"!=typeof O.inspectSource&&(O.inspectSource=function(r){return S.call(r)}),r.exports=O.inspectSource},function(r,a,l){"use strict";var O=l(512).IteratorPrototype,S=l(507),E=l(357),T=l(514),j=l(301),returnThis=function(){return this};r.exports=function(r,a,l){var D=a+" Iterator";return r.prototype=S(O,{next:E(1,l)}),T(r,D,!1,!0),j[D]=returnThis,r}},function(r,a,l){var O=l(221);r.exports=!O((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},function(r,a,l){"use strict";var O=l(447),S=l(338);r.exports=O?{}.toString:function toString(){return"[object "+S(this)+"]"}},function(r,a,l){var O=l(299),S=l(581);r.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,a=!1,l={};try{(r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(l,[]),a=l instanceof Array}catch(r){}return function setPrototypeOf(l,E){return O(l),S(E),a?r.call(l,E):l.__proto__=E,l}}():void 0)},function(r,a,l){var O=l(240);r.exports=function(r){if(!O(r)&&null!==r)throw TypeError("Can't set "+String(r)+" as a prototype");return r}},function(r,a,l){var O=l(256);r.exports=function(r,a,l,S){S&&S.enumerable?r[a]=l:O(r,a,l)}},function(r,a){r.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(r,a,l){var O=l(440),S=l(334),createMethod=function(r){return function(a,l){var E,T,j=String(S(a)),D=O(l),q=j.length;return D<0||D>=q?r?"":void 0:(E=j.charCodeAt(D))<55296||E>56319||D+1===q||(T=j.charCodeAt(D+1))<56320||T>57343?r?j.charAt(D):E:r?j.slice(D,D+2):T-56320+(E-55296<<10)+65536}};r.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},function(r,a,l){var O=l(299),S=l(586);r.exports=function(r){var a=S(r);if("function"!=typeof a)throw TypeError(String(r)+" is not iterable");return O(a.call(r))}},function(r,a,l){var O=l(338),S=l(301),E=l(201)("iterator");r.exports=function(r){if(null!=r)return r[E]||r["@@iterator"]||S[O(r)]}},function(r,a,l){r.exports=l(588)},function(r,a,l){l(446),l(515);var O=l(589);r.exports=O},function(r,a,l){var O=l(338),S=l(201),E=l(301),T=S("iterator");r.exports=function(r){var a=Object(r);return void 0!==a[T]||"@@iterator"in a||E.hasOwnProperty(O(a))}},function(r,a){r.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(r,a,l){l(446);var O=l(592),S=l(338),E=Array.prototype,T={DOMTokenList:!0,NodeList:!0};r.exports=function(r){var a=r.forEach;return r===E||r instanceof Array&&a===E.forEach||T.hasOwnProperty(S(r))?O:a}},function(r,a,l){var O=l(593);r.exports=O},function(r,a,l){l(594);var O=l(242);r.exports=O("Array").forEach},function(r,a,l){"use strict";var O=l(200),S=l(595);O({target:"Array",proto:!0,forced:[].forEach!=S},{forEach:S})},function(r,a,l){"use strict";var O=l(516).forEach,S=l(361),E=l(300),T=S("forEach"),j=E("forEach");r.exports=T&&j?[].forEach:function forEach(r){return O(this,r,arguments.length>1?arguments[1]:void 0)}},function(r,a,l){var O=l(597);r.exports=O},function(r,a,l){var O=l(598),S=l(600),E=Array.prototype,T=String.prototype;r.exports=function(r){var a=r.includes;return r===E||r instanceof Array&&a===E.includes?O:"string"==typeof r||r===T||r instanceof String&&a===T.includes?S:a}},function(r,a,l){l(599);var O=l(242);r.exports=O("Array").includes},function(r,a,l){"use strict";var O=l(200),S=l(443).includes,E=l(509);O({target:"Array",proto:!0,forced:!l(300)("indexOf",{ACCESSORS:!0,1:0})},{includes:function includes(r){return S(this,r,arguments.length>1?arguments[1]:void 0)}}),E("includes")},function(r,a,l){l(601);var O=l(242);r.exports=O("String").includes},function(r,a,l){"use strict";var O=l(200),S=l(602),E=l(334);O({target:"String",proto:!0,forced:!l(604)("includes")},{includes:function includes(r){return!!~String(E(this)).indexOf(S(r),arguments.length>1?arguments[1]:void 0)}})},function(r,a,l){var O=l(603);r.exports=function(r){if(O(r))throw TypeError("The method doesn't accept regular expressions");return r}},function(r,a,l){var O=l(240),S=l(358),E=l(201)("match");r.exports=function(r){var a;return O(r)&&(void 0!==(a=r[E])?!!a:"RegExp"==S(r))}},function(r,a,l){var O=l(201)("match");r.exports=function(r){var a=/./;try{"/./"[r](a)}catch(l){try{return a[O]=!1,"/./"[r](a)}catch(r){}}return!1}},function(r,a,l){var O=l(606);r.exports=O},function(r,a,l){l(607);var O=l(278);r.exports=O.parseInt},function(r,a,l){var O=l(200),S=l(608);O({global:!0,forced:parseInt!=S},{parseInt:S})},function(r,a,l){var O=l(220),S=l(609).trim,E=l(517),T=O.parseInt,j=/^[+-]?0[Xx]/,D=8!==T(E+"08")||22!==T(E+"0x16");r.exports=D?function parseInt(r,a){var l=S(String(r));return T(l,a>>>0||(j.test(l)?16:10))}:T},function(r,a,l){var O=l(334),S="["+l(517)+"]",E=RegExp("^"+S+S+"*"),T=RegExp(S+S+"*$"),createMethod=function(r){return function(a){var l=String(O(a));return 1&r&&(l=l.replace(E,"")),2&r&&(l=l.replace(T,"")),l}};r.exports={start:createMethod(1),end:createMethod(2),trim:createMethod(3)}},function(r,a,l){var O=l(611);r.exports=O},function(r,a,l){var O=l(612),S=Array.prototype;r.exports=function(r){var a=r.slice;return r===S||r instanceof Array&&a===S.slice?O:a}},function(r,a,l){l(613);var O=l(242);r.exports=O("Array").slice},function(r,a,l){"use strict";var O=l(200),S=l(240),E=l(359),T=l(506),j=l(337),D=l(333),q=l(498),B=l(201),G=l(442),Z=l(300),$=G("slice"),Q=Z("slice",{ACCESSORS:!0,0:0,1:2}),ee=B("species"),te=[].slice,ne=Math.max;O({target:"Array",proto:!0,forced:!$||!Q},{slice:function slice(r,a){var l,O,B,G=D(this),Z=j(G.length),$=T(r,Z),Q=T(void 0===a?Z:a,Z);if(E(G)&&("function"!=typeof(l=G.constructor)||l!==Array&&!E(l.prototype)?S(l)&&null===(l=l[ee])&&(l=void 0):l=void 0,l===Array||void 0===l))return te.call(G,$,Q);for(O=new(void 0===l?Array:l)(ne(Q-$,0)),B=0;$<Q;$++,B++)$ in G&&q(O,B,G[$]);return O.length=B,O}})},function(r,a,l){var O=l(615);r.exports=O},function(r,a,l){var O=l(616),S=Array.prototype;r.exports=function(r){var a=r.sort;return r===S||r instanceof Array&&a===S.sort?O:a}},function(r,a,l){l(617);var O=l(242);r.exports=O("Array").sort},function(r,a,l){"use strict";var O=l(200),S=l(439),E=l(336),T=l(221),j=l(361),D=[],q=D.sort,B=T((function(){D.sort(void 0)})),G=T((function(){D.sort(null)})),Z=j("sort");O({target:"Array",proto:!0,forced:B||!G||!Z},{sort:function sort(r){return void 0===r?q.call(E(this)):q.call(E(this),S(r))}})},function(r,a,l){var O=l(619);r.exports=O},function(r,a,l){var O=l(620),S=RegExp.prototype;r.exports=function(r){return!(r===S||r instanceof RegExp)||"flags"in r?r.flags:O(r)}},function(r,a,l){l(621);var O=l(622);r.exports=function(r){return O.call(r)}},function(r,a){},function(r,a,l){"use strict";var O=l(299);r.exports=function(){var r=O(this),a="";return r.global&&(a+="g"),r.ignoreCase&&(a+="i"),r.multiline&&(a+="m"),r.dotAll&&(a+="s"),r.unicode&&(a+="u"),r.sticky&&(a+="y"),a}},function(r,a,l){var O=l(624);r.exports=O},function(r,a,l){var O=l(625),S=Array.prototype;r.exports=function(r){var a=r.map;return r===S||r instanceof Array&&a===S.map?O:a}},function(r,a,l){l(626);var O=l(242);r.exports=O("Array").map},function(r,a,l){"use strict";var O=l(200),S=l(516).map,E=l(442),T=l(300),j=E("map"),D=T("map");O({target:"Array",proto:!0,forced:!j||!D},{map:function map(r){return S(this,r,arguments.length>1?arguments[1]:void 0)}})},function(r,a,l){var O=l(628);r.exports=O},function(r,a,l){var O=l(629),S=Array.prototype;r.exports=function(r){var a=r.reduce;return r===S||r instanceof Array&&a===S.reduce?O:a}},function(r,a,l){l(630);var O=l(242);r.exports=O("Array").reduce},function(r,a,l){"use strict";var O=l(200),S=l(631).left,E=l(361),T=l(300),j=E("reduce"),D=T("reduce",{1:0});O({target:"Array",proto:!0,forced:!j||!D},{reduce:function reduce(r){return S(this,r,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(r,a,l){var O=l(439),S=l(336),E=l(437),T=l(337),createMethod=function(r){return function(a,l,j,D){O(l);var q=S(a),B=E(q),G=T(q.length),Z=r?G-1:0,$=r?-1:1;if(j<2)for(;;){if(Z in B){D=B[Z],Z+=$;break}if(Z+=$,r?Z<0:G<=Z)throw TypeError("Reduce of empty array with no initial value")}for(;r?Z>=0:G>Z;Z+=$)Z in B&&(D=l(D,B[Z],Z,q));return D}};r.exports={left:createMethod(!1),right:createMethod(!0)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(r,a,l){var O;void 0===(O=function(){var r=function(){var a,l,O,S,E,T,j="undefined",D="object",q="Shockwave Flash",B="application/x-shockwave-flash",G="SWFObjectExprInst",Z="onreadystatechange",$=window,Q=document,ee=navigator,te=!1,ne=[],re=[],oe=[],ie=[],ae=!1,se=!1,le=!0,ce=!1,ue=function(){var r=typeof Q.getElementById!=j&&typeof Q.getElementsByTagName!=j&&typeof Q.createElement!=j,a=ee.userAgent.toLowerCase(),l=ee.platform.toLowerCase(),O=/win/.test(l||a),S=/mac/.test(l||a),E=!!/webkit/.test(a)&&parseFloat(a.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),T="Microsoft Internet Explorer"===ee.appName,G=[0,0,0],Z=null;if(typeof ee.plugins!=j&&typeof ee.plugins[q]==D)(Z=ee.plugins[q].description)&&typeof ee.mimeTypes!=j&&ee.mimeTypes[B]&&ee.mimeTypes[B].enabledPlugin&&(te=!0,T=!1,Z=Z.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),G[0]=n(Z.replace(/^(.*)\..*$/,"$1")),G[1]=n(Z.replace(/^.*\.(.*)\s.*$/,"$1")),G[2]=/[a-zA-Z]/.test(Z)?n(Z.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof $.ActiveXObject!=j)try{var ne=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");ne&&(Z=ne.GetVariable("$version"))&&(T=!0,G=[n((Z=Z.split(" ")[1].split(","))[0]),n(Z[1]),n(Z[2])])}catch(r){}return{w3:r,pv:G,wk:E,ie:T,win:O,mac:S}}();ue.w3&&((typeof Q.readyState!=j&&("complete"===Q.readyState||"interactive"===Q.readyState)||typeof Q.readyState==j&&(Q.getElementsByTagName("body")[0]||Q.body))&&f(),ae||(typeof Q.addEventListener!=j&&Q.addEventListener("DOMContentLoaded",f,!1),ue.ie&&(Q.attachEvent(Z,(function aa(){"complete"==Q.readyState&&(Q.detachEvent(Z,aa),f())})),$==top&&function ac(){if(!ae){try{Q.documentElement.doScroll("left")}catch(r){return void setTimeout(ac,0)}f()}}()),ue.wk&&function ab(){ae||(/loaded|complete/.test(Q.readyState)?f():setTimeout(ab,0))}()));function f(){if(!ae&&document.getElementsByTagName("body")[0]){try{var r,a=C("span");a.style.display="none",(r=Q.getElementsByTagName("body")[0].appendChild(a)).parentNode.removeChild(r),r=null,a=null}catch(r){return}ae=!0;for(var l=ne.length,O=0;O<l;O++)ne[O]()}}function M(r){ae?r():ne[ne.length]=r}function H(){var r=re.length;if(r>0)for(var a=0;a<r;a++){var l=re[a].id,O=re[a].callbackFn,S={success:!1,id:l};if(ue.pv[0]>0){var E=c(l);if(E)if(!F(re[a].swfVersion)||ue.wk&&ue.wk<312)if(re[a].expressInstall&&A()){var T={};T.data=re[a].expressInstall,T.width=E.getAttribute("width")||"0",T.height=E.getAttribute("height")||"0",E.getAttribute("class")&&(T.styleclass=E.getAttribute("class")),E.getAttribute("align")&&(T.align=E.getAttribute("align"));for(var D={},q=E.getElementsByTagName("param"),B=q.length,G=0;G<B;G++)"movie"!=q[G].getAttribute("name").toLowerCase()&&(D[q[G].getAttribute("name")]=q[G].getAttribute("value"));R(T,D,l,O)}else b(E),O&&O(S);else w(l,!0),O&&(S.success=!0,S.ref=z(l),S.id=l,O(S))}else if(w(l,!0),O){var Z=z(l);Z&&typeof Z.SetVariable!=j&&(S.success=!0,S.ref=Z,S.id=Z.id),O(S)}}}function z(r){var a=null,l=c(r);return l&&"OBJECT"===l.nodeName.toUpperCase()&&(a=typeof l.SetVariable!==j?l:l.getElementsByTagName(D)[0]||l),a}function A(){return!se&&F("6.0.65")&&(ue.win||ue.mac)&&!(ue.wk&&ue.wk<312)}function R(r,E,T,D){var q=c(T);if(T=W(T),se=!0,O=D||null,S={success:!1,id:T},q){"OBJECT"==q.nodeName.toUpperCase()?(a=J(q),l=null):(a=q,l=T),r.id=G,(typeof r.width==j||!/%$/.test(r.width)&&n(r.width)<310)&&(r.width="310"),(typeof r.height==j||!/%$/.test(r.height)&&n(r.height)<137)&&(r.height="137");var B=ue.ie?"ActiveX":"PlugIn",Z="MMredirectURL="+encodeURIComponent($.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+B+"&MMdoctitle="+encodeURIComponent(Q.title.slice(0,47)+" - Flash Player Installation");if(typeof E.flashvars!=j?E.flashvars+="&"+Z:E.flashvars=Z,ue.ie&&4!=q.readyState){var ee=C("div");T+="SWFObjectNew",ee.setAttribute("id",T),q.parentNode.insertBefore(ee,q),q.style.display="none",y(q)}u(r,E,T)}}function b(r){if(ue.ie&&4!=r.readyState){r.style.display="none";var a=C("div");r.parentNode.insertBefore(a,r),a.parentNode.replaceChild(J(r),a),y(r)}else r.parentNode.replaceChild(J(r),r)}function J(r){var a=C("div");if(ue.win&&ue.ie)a.innerHTML=r.innerHTML;else{var l=r.getElementsByTagName(D)[0];if(l){var O=l.childNodes;if(O)for(var S=O.length,E=0;E<S;E++)1==O[E].nodeType&&"PARAM"==O[E].nodeName||8==O[E].nodeType||a.appendChild(O[E].cloneNode(!0))}}return a}function u(r,a,l){var O,S=c(l);if(l=W(l),ue.wk&&ue.wk<312)return O;if(S){var E,T,q,G=ue.ie?C("div"):C(D);for(q in typeof r.id==j&&(r.id=l),a)a.hasOwnProperty(q)&&"movie"!==q.toLowerCase()&&e(G,q,a[q]);for(E in ue.ie&&(G=function k(r,a){var l=C("div");return l.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+r+"'>"+a+"</object>",l.firstChild}(r.data,G.innerHTML)),r)r.hasOwnProperty(E)&&("styleclass"===(T=E.toLowerCase())?G.setAttribute("class",r[E]):"classid"!==T&&"data"!==T&&G.setAttribute(E,r[E]));ue.ie?oe[oe.length]=r.id:(G.setAttribute("type",B),G.setAttribute("data",r.data)),S.parentNode.replaceChild(G,S),O=G}return O}function e(r,a,l){var O=C("param");O.setAttribute("name",a),O.setAttribute("value",l),r.appendChild(O)}function y(r){var a=c(r);a&&"OBJECT"==a.nodeName.toUpperCase()&&(ue.ie?(a.style.display="none",function aa(){if(4==a.readyState){for(var r in a)"function"==typeof a[r]&&(a[r]=null);a.parentNode.removeChild(a)}else setTimeout(aa,10)}()):a.parentNode.removeChild(a))}function U(r){return r&&r.nodeType&&1===r.nodeType}function W(r){return U(r)?r.id:r}function c(r){if(U(r))return r;var a=null;try{a=Q.getElementById(r)}catch(r){}return a}function C(r){return Q.createElement(r)}function n(r){return parseInt(r,10)}function F(r){r+="";var a=ue.pv,l=r.split(".");return l[0]=n(l[0]),l[1]=n(l[1])||0,l[2]=n(l[2])||0,a[0]>l[0]||a[0]==l[0]&&a[1]>l[1]||a[0]==l[0]&&a[1]==l[1]&&a[2]>=l[2]}function v(r,a,l,O){var S=Q.getElementsByTagName("head")[0];if(S){var D="string"==typeof l?l:"screen";if(O&&(E=null,T=null),!E||T!=D){var q=C("style");q.setAttribute("type","text/css"),q.setAttribute("media",D),E=S.appendChild(q),ue.ie&&typeof Q.styleSheets!=j&&Q.styleSheets.length>0&&(E=Q.styleSheets[Q.styleSheets.length-1]),T=D}E&&(typeof E.addRule!=j?E.addRule(r,a):typeof Q.createTextNode!=j&&E.appendChild(Q.createTextNode(r+" {"+a+"}")))}}function w(r,a){if(le){var l=a?"visible":"hidden",O=c(r);ae&&O?O.style.visibility=l:"string"==typeof r&&v("#"+r,"visibility:"+l)}}function N(r){return null!=/[\\\"<>\.;]/.exec(r)&&typeof encodeURIComponent!=j?encodeURIComponent(r):r}ne[0]=function(){te?function Y(){var r=Q.getElementsByTagName("body")[0],a=C(D);a.setAttribute("style","visibility: hidden;"),a.setAttribute("type",B);var l=r.appendChild(a);if(l){var O=0;!function ab(){if(typeof l.GetVariable!=j)try{var S=l.GetVariable("$version");S&&(S=S.split(" ")[1].split(","),ue.pv=[n(S[0]),n(S[1]),n(S[2])])}catch(r){ue.pv=[8,0,0]}else if(O<10)return O++,void setTimeout(ab,10);r.removeChild(a),l=null,H()}()}else H()}():H()};ue.ie&&window.attachEvent("onunload",(function(){for(var a=ie.length,l=0;l<a;l++)ie[l][0].detachEvent(ie[l][1],ie[l][2]);for(var O=oe.length,S=0;S<O;S++)y(oe[S]);for(var E in ue)ue[E]=null;for(var T in ue=null,r)r[T]=null;r=null}));return{registerObject:function(r,a,l,O){if(ue.w3&&r&&a){var S={};S.id=r,S.swfVersion=a,S.expressInstall=l,S.callbackFn=O,re[re.length]=S,w(r,!1)}else O&&O({success:!1,id:r})},getObjectById:function(r){if(ue.w3)return z(r)},embedSWF:function(r,a,l,O,S,E,T,q,B,G){var Z=W(a),$={success:!1,id:Z};ue.w3&&!(ue.wk&&ue.wk<312)&&r&&a&&l&&O&&S?(w(Z,!1),M((function(){l+="",O+="";var Q={};if(B&&typeof B===D)for(var ee in B)Q[ee]=B[ee];Q.data=r,Q.width=l,Q.height=O;var te={};if(q&&typeof q===D)for(var ne in q)te[ne]=q[ne];if(T&&typeof T===D)for(var re in T)if(T.hasOwnProperty(re)){var oe=ce?encodeURIComponent(re):re,ie=ce?encodeURIComponent(T[re]):T[re];typeof te.flashvars!=j?te.flashvars+="&"+oe+"="+ie:te.flashvars=oe+"="+ie}if(F(S)){var ae=u(Q,te,a);Q.id==Z&&w(Z,!0),$.success=!0,$.ref=ae,$.id=ae.id}else{if(E&&A())return Q.data=E,void R(Q,te,a,G);w(Z,!0)}G&&G($)}))):G&&G($)},switchOffAutoHideShow:function(){le=!1},enableUriEncoding:function(r){ce=typeof r===j||r},ua:ue,getFlashPlayerVersion:function(){return{major:ue.pv[0],minor:ue.pv[1],release:ue.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(r,a,l){return ue.w3?u(r,a,l):void 0},showExpressInstall:function(r,a,l,O){ue.w3&&A()&&R(r,a,l,O)},removeSWF:function(r){ue.w3&&y(r)},createCSS:function(r,a,l,O){ue.w3&&v(r,a,l,O)},addDomLoadEvent:M,addLoadEvent:function s(r){if(typeof $.addEventListener!=j)$.addEventListener("load",r,!1);else if(typeof Q.addEventListener!=j)Q.addEventListener("load",r,!1);else if(typeof $.attachEvent!=j)!function g(r,a,l){r.attachEvent(a,l),ie[ie.length]=[r,a,l]}($,"onload",r);else if("function"==typeof $.onload){var a=$.onload;$.onload=function(){a(),r()}}else $.onload=r},getQueryParamValue:function(r){var a=Q.location.search||Q.location.hash;if(a){if(/\?/.test(a)&&(a=a.split("?")[1]),null==r)return N(a);for(var l=a.split("&"),O=0;O<l.length;O++)if(l[O].substring(0,l[O].indexOf("="))==r)return N(l[O].substring(l[O].indexOf("=")+1))}return""},expressInstallCallback:function(){if(se){var r=c(G);r&&a&&(r.parentNode.replaceChild(a,r),l&&(w(l,!0),ue.ie&&(a.style.display="block")),O&&O(S)),se=!1}},version:"2.3"}}();return r}.call(a,l,a,r))||(r.exports=O)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",proper?(__p+='<div class="'+(null==(__t=fractionClass)?"":__t)+'">',integer&&(__p+='<span class="'+(null==(__t=fractionClass)?"":__t)+'-integer">'+(null==(__t=integer)?"":__t)+"</span>"),__p+='<span class="'+(null==(__t=fractionClass)?"":__t)+'-proper-fraction">'+(null==(__t=proper)?"":__t)+"</span></div>"):__p+=""+(null==(__t=integer)?"":__t),__p+="";return __p}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<div ",htmlId&&(__p+='id="'+(null==(__t=htmlId)?"":__t)+'" '),__p+='class="lrn lrn_widget lrn_feature lrn_'+(null==(__t=featureType)?"":__t)+" "+(null==(__t=extraClasses)?"":__t)+'">'+(null==(__t=featureContent)?"":__t)+"</div>";return __p}}])]);